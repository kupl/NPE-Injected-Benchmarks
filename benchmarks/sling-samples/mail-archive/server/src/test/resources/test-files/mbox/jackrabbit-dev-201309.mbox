From dev-return-38369-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  2 09:31:02 2013
Return-Path: <dev-return-38369-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4CC79FB24
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  2 Sep 2013 09:31:02 +0000 (UTC)
Received: (qmail 20676 invoked by uid 500); 2 Sep 2013 09:31:01 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 20281 invoked by uid 500); 2 Sep 2013 09:30:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 19698 invoked by uid 99); 2 Sep 2013 09:30:54 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Sep 2013 09:30:54 +0000
Date: Mon, 2 Sep 2013 09:30:54 +0000 (UTC)
From: "Marcel Reutegger (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12665598.1377553274398.67661.1378114254170@arcas>
In-Reply-To: <JIRA.12665598.1377553274398@arcas>
References: <JIRA.12665598.1377553274398@arcas>
Subject: [jira] [Resolved] (JCR-3658) MembershipCache not consistently
 synchronized
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3658?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Marcel Reutegger resolved JCR-3658.
-----------------------------------

       Resolution: Fixed
    Fix Version/s: 2.7.1

Applied patch in revision http://svn.apache.org/r1519376
                
> MembershipCache not consistently synchronized
> ---------------------------------------------
>
>                 Key: JCR-3658
>                 URL: https://issues.apache.org/jira/browse/JCR-3658
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core, security
>    Affects Versions: 2.7
>            Reporter: Tobias Bocanegra
>            Assignee: Marcel Reutegger
>            Priority: Minor
>             Fix For: 2.7.1
>
>         Attachments: current.png, JCR-3658.patch, JCR-3658.patch, JCR-3658-test.patch, patched.png
>
>
> the membership cache access is mostly synchronized on 'this' but in the onEvent() handler, the internal cache object is synchronized.
> suggest: to improve cache access by a r/w lock instead.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38370-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  2 10:16:54 2013
Return-Path: <dev-return-38370-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7BBD1FC27
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  2 Sep 2013 10:16:54 +0000 (UTC)
Received: (qmail 75029 invoked by uid 500); 2 Sep 2013 10:16:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 74795 invoked by uid 500); 2 Sep 2013 10:16:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 74765 invoked by uid 99); 2 Sep 2013 10:16:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Sep 2013 10:16:52 +0000
Date: Mon, 2 Sep 2013 10:16:52 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.67869.1378117012542@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Commented] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13756002#comment-13756002 ] 

Shashank Gupta commented on JCR-3651:
-------------------------------------

Thanks [~tmueller]. I have incorporated all your comments. commit Id: https://github.com/shashank-itbhu/jackrabbit/commit/502253e2f9a0e0f56b3cc0be7e919825479c2ff1
                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38371-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  2 10:42:45 2013
Return-Path: <dev-return-38371-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D2A5FD09
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  2 Sep 2013 10:42:45 +0000 (UTC)
Received: (qmail 97058 invoked by uid 500); 2 Sep 2013 10:42:45 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 96707 invoked by uid 500); 2 Sep 2013 10:42:44 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 96695 invoked by uid 99); 2 Sep 2013 10:42:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Sep 2013 10:42:43 +0000
X-ASF-Spam-Status: No, hits=-2000.0 required=5.0
	tests=ALL_TRUSTED
X-Spam-Check-By: apache.org
Received: from [140.211.11.8] (HELO aegis.apache.org) (140.211.11.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Sep 2013 10:42:40 +0000
Received: from aegis.apache.org (localhost [127.0.0.1])
	by aegis.apache.org (Postfix) with ESMTP id A6B63C109A;
	Mon,  2 Sep 2013 10:42:19 +0000 (UTC)
Date: Mon, 2 Sep 2013 10:42:16 +0000 (UTC)
From: Apache Jenkins Server <jenkins@builds.apache.org>
To: dev@jackrabbit.apache.org, mreutegg@apache.org
Message-ID: <805689699.2914.1378118539605.JavaMail.hudson@aegis>
In-Reply-To: <1128415574.1937.1377694007252.JavaMail.hudson@aegis>
References: <1128415574.1937.1377694007252.JavaMail.hudson@aegis>
Subject: Jackrabbit-trunk - Build # 2184 - Fixed
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_2913_1759119259.1378118537147"
X-Jenkins-Job: Jackrabbit-trunk
X-Jenkins-Result: SUCCESS
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2913_1759119259.1378118537147
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

The Apache Jenkins build system has built Jackrabbit-trunk (build #2184)

Status: Fixed

Check console output at https://builds.apache.org/job/Jackrabbit-trunk/2184/ to view the results.
------=_Part_2913_1759119259.1378118537147--

From dev-return-38372-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  2 12:02:54 2013
Return-Path: <dev-return-38372-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 356F6FEEA
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  2 Sep 2013 12:02:54 +0000 (UTC)
Received: (qmail 75634 invoked by uid 500); 2 Sep 2013 12:02:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 75373 invoked by uid 500); 2 Sep 2013 12:02:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 75366 invoked by uid 99); 2 Sep 2013 12:02:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Sep 2013 12:02:51 +0000
Date: Mon, 2 Sep 2013 12:02:51 +0000 (UTC)
From: "Philipp Marx (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666568.1378123363155.68039.1378123371555@arcas>
In-Reply-To: <JIRA.12666568.1378123363155@arcas>
References: <JIRA.12666568.1378123363155@arcas>
Subject: [jira] [Created] (JCR-3662) A lot of warn messages when importing
 via Session#importXML (...doesn't represent a valid Authorizable)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Philipp Marx created JCR-3662:
---------------------------------

             Summary: A lot of warn messages when importing via Session#importXML (...doesn't represent a valid Authorizable)
                 Key: JCR-3662
                 URL: https://issues.apache.org/jira/browse/JCR-3662
             Project: Jackrabbit Content Repository
          Issue Type: Bug
    Affects Versions: 2.4
            Reporter: Philipp Marx
            Priority: Minor


We are exporting a part of our JCR tree via Session#exportSystemView and re-import this via Session#importXML. During the import we are seeing a lot of WARNINGS as the following:

11:41:35,514 | WARN  |
.core.security.user.UserImporter | 08e6b3e2-b55a-40fd-93f9-b92ccb8477d4
| Cannot handle protected PropInfo
org.apache.jackrabbit.core.xml.PropInfo@749951b8. Node node
/content/ea/api/media/5/d/5d8e29d4-2531-b5a5-388b-
e1d700000028-6826c36c-fce2-70a9-f6d2-90b100000028 doesn't represent a
valid Authorizable.
11:41:35,514 | WARN  |
re.security.user.UserManagerImpl | 08e6b3e2-b55a-40fd-93f9-b92ccb8477d4
| Unexpected user/group node type cu:Media

The imports works fine though I am wondering why the JCR importer is trying
to handle all of our nodes as Authorizables? We have a CND for cu:Media (in above case) if that matters.

I can see that this was introduced by issue JCR-3120. But why should a perfectly valid import throwing all this warning messages?

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38373-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 07:16:04 2013
Return-Path: <dev-return-38373-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBD1B1070E
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 07:16:04 +0000 (UTC)
Received: (qmail 28208 invoked by uid 500); 3 Sep 2013 07:16:02 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 27763 invoked by uid 500); 3 Sep 2013 07:15:56 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 27696 invoked by uid 99); 3 Sep 2013 07:15:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 07:15:51 +0000
Date: Tue, 3 Sep 2013 07:15:51 +0000 (UTC)
From: =?utf-8?Q?Claus_K=C3=B6ll_=28JIRA=29?= <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12665453.1377496210654.70016.1378192551650@arcas>
In-Reply-To: <JIRA.12665453.1377496210654@arcas>
References: <JIRA.12665453.1377496210654@arcas>
Subject: [jira] [Commented] (JCR-3655) Better Locking inside LockManagerImpl
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3655?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137564=
07#comment-13756407 ]=20

Claus K=C3=B6ll commented on JCR-3655:
---------------------------------

Committed in revision 1519585 to trunk.
               =20
> Better Locking inside LockManagerImpl
> -------------------------------------
>
>                 Key: JCR-3655
>                 URL: https://issues.apache.org/jira/browse/JCR-3655
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core
>    Affects Versions: 2.6.2, 2.7
>            Reporter: Claus K=C3=B6ll
>            Assignee: Claus K=C3=B6ll
>         Attachments: JCR-3655.patch
>
>
> Its possible to get a Deadlock during the TimeoutHandler is running.
> As tried to fix that problem in JCR-3605 i found that the problem is hard=
 to fix because of locking the
> ItemStateManager during modifying the lock properties. It would be better=
 to use a XAReentrantLock than the current synchronized block.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38374-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 07:17:56 2013
Return-Path: <dev-return-38374-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F64310712
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 07:17:56 +0000 (UTC)
Received: (qmail 29061 invoked by uid 500); 3 Sep 2013 07:17:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 29004 invoked by uid 500); 3 Sep 2013 07:17:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 28995 invoked by uid 99); 3 Sep 2013 07:17:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 07:17:52 +0000
Date: Tue, 3 Sep 2013 07:17:52 +0000 (UTC)
From: =?utf-8?Q?Claus_K=C3=B6ll_=28JIRA=29?= <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12665453.1377496210654.70018.1378192672424@arcas>
In-Reply-To: <JIRA.12665453.1377496210654@arcas>
References: <JIRA.12665453.1377496210654@arcas>
Subject: [jira] [Updated] (JCR-3655) Better Locking inside LockManagerImpl
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3655?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

Claus K=C3=B6ll updated JCR-3655:
----------------------------

       Resolution: Fixed
    Fix Version/s: 2.7.1
                   2.6.3
           Status: Resolved  (was: Patch Available)
   =20
> Better Locking inside LockManagerImpl
> -------------------------------------
>
>                 Key: JCR-3655
>                 URL: https://issues.apache.org/jira/browse/JCR-3655
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core
>    Affects Versions: 2.6.2, 2.7
>            Reporter: Claus K=C3=B6ll
>            Assignee: Claus K=C3=B6ll
>             Fix For: 2.6.3, 2.7.1
>
>         Attachments: JCR-3655.patch
>
>
> Its possible to get a Deadlock during the TimeoutHandler is running.
> As tried to fix that problem in JCR-3605 i found that the problem is hard=
 to fix because of locking the
> ItemStateManager during modifying the lock properties. It would be better=
 to use a XAReentrantLock than the current synchronized block.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38375-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 07:17:57 2013
Return-Path: <dev-return-38375-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A22E210713
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 07:17:56 +0000 (UTC)
Received: (qmail 29103 invoked by uid 500); 3 Sep 2013 07:17:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 29006 invoked by uid 500); 3 Sep 2013 07:17:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 28986 invoked by uid 99); 3 Sep 2013 07:17:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 07:17:52 +0000
Date: Tue, 3 Sep 2013 07:17:51 +0000 (UTC)
From: =?utf-8?Q?Claus_K=C3=B6ll_=28JIRA=29?= <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12665453.1377496210654.70017.1378192671569@arcas>
In-Reply-To: <JIRA.12665453.1377496210654@arcas>
References: <JIRA.12665453.1377496210654@arcas>
Subject: [jira] [Commented] (JCR-3655) Better Locking inside LockManagerImpl
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3655?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137564=
08#comment-13756408 ]=20

Claus K=C3=B6ll commented on JCR-3655:
---------------------------------

Committed in revision 1519586 to 2.6.x branch ..
               =20
> Better Locking inside LockManagerImpl
> -------------------------------------
>
>                 Key: JCR-3655
>                 URL: https://issues.apache.org/jira/browse/JCR-3655
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core
>    Affects Versions: 2.6.2, 2.7
>            Reporter: Claus K=C3=B6ll
>            Assignee: Claus K=C3=B6ll
>         Attachments: JCR-3655.patch
>
>
> Its possible to get a Deadlock during the TimeoutHandler is running.
> As tried to fix that problem in JCR-3605 i found that the problem is hard=
 to fix because of locking the
> ItemStateManager during modifying the lock properties. It would be better=
 to use a XAReentrantLock than the current synchronized block.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38376-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 11:29:56 2013
Return-Path: <dev-return-38376-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 18B0B10CCE
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 11:29:56 +0000 (UTC)
Received: (qmail 82027 invoked by uid 500); 3 Sep 2013 11:29:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 81863 invoked by uid 500); 3 Sep 2013 11:29:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 81781 invoked by uid 99); 3 Sep 2013 11:29:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 11:29:52 +0000
Date: Tue, 3 Sep 2013 11:29:52 +0000 (UTC)
From: "Robert Munteanu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666680.1378207690902.70588.1378207792316@arcas>
In-Reply-To: <JIRA.12666680.1378207690902@arcas>
References: <JIRA.12666680.1378207690902@arcas>
Subject: [jira] [Created] (JCR-3663) FileVault: tweak gitignore file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Robert Munteanu created JCR-3663:
------------------------------------

             Summary: FileVault: tweak gitignore file
                 Key: JCR-3663
                 URL: https://issues.apache.org/jira/browse/JCR-3663
             Project: Jackrabbit Content Repository
          Issue Type: Task
          Components: jackrabbit-jcr-commons
            Reporter: Robert Munteanu
            Priority: Trivial


After a full build the bin directory and derby.log files are shown as untracked. I'll attach a trivial patch which fixes this.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38377-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 11:31:54 2013
Return-Path: <dev-return-38377-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6EEDA10CD5
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 11:31:54 +0000 (UTC)
Received: (qmail 82923 invoked by uid 500); 3 Sep 2013 11:31:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 82859 invoked by uid 500); 3 Sep 2013 11:31:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 82852 invoked by uid 99); 3 Sep 2013 11:31:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 11:31:53 +0000
Date: Tue, 3 Sep 2013 11:31:51 +0000 (UTC)
From: "Robert Munteanu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666680.1378207690902.70589.1378207911651@arcas>
In-Reply-To: <JIRA.12666680.1378207690902@arcas>
References: <JIRA.12666680.1378207690902@arcas>
Subject: [jira] [Updated] (JCR-3663) FileVault: tweak gitignore file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3663?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Robert Munteanu updated JCR-3663:
---------------------------------

    Attachment: JCR-3663-1.patch
    
> FileVault: tweak gitignore file
> -------------------------------
>
>                 Key: JCR-3663
>                 URL: https://issues.apache.org/jira/browse/JCR-3663
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Priority: Trivial
>         Attachments: JCR-3663-1.patch
>
>
> After a full build the bin directory and derby.log files are shown as untracked. I'll attach a trivial patch which fixes this.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38378-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 15:22:00 2013
Return-Path: <dev-return-38378-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 75550103E3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 15:22:00 +0000 (UTC)
Received: (qmail 93794 invoked by uid 500); 3 Sep 2013 15:22:00 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 93427 invoked by uid 500); 3 Sep 2013 15:21:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 93413 invoked by uid 99); 3 Sep 2013 15:21:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 15:21:52 +0000
Date: Tue, 3 Sep 2013 15:21:51 +0000 (UTC)
From: "angela (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12662306.1375860879961.71660.1378221711558@arcas>
In-Reply-To: <JIRA.12662306.1375860879961@arcas>
References: <JIRA.12662306.1375860879961@arcas>
Subject: [jira] [Resolved] (JCR-3637) JackrabbitAccessControlEntry: Add
 support for multi-valued restrictions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3637?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

angela resolved JCR-3637.
-------------------------

    Resolution: Fixed
    
> JackrabbitAccessControlEntry: Add support for multi-valued restrictions
> -----------------------------------------------------------------------
>
>                 Key: JCR-3637
>                 URL: https://issues.apache.org/jira/browse/JCR-3637
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-api
>            Reporter: angela
>            Assignee: angela
>         Attachments: JCR-3637-oak.patch, JCR-3637.patch
>
>
> Currently JackrabbitAccessControlEntry can only deal with single-valued restrictions. However, it would desirable to also allow for restrictions that contain multiple values.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38379-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 18:24:01 2013
Return-Path: <dev-return-38379-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 850C410A75
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 18:24:01 +0000 (UTC)
Received: (qmail 39403 invoked by uid 500); 3 Sep 2013 18:24:01 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 38493 invoked by uid 500); 3 Sep 2013 18:23:58 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 37821 invoked by uid 99); 3 Sep 2013 18:23:54 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 18:23:54 +0000
Date: Tue, 3 Sep 2013 18:23:54 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666680.1378207690902.72583.1378232634312@arcas>
In-Reply-To: <JIRA.12666680.1378207690902@arcas>
References: <JIRA.12666680.1378207690902@arcas>
Subject: [jira] [Assigned] (JCR-3663) FileVault: tweak gitignore file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3663?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Tobias Bocanegra reassigned JCR-3663:
-------------------------------------

    Assignee: Tobias Bocanegra
    
> FileVault: tweak gitignore file
> -------------------------------
>
>                 Key: JCR-3663
>                 URL: https://issues.apache.org/jira/browse/JCR-3663
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Assignee: Tobias Bocanegra
>            Priority: Trivial
>         Attachments: JCR-3663-1.patch
>
>
> After a full build the bin directory and derby.log files are shown as untracked. I'll attach a trivial patch which fixes this.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38380-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 18:26:01 2013
Return-Path: <dev-return-38380-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 22D8E10A88
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 18:26:01 +0000 (UTC)
Received: (qmail 43121 invoked by uid 500); 3 Sep 2013 18:25:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 42888 invoked by uid 500); 3 Sep 2013 18:25:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 42651 invoked by uid 99); 3 Sep 2013 18:25:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 18:25:53 +0000
Date: Tue, 3 Sep 2013 18:25:53 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666680.1378207690902.72594.1378232753506@arcas>
In-Reply-To: <JIRA.12666680.1378207690902@arcas>
References: <JIRA.12666680.1378207690902@arcas>
Subject: [jira] [Resolved] (JCR-3663) FileVault: tweak gitignore file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3663?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Tobias Bocanegra resolved JCR-3663.
-----------------------------------

    Resolution: Fixed

patch applied in revision 1519783.
                
> FileVault: tweak gitignore file
> -------------------------------
>
>                 Key: JCR-3663
>                 URL: https://issues.apache.org/jira/browse/JCR-3663
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Assignee: Tobias Bocanegra
>            Priority: Trivial
>         Attachments: JCR-3663-1.patch
>
>
> After a full build the bin directory and derby.log files are shown as untracked. I'll attach a trivial patch which fixes this.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38381-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 19:20:00 2013
Return-Path: <dev-return-38381-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 423CD10CD6
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 19:20:00 +0000 (UTC)
Received: (qmail 14006 invoked by uid 500); 3 Sep 2013 19:19:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 11640 invoked by uid 500); 3 Sep 2013 19:19:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 11004 invoked by uid 99); 3 Sep 2013 19:19:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 19:19:53 +0000
Date: Tue, 3 Sep 2013 19:19:53 +0000 (UTC)
From: "Jukka Zitting (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666680.1378207690902.72991.1378235993923@arcas>
In-Reply-To: <JIRA.12666680.1378207690902@arcas>
References: <JIRA.12666680.1378207690902@arcas>
Subject: [jira] [Commented] (JCR-3663) FileVault: tweak gitignore file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3663?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13756950#comment-13756950 ] 

Jukka Zitting commented on JCR-3663:
------------------------------------

A better solution would be to tweak the build so that everything it produces goes inside the target folder. See the jackrabbit-core POM for an example on how to do that for the derby.log file (search for derby.stream.error.file).
                
> FileVault: tweak gitignore file
> -------------------------------
>
>                 Key: JCR-3663
>                 URL: https://issues.apache.org/jira/browse/JCR-3663
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Assignee: Tobias Bocanegra
>            Priority: Trivial
>         Attachments: JCR-3663-1.patch
>
>
> After a full build the bin directory and derby.log files are shown as untracked. I'll attach a trivial patch which fixes this.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38382-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep  3 23:45:03 2013
Return-Path: <dev-return-38382-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D248A106C7
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue,  3 Sep 2013 23:45:03 +0000 (UTC)
Received: (qmail 89293 invoked by uid 500); 3 Sep 2013 23:45:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 89222 invoked by uid 500); 3 Sep 2013 23:45:03 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 89215 invoked by uid 99); 3 Sep 2013 23:45:02 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 23:45:02 +0000
Received: from localhost (HELO mail-vc0-f171.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Sep 2013 23:45:02 +0000
Received: by mail-vc0-f171.google.com with SMTP id ij15so4386551vcb.2
        for <dev@jackrabbit.apache.org>; Tue, 03 Sep 2013 16:45:01 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=fmHEqmVHyNiTh8VZvrCnjKyemOjpkDW0tlGfo1ewygk=;
        b=Y2JA3xcyGhaMaXxEe61CaJlwOVEyYn6DgVmQkrp7dY1aOlhy/frBizxRX8CzXqIwRk
         DbUKjfgZicrP2Y6hF++ca4exhi6ANds4AyWjUJGBp/iF1PcOISPtLgra8eyiPL4wjvZH
         29C9tVefYYi/SXN37PRg16bh7MbCtZ2f1QsjzXfUY7LqkVlScqq4z9kBJE4zeRrMi9Ya
         6+kV5v0wazOdG2hOcSkNS1WFD2VaoTKS/u866F4DNBOxfUocjndctzWXSAgvYPA9f9GM
         BJp38rlUkmp0qglXK+P6FpoZpEcAzuwuVfM+Q0gtQLEFlAIg+2e1DTAuxJ9TNv1SHU/d
         GVqg==
X-Gm-Message-State: ALoCoQnJGOpySWXiNk1TNRCH5sCUROnhH3Z4RMLhtVTY1hqqFyRZzfWKXU0nPXgfSX7Y+lhX845V
MIME-Version: 1.0
X-Received: by 10.220.65.134 with SMTP id j6mr32136vci.78.1378251901515; Tue,
 03 Sep 2013 16:45:01 -0700 (PDT)
Received: by 10.52.171.83 with HTTP; Tue, 3 Sep 2013 16:45:01 -0700 (PDT)
Date: Tue, 3 Sep 2013 16:45:01 -0700
Message-ID: <CAB+dfin8Wx8UtpdNoc4YEVef-Rwc+YLybCV9Wm7GUuZ=Lyknxg@mail.gmail.com>
Subject: [SITE] How is jackrabbit's website generated?
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi,

looking at the explanations here [0] it states that the website is
generated with svnpubsub using the content at [1]. In the repository
[1] I see *.cwiki and *.mdtext. From reading the Apache CMS docu at
[2] it looks like only the mdtext files are needed.

So what's the best way to write documentation? using the svn checkout
and offline editors like Mou or directly via the Apache CMS ?

Regards, Toby


[0] http://wiki.apache.org/jackrabbit/JackrabbitWebsite
[1] https://svn.apache.org/repos/asf/jackrabbit/site/live/
[2] http://www.apache.org/dev/cmsref#markdown

From dev-return-38383-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep  4 09:55:12 2013
Return-Path: <dev-return-38383-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DFF8510629
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed,  4 Sep 2013 09:55:11 +0000 (UTC)
Received: (qmail 67352 invoked by uid 500); 4 Sep 2013 09:55:11 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 66940 invoked by uid 500); 4 Sep 2013 09:55:01 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 66580 invoked by uid 99); 4 Sep 2013 09:54:57 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Sep 2013 09:54:57 +0000
Date: Wed, 4 Sep 2013 09:54:57 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.76773.1378288497624@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Shashank Gupta updated JCR-3651:
--------------------------------

    Attachment: JCR-3651-svn.patch

Attached svn compatible patch. 
                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38384-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep  4 10:19:54 2013
Return-Path: <dev-return-38384-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 24846106C3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed,  4 Sep 2013 10:19:54 +0000 (UTC)
Received: (qmail 3822 invoked by uid 500); 4 Sep 2013 10:19:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 3354 invoked by uid 500); 4 Sep 2013 10:19:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 3261 invoked by uid 99); 4 Sep 2013 10:19:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Sep 2013 10:19:51 +0000
Date: Wed, 4 Sep 2013 10:19:51 +0000 (UTC)
From: "Thomas Mueller (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.76869.1378289991824@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Commented] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13757627#comment-13757627 ] 

Thomas Mueller commented on JCR-3651:
-------------------------------------

Hi,

Some more comments. There are many "Java beginners" errors in the code.

Don't initialize fields to their default value (null, false,...) :

{code}
protected String config = null;
{code}

Instead, simply use:

{code}
protected String config;
{code}

In the test class hierarchy there are duplicate fields, similar to:

{code}
class TestBase {
    protected String config;
}
class TestExtends extends TestBase {
    protected String config;
}
{code}

The second field hides the field in TestBase.

Many of the Javadocs comments are low quality; they don't add any valuable information. They should either be removed or a meaningful description should be added. Example:

{code}
+     * @param store
+     * @param homeDir
+     * @param config
+     * @throws DataStoreException
+     */
+    void init(CachingDataStore store, String homeDir, String config) throws DataStoreException;
{code}

Also, javadocs of the following type are basically no-ops and should be removed:

{code}
+    /**
+     * @inheritDoc
+     */
{code}

There are some comments "// TODO Auto-generated method stub", they should be removed.

I suggest to use an IDE such as Eclipse or IntelliJ, enable code warnings and go though that list and fix the warnings. Also, I suggest to use Checkstyle.



                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38385-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep  4 14:06:04 2013
Return-Path: <dev-return-38385-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E08C10C82
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed,  4 Sep 2013 14:06:04 +0000 (UTC)
Received: (qmail 10311 invoked by uid 500); 4 Sep 2013 14:06:04 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 9872 invoked by uid 500); 4 Sep 2013 14:05:57 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 9660 invoked by uid 99); 4 Sep 2013 14:05:54 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Sep 2013 14:05:54 +0000
Date: Wed, 4 Sep 2013 14:05:54 +0000 (UTC)
From: "Chris Poulsen (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12665663.1377589415673.77750.1378303554652@arcas>
In-Reply-To: <JIRA.12665663.1377589415673@arcas>
References: <JIRA.12665663.1377589415673@arcas>
Subject: [jira] [Commented] (JCR-3659) VersionManager.getVersionHistory
 followed by VersionManager.checkpoint in transaction fails
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3659?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13757792#comment-13757792 ] 

Chris Poulsen commented on JCR-3659:
------------------------------------

I've just been bit by this again :( 

It seems like performing the following two steps:
1) VersionManager.getVersionHistory(<checked-out-path>)
2) VersionManager.checkpoint(<checked-out-path>)

Makes the last step fail with the error in the issue... But only if the session is enlisted in a transaction.

Can someone explain why performing this in a (XA)transaction fails, but works like expected in a non-transactional environment? 
There are no pending changes or anything, but it seems like jackrabbit is trying to do access some undefined version or something weird like that during check-in in the transactional case.
                
> VersionManager.getVersionHistory followed by VersionManager.checkpoint in transaction fails
> -------------------------------------------------------------------------------------------
>
>                 Key: JCR-3659
>                 URL: https://issues.apache.org/jira/browse/JCR-3659
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.4.4, 2.6.3
>         Environment: Atomikos TX manager, H2 database (in-memory) 
>            Reporter: Chris Poulsen
>         Attachments: test-jcr3659.zip
>
>
> I'm seeing the exception below when performing the following operations: 
> Tx-1 (Bootstrap node):
> <begin transaction>
>   1) Create mix:versionable node called "node" in repository root.
>   2) Session.save()
>   3) VersionManager.checkpoint( "/node" )
> <finish transaction>
> Then I do:
> Tx-2 (Simplified code that fails):
> <begin transaction>
>   1) Get version history by doing VersionManager.getVersionHistory( "/node" ) (do nothing with the return value)
>   2) VersionManager.checkpoint( "/node" )
> <finish transaction>
> java.lang.RuntimeException: javax.jcr.InvalidItemStateException: Could not find child 35932dba-2ca3-40d8-94a9-762f2328be59 of node 3d10e0a6-0e8e-4ff5-8c9b-f75ccd63816d
>     at com.dezide.webauthor.core.dao.JackrabbitTest$2.doInTransactionWithoutResult(JackrabbitTest.java:65)
>     at org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:33)
>     at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:131)
>     at com.dezide.webauthor.core.dao.JackrabbitTest.testVersionHistoryBug(JackrabbitTest.java:47)
>     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>     at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
>     at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
>     at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
>     at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
>     at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
>     at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
>     at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
>     at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
>     at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
>     at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
>     at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
>     at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
>     at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
>     at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
>     at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
>     at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
>     at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
>     at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)
>     at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:202)
>     at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:65)
>     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>     at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
> Caused by: javax.jcr.InvalidItemStateException: Could not find child 35932dba-2ca3-40d8-94a9-762f2328be59 of node 3d10e0a6-0e8e-4ff5-8c9b-f75ccd63816d
>     at org.apache.jackrabbit.core.ItemManager.getDefinition(ItemManager.java:207)
>     at org.apache.jackrabbit.core.ItemData.getDefinition(ItemData.java:99)
>     at org.apache.jackrabbit.core.ItemManager.canRead(ItemManager.java:421)
>     at org.apache.jackrabbit.core.ItemManager.createItemData(ItemManager.java:843)
>     at org.apache.jackrabbit.core.ItemManager.getItemData(ItemManager.java:391)
>     at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:328)
>     at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:622)
>     at org.apache.jackrabbit.core.SessionImpl.getNodeById(SessionImpl.java:536)
>     at org.apache.jackrabbit.core.VersionManagerImpl$3.perform(VersionManagerImpl.java:162)
>     at org.apache.jackrabbit.core.VersionManagerImpl$3.perform(VersionManagerImpl.java:154)
>     at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216)
>     at org.apache.jackrabbit.core.VersionManagerImpl.perform(VersionManagerImpl.java:96)
>     at org.apache.jackrabbit.core.VersionManagerImpl.checkpoint(VersionManagerImpl.java:154)
>     at com.dezide.webauthor.core.dao.JackrabbitTest$2.doInTransactionWithoutResult(JackrabbitTest.java:61)
>     ... 32 more
> The child node id from the exception does (obviously) not exist, while the node "3d10e0a6-0e8e-4ff5-8c9b-f75ccd63816d" is of VersionHistory type (retrieved in debugger). 
> I don't think that retrieving a version history should produce changes related to creating a checkpoint, but it seems like something happens. Moving the getVersionHistory call outside the transaction or suspending the transaction while retrieving the history get things going again, but it is not really a long term solution.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38386-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep  4 16:11:23 2013
Return-Path: <dev-return-38386-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F40BC1010B
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed,  4 Sep 2013 16:11:22 +0000 (UTC)
Received: (qmail 35861 invoked by uid 500); 4 Sep 2013 16:11:22 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 35484 invoked by uid 500); 4 Sep 2013 16:11:22 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 35477 invoked by uid 99); 4 Sep 2013 16:11:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Sep 2013 16:11:21 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: error (athena.apache.org: encountered temporary error during SPF processing of domain of andreas@breakpoint.no)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Sep 2013 16:11:16 +0000
Received: from [192.168.236.139] (helo=joe.nabble.com)
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <andreas@breakpoint.no>)
	id 1VHFej-0000Um-4J
	for dev@jackrabbit.apache.org; Wed, 04 Sep 2013 09:10:10 -0700
Date: Wed, 4 Sep 2013 09:09:54 -0700 (PDT)
From: andreas <andreas@breakpoint.no>
To: dev@jackrabbit.apache.org
Message-ID: <1378310993989-4659460.post@n4.nabble.com>
Subject: Jackrabbit JCA and JTA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I am developing an application that uses both Jackrabbit and a database. In
Jackrabbit I store the files that I upload, and the database I store all the
other data in the app. I am using Spring 3.2, Hibernate 4.x and Jackrabbit
2.6.2. I have downloaded the Jackrabbit JCA version and deployed it to JBoss
7.1.1. I have configured it correctly I think. I can upload file to it and
it is saved. I also debugged my application and I saw that the session
object that invoke save() and logout() on is of type XaSession. I am using
the datastore.

The way I tested my code is like this: I have one method in the service
layer of my app annotated with @Transactional. Inside the method I first add
a file to the content repository, then I force a RunTimeException to be
thrown (and the code that should run instead of the exception would be to
save my object to the database through Hibernate). I cleared the datastore
(no files inside it) but when the exception is thrown the file that I added
isn't removed from the datastore. 

So, is this correct? Does files in datastore stay in the datastore - not
rolled back? Or should it be removed. I am using the
<tx:jta-transaction-manager /> annotation in Spring config. 

Could someone shed some light over this because I don't understand if I got
it working, or if I need to do something else to get it working? And where
does the metadata of the file that I add get stored? I have configured a own
database for the persistence manager but I don't see anything useful in the
database tables? There are only a lot of what seems to be binary things
there? Is there a way to verify if a file is inserted or not in the database
even though the actual file is stored on disk (datastore)?

Thank you

- Andreas



--
View this message in context: http://jackrabbit.510166.n4.nabble.com/Jackrabbit-JCA-and-JTA-tp4659460.html
Sent from the Jackrabbit - Dev mailing list archive at Nabble.com.

From dev-return-38387-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep  5 07:48:23 2013
Return-Path: <dev-return-38387-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC99910FE8
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu,  5 Sep 2013 07:48:23 +0000 (UTC)
Received: (qmail 35803 invoked by uid 500); 5 Sep 2013 07:48:22 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 35753 invoked by uid 500); 5 Sep 2013 07:48:14 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 35741 invoked by uid 99); 5 Sep 2013 07:48:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 07:48:10 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.137.237.88] (HELO vps.dezide.dk) (195.137.237.88)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 07:48:05 +0000
Received: from [10.0.0.92] (unknown [87.116.17.14])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by vps.dezide.dk (Postfix) with ESMTP id 6F39B184016
	for <dev@jackrabbit.apache.org>; Thu,  5 Sep 2013 09:32:53 +0200 (CEST)
Message-ID: <5228371D.5070705@dezide.com>
Date: Thu, 05 Sep 2013 09:47:41 +0200
From: Chris Poulsen <chris.poulsen@dezide.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20130801 Thunderbird/17.0.8
MIME-Version: 1.0
To: dev@jackrabbit.apache.org
Subject: Re: Jackrabbit JCA and JTA
References: <1378310993989-4659460.post@n4.nabble.com>
In-Reply-To: <1378310993989-4659460.post@n4.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I don't know about file storing vs. transactions, but I would expect it 
to work like any other transactional change to the repository.

Getting the JTA setup correctly can be somewhat of a tricky task - Are 
you sure that you are in a transaction in your method (and that you are 
in the correct transaction)?

Have you tried adding a simple node in the transaction method to see if 
a simple node is rolled back? Also you can usually ask spring and the 
JTA provider to produce really detailed logs to help you figure out what 
is going on.

HTH.
-- 
Chris

On 04-09-2013 18:09, andreas wrote:
> Hi
>
> I am developing an application that uses both Jackrabbit and a database. In
> Jackrabbit I store the files that I upload, and the database I store all the
> other data in the app. I am using Spring 3.2, Hibernate 4.x and Jackrabbit
> 2.6.2. I have downloaded the Jackrabbit JCA version and deployed it to JBoss
> 7.1.1. I have configured it correctly I think. I can upload file to it and
> it is saved. I also debugged my application and I saw that the session
> object that invoke save() and logout() on is of type XaSession. I am using
> the datastore.
>
> The way I tested my code is like this: I have one method in the service
> layer of my app annotated with @Transactional. Inside the method I first add
> a file to the content repository, then I force a RunTimeException to be
> thrown (and the code that should run instead of the exception would be to
> save my object to the database through Hibernate). I cleared the datastore
> (no files inside it) but when the exception is thrown the file that I added
> isn't removed from the datastore.
>
> So, is this correct? Does files in datastore stay in the datastore - not
> rolled back? Or should it be removed. I am using the
> <tx:jta-transaction-manager /> annotation in Spring config.
>
> Could someone shed some light over this because I don't understand if I got
> it working, or if I need to do something else to get it working? And where
> does the metadata of the file that I add get stored? I have configured a own
> database for the persistence manager but I don't see anything useful in the
> database tables? There are only a lot of what seems to be binary things
> there? Is there a way to verify if a file is inserted or not in the database
> even though the actual file is stored on disk (datastore)?
>
> Thank you
>
> - Andreas
>
>
>
> --
> View this message in context: http://jackrabbit.510166.n4.nabble.com/Jackrabbit-JCA-and-JTA-tp4659460.html
> Sent from the Jackrabbit - Dev mailing list archive at Nabble.com.


From dev-return-38388-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep  5 14:25:04 2013
Return-Path: <dev-return-38388-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4225310C2F
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu,  5 Sep 2013 14:25:04 +0000 (UTC)
Received: (qmail 17001 invoked by uid 500); 5 Sep 2013 14:25:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 16557 invoked by uid 500); 5 Sep 2013 14:24:57 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 16517 invoked by uid 99); 5 Sep 2013 14:24:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 14:24:53 +0000
Date: Thu, 5 Sep 2013 14:24:53 +0000 (UTC)
From: "Robert Munteanu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667115.1378391071230.85273.1378391093443@arcas>
In-Reply-To: <JIRA.12667115.1378391071230@arcas>
References: <JIRA.12667115.1378391071230@arcas>
Subject: [jira] [Created] (JCR-3664) FileVault: fix javadoc for
 PlatformNameFormatter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Robert Munteanu created JCR-3664:
------------------------------------

             Summary: FileVault: fix javadoc for PlatformNameFormatter
                 Key: JCR-3664
                 URL: https://issues.apache.org/jira/browse/JCR-3664
             Project: Jackrabbit Content Repository
          Issue Type: Task
          Components: jackrabbit-jcr-commons
            Reporter: Robert Munteanu
            Priority: Trivial


The javadoc for this class is incorrectly formatted - it is written as plain text rather than HTML. It's missing some p and pre tags to make it render as expected.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38390-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep  5 14:28:56 2013
Return-Path: <dev-return-38390-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 19F2D10C41
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu,  5 Sep 2013 14:28:56 +0000 (UTC)
Received: (qmail 20386 invoked by uid 500); 5 Sep 2013 14:28:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 20257 invoked by uid 500); 5 Sep 2013 14:28:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 20234 invoked by uid 99); 5 Sep 2013 14:28:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 14:28:52 +0000
Date: Thu, 5 Sep 2013 14:28:52 +0000 (UTC)
From: "Robert Munteanu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667115.1378391071230.85281.1378391332271@arcas>
In-Reply-To: <JIRA.12667115.1378391071230@arcas>
References: <JIRA.12667115.1378391071230@arcas>
Subject: [jira] [Updated] (JCR-3664) FileVault: fix javadoc for
 PlatformNameFormatter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3664?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Robert Munteanu updated JCR-3664:
---------------------------------

    Status: Patch Available  (was: Open)
    
> FileVault: fix javadoc for PlatformNameFormatter
> ------------------------------------------------
>
>                 Key: JCR-3664
>                 URL: https://issues.apache.org/jira/browse/JCR-3664
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Priority: Trivial
>         Attachments: JCR-3664-1.patch
>
>
> The javadoc for this class is incorrectly formatted - it is written as plain text rather than HTML. It's missing some p and pre tags to make it render as expected.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38389-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep  5 14:28:56 2013
Return-Path: <dev-return-38389-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 35D2E10C43
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu,  5 Sep 2013 14:28:56 +0000 (UTC)
Received: (qmail 20344 invoked by uid 500); 5 Sep 2013 14:28:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 20253 invoked by uid 500); 5 Sep 2013 14:28:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 20227 invoked by uid 99); 5 Sep 2013 14:28:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 14:28:52 +0000
Date: Thu, 5 Sep 2013 14:28:51 +0000 (UTC)
From: "Robert Munteanu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667115.1378391071230.85279.1378391331754@arcas>
In-Reply-To: <JIRA.12667115.1378391071230@arcas>
References: <JIRA.12667115.1378391071230@arcas>
Subject: [jira] [Updated] (JCR-3664) FileVault: fix javadoc for
 PlatformNameFormatter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3664?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Robert Munteanu updated JCR-3664:
---------------------------------

    Attachment: JCR-3664-1.patch
    
> FileVault: fix javadoc for PlatformNameFormatter
> ------------------------------------------------
>
>                 Key: JCR-3664
>                 URL: https://issues.apache.org/jira/browse/JCR-3664
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Priority: Trivial
>         Attachments: JCR-3664-1.patch
>
>
> The javadoc for this class is incorrectly formatted - it is written as plain text rather than HTML. It's missing some p and pre tags to make it render as expected.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38391-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep  5 17:52:36 2013
Return-Path: <dev-return-38391-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6107510336
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu,  5 Sep 2013 17:52:36 +0000 (UTC)
Received: (qmail 8650 invoked by uid 500); 5 Sep 2013 17:52:35 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 8396 invoked by uid 500); 5 Sep 2013 17:52:30 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 8379 invoked by uid 99); 5 Sep 2013 17:52:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 17:52:28 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=HTML_MESSAGE,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: error (athena.apache.org: encountered temporary error during SPF processing of domain of andreas@breakpoint.no)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 17:52:24 +0000
Received: from [192.168.236.139] (helo=joe.nabble.com)
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <andreas@breakpoint.no>)
	id 1VHdiA-00021t-MC
	for dev@jackrabbit.apache.org; Thu, 05 Sep 2013 10:51:18 -0700
Date: Thu, 5 Sep 2013 10:51:03 -0700 (PDT)
From: andreas <andreas@breakpoint.no>
To: dev@jackrabbit.apache.org
Message-ID: <000501ceaa60$6aa120d0$3fe36270$@breakpoint.no>
Subject: SV: Jackrabbit JCA and JTA
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_199642_17401238.1378403463669"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_199642_17401238.1378403463669
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello

It seems like the Jackrabbit session commits independently of the other
code. I have no idea why. 

 

Fra: Chris Poulsen [via Jackrabbit]
[mailto:ml-node+s510166n4659461h46@n4.nabble.com] 
Sendt: 5. september 2013 09:49
Til: andreas
Emne: Re: Jackrabbit JCA and JTA

 

Hi, 

I don't know about file storing vs. transactions, but I would expect it 
to work like any other transactional change to the repository. 

Getting the JTA setup correctly can be somewhat of a tricky task - Are 
you sure that you are in a transaction in your method (and that you are 
in the correct transaction)? 

Have you tried adding a simple node in the transaction method to see if 
a simple node is rolled back? Also you can usually ask spring and the 
JTA provider to produce really detailed logs to help you figure out what 
is going on. 

HTH. 
-- 
Chris 

On 04-09-2013 18:09, andreas wrote: 


> Hi 
> 
> I am developing an application that uses both Jackrabbit and a database.
In 
> Jackrabbit I store the files that I upload, and the database I store all
the 
> other data in the app. I am using Spring 3.2, Hibernate 4.x and Jackrabbit

> 2.6.2. I have downloaded the Jackrabbit JCA version and deployed it to
JBoss 
> 7.1.1. I have configured it correctly I think. I can upload file to it and

> it is saved. I also debugged my application and I saw that the session 
> object that invoke save() and logout() on is of type XaSession. I am using

> the datastore. 
> 
> The way I tested my code is like this: I have one method in the service 
> layer of my app annotated with @Transactional. Inside the method I first
add 
> a file to the content repository, then I force a RunTimeException to be 
> thrown (and the code that should run instead of the exception would be to 
> save my object to the database through Hibernate). I cleared the datastore

> (no files inside it) but when the exception is thrown the file that I
added 
> isn't removed from the datastore. 
> 
> So, is this correct? Does files in datastore stay in the datastore - not 
> rolled back? Or should it be removed. I am using the 
> <tx:jta-transaction-manager /> annotation in Spring config. 
> 
> Could someone shed some light over this because I don't understand if I
got 
> it working, or if I need to do something else to get it working? And where

> does the metadata of the file that I add get stored? I have configured a
own 
> database for the persistence manager but I don't see anything useful in
the 
> database tables? There are only a lot of what seems to be binary things 
> there? Is there a way to verify if a file is inserted or not in the
database 
> even though the actual file is stored on disk (datastore)? 
> 
> Thank you 
> 
> - Andreas 
> 
> 
> 
> -- 
> View this message in context:
http://jackrabbit.510166.n4.nabble.com/Jackrabbit-JCA-and-JTA-tp4659460.html
> Sent from the Jackrabbit - Dev mailing list archive at Nabble.com. 





  _____  

If you reply to this email, your message will be added to the discussion
below:

http://jackrabbit.510166.n4.nabble.com/Jackrabbit-JCA-and-JTA-tp4659460p4659
461.html 

To unsubscribe from Jackrabbit JCA and JTA, click here
<http://jackrabbit.510166.n4.nabble.com/template/NamlServlet.jtp?macro=unsub
scribe_by_code&node=4659460&code=YW5kcmVhc0BicmVha3BvaW50Lm5vfDQ2NTk0NjB8LTg
zMDc1MzU4> .
 
<http://jackrabbit.510166.n4.nabble.com/template/NamlServlet.jtp?macro=macro
_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.Ba
sicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.templa
te.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instan
t_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
NAML 





--
View this message in context: http://jackrabbit.510166.n4.nabble.com/SV-Jackrabbit-JCA-and-JTA-tp4659467.html
Sent from the Jackrabbit - Dev mailing list archive at Nabble.com.
------=_Part_199642_17401238.1378403463669
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii"=
><meta name=3DGenerator content=3D"Microsoft Word 15 (filtered medium)"><!-=
-[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--><div class=3DWordSection1><p class=3DMsoN=
ormal><span lang=3DEN-US style=3D'font-size:11.0pt;font-family:"Calibri","s=
ans-serif";color:#1F497D;mso-fareast-language:EN-US'>Hello<o:p></o:p></span=
></p><p class=3DMsoNormal><span lang=3DEN-US style=3D'font-size:11.0pt;font=
-family:"Calibri","sans-serif";color:#1F497D;mso-fareast-language:EN-US'>It=
 seems like the Jackrabbit session commits independently of the other code.=
 I have no idea why. <o:p></o:p></span></p><p class=3DMsoNormal><span lang=
=3DEN-US style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color=
:#1F497D;mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p class=
=3DMsoNormal><b><span style=3D'font-size:11.0pt;font-family:"Calibri","sans=
-serif"'>Fra:</span></b><span style=3D'font-size:11.0pt;font-family:"Calibr=
i","sans-serif"'> Chris Poulsen [via Jackrabbit] [mailto:<a href=3D"/user/S=
endEmail.jtp?type=3Dnode&node=3D4659467&i=3D0" target=3D"_top" rel=3D"nofol=
low" link=3D"external">[hidden email]</a>] <br><b>Sendt:</b> 5. september 2=
013 09:49<br><b>Til:</b> andreas<br><b>Emne:</b> Re: Jackrabbit JCA and JTA=
<o:p></o:p></span></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3D=
MsoNormal>Hi, <br><br>I don't know about file storing vs. transactions, but=
 I would expect it <br>to work like any other transactional change to the r=
epository. <br><br>Getting the JTA setup correctly can be somewhat of a tri=
cky task - Are <br>you sure that you are in a transaction in your method (a=
nd that you are <br>in the correct transaction)? <br><br>Have you tried add=
ing a simple node in the transaction method to see if <br>a simple node is =
rolled back? Also you can usually ask spring and the <br>JTA provider to pr=
oduce really detailed logs to help you figure out what <br>is going on. <br=
><br>HTH. <br>-- <br>Chris <br><br>On 04-09-2013 18:09, andreas wrote: <o:p=
></o:p></p><div><p class=3DMsoNormal><div class=3D'shrinkable-quote'><br>&g=
t; Hi <br>&gt; <br>&gt; I am developing an application that uses both Jackr=
abbit and a database. In <br>&gt; Jackrabbit I store the files that I uploa=
d, and the database I store all the <br>&gt; other data in the app. I am us=
ing Spring 3.2, Hibernate 4.x and Jackrabbit <br>&gt; 2.6.2. I have downloa=
ded the Jackrabbit JCA version and deployed it to JBoss <br>&gt; 7.1.1. I h=
ave configured it correctly I think. I can upload file to it and <br>&gt; i=
t is saved. I also debugged my application and I saw that the session <br>&=
gt; object that invoke save() and logout() on is of type XaSession. I am us=
ing <br>&gt; the datastore. <br>&gt; <br>&gt; The way I tested my code is l=
ike this: I have one method in the service <br>&gt; layer of my app annotat=
ed with @Transactional. Inside the method I first add <br>&gt; a file to th=
e content repository, then I force a RunTimeException to be <br>&gt; thrown=
 (and the code that should run instead of the exception would be to <br>&gt=
; save my object to the database through Hibernate). I cleared the datastor=
e <br>&gt; (no files inside it) but when the exception is thrown the file t=
hat I added <br>&gt; isn't removed from the datastore. <br>&gt; <br>&gt; So=
, is this correct? Does files in datastore stay in the datastore - not <br>=
&gt; rolled back? Or should it be removed. I am using the <br>&gt; &lt;tx:j=
ta-transaction-manager /&gt; annotation in Spring config. <br>&gt; <br>&gt;=
 Could someone shed some light over this because I don't understand if I go=
t <br>&gt; it working, or if I need to do something else to get it working?=
 And where <br>&gt; does the metadata of the file that I add get stored? I =
have configured a own <br>&gt; database for the persistence manager but I d=
on't see anything useful in the <br>&gt; database tables? There are only a =
lot of what seems to be binary things <br>&gt; there? Is there a way to ver=
ify if a file is inserted or not in the database <br>&gt; even though the a=
ctual file is stored on disk (datastore)? <br>&gt; <br>&gt; Thank you <br>&=
gt; <br>&gt; - Andreas <br>&gt; <br>&gt; <br>&gt; <br>&gt; -- <br>&gt; View=
 this message in context: <a href=3D"" target=3D"_top" rel=3D"nofollow" lin=
k=3D"external">click here</a>.<br><a href=3D"http://jackrabbit.510166.n4.na=
bble.com/template/NamlServlet.jtp?macro=3Dmacro_viewer&amp;id=3Dinstant_htm=
l%21nabble%3Aemail.naml&amp;base=3Dnabble.naml.namespaces.BasicNamespace-na=
bble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespa=
ce&amp;breadcrumbs=3Dnotify_subscribers%21nabble%3Aemail.naml-instant_email=
s%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml" target=3D=
"_top" rel=3D"nofollow" link=3D"external"><span style=3D'font-size:7.0pt;fo=
nt-family:"Times New Roman","serif"'>NAML</span></a> <o:p></o:p></span></p>=
</div></div>

=09
=09
=09
<br/><hr align=3D"left" width=3D"300" />
View this message in context: <a href=3D"http://jackrabbit.510166.n4.nabble=
.com/SV-Jackrabbit-JCA-and-JTA-tp4659467.html">SV: Jackrabbit JCA and JTA</=
a><br/>
Sent from the <a href=3D"http://jackrabbit.510166.n4.nabble.com/Jackrabbit-=
Dev-f523400.html">Jackrabbit - Dev mailing list archive</a> at Nabble.com.<=
br/>
------=_Part_199642_17401238.1378403463669--

From dev-return-38392-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep  5 19:26:04 2013
Return-Path: <dev-return-38392-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 463C010704
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu,  5 Sep 2013 19:26:04 +0000 (UTC)
Received: (qmail 42049 invoked by uid 500); 5 Sep 2013 19:26:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 41897 invoked by uid 500); 5 Sep 2013 19:26:03 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 41840 invoked by uid 99); 5 Sep 2013 19:26:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 19:26:02 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pontus.amberg@gmail.com designates 74.125.82.46 as permitted sender)
Received: from [74.125.82.46] (HELO mail-wg0-f46.google.com) (74.125.82.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Sep 2013 19:25:58 +0000
Received: by mail-wg0-f46.google.com with SMTP id k14so2072941wgh.1
        for <dev@jackrabbit.apache.org>; Thu, 05 Sep 2013 12:25:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=/U0mkSjh67ojuWOnzNXlAAOiXF0tAuoYAZFqulGRG40=;
        b=ASI/i0DNoTTbKL2eg8pC4PS63D+yoxzJmP/wVMmEaYgfwGZ22ItG0K3sk/ZoSeNDBS
         trOUc+j03pny9mW48cswf/0IH7VI9fcMoP+3cTblDxV8JLkocGCnmt1Cp9gGYnAcxNnz
         QmDvGu4TDkKHxT1G2EQnGmlL+8c2Jjf/rcTmADzUttHP2j99BjbaLRMeRWJU4eoC9kgO
         pPiFEG0xEU1dBFUCOeHufBD6HZI4xETitjirPpnTg+5hNG1ETC1M/yVpWyQWPq1fc7BV
         mZNlcIcSXC3K8FfrmZWAlQYTbLkbaKJMdZ1uwXBlOcqZmxG6uwppvg7COUhefbkgiXcj
         lxQQ==
X-Received: by 10.180.97.38 with SMTP id dx6mr4466776wib.26.1378409136982;
 Thu, 05 Sep 2013 12:25:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.7.72 with HTTP; Thu, 5 Sep 2013 12:25:09 -0700 (PDT)
In-Reply-To: <000501ceaa60$6aa120d0$3fe36270$@breakpoint.no>
References: <000501ceaa60$6aa120d0$3fe36270$@breakpoint.no>
From: Pontus Amberg <pontus.amberg@gmail.com>
Date: Thu, 5 Sep 2013 21:25:09 +0200
Message-ID: <CAPJFWxnA1hiScM5pafu9t6gdbnhMxf+YnNxzA4SY+NM9rM9Z1w@mail.gmail.com>
Subject: Re: Jackrabbit JCA and JTA
To: dev@jackrabbit.apache.org
Content-Type: multipart/alternative; boundary=f46d0443044ef711e104e5a7e2a1
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0443044ef711e104e5a7e2a1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

After the exception was the actual file node created still available in the
repository or
was it just the data in the datastore that still was available?

If it just was the data in the datastore then maybe you need to run the
garbage
collection on the datastore
http://wiki.apache.org/jackrabbit/DataStore#Data_Store_Garbage_Collection ?

/Pontus


On 5 September 2013 19:51, andreas <andreas@breakpoint.no> wrote:

> Hello****
>
> It seems like the Jackrabbit session commits independently of the other
> code. I have no idea why. ****
>
> ** **
>
> *Fra:* Chris Poulsen [via Jackrabbit] [mailto:[hidden email]<http://user/=
SendEmail.jtp?type=3Dnode&node=3D4659467&i=3D0>]
>
> *Sendt:* 5. september 2013 09:49
> *Til:* andreas
> *Emne:* Re: Jackrabbit JCA and JTA****
>
> ** **
>
> Hi,
>
> I don't know about file storing vs. transactions, but I would expect it
> to work like any other transactional change to the repository.
>
> Getting the JTA setup correctly can be somewhat of a tricky task - Are
> you sure that you are in a transaction in your method (and that you are
> in the correct transaction)?
>
> Have you tried adding a simple node in the transaction method to see if
> a simple node is rolled back? Also you can usually ask spring and the
> JTA provider to produce really detailed logs to help you figure out what
> is going on.
>
> HTH.
> --
> Chris
>
> On 04-09-2013 18:09, andreas wrote: ****
>
>
> > Hi
> >
> > I am developing an application that uses both Jackrabbit and a database=
.
> In
> > Jackrabbit I store the files that I upload, and the database I store al=
l
> the
> > other data in the app. I am using Spring 3.2, Hibernate 4.x and
> Jackrabbit
> > 2.6.2. I have downloaded the Jackrabbit JCA version and deployed it to
> JBoss
> > 7.1.1. I have configured it correctly I think. I can upload file to it
> and
> > it is saved. I also debugged my application and I saw that the session
> > object that invoke save() and logout() on is of type XaSession. I am
> using
> > the datastore.
> >
> > The way I tested my code is like this: I have one method in the service
> > layer of my app annotated with @Transactional. Inside the method I firs=
t
> add
> > a file to the content repository, then I force a RunTimeException to be
> > thrown (and the code that should run instead of the exception would be
> to
> > save my object to the database through Hibernate). I cleared the
> datastore
> > (no files inside it) but when the exception is thrown the file that I
> added
> > isn't removed from the datastore.
> >
> > So, is this correct? Does files in datastore stay in the datastore - no=
t
> > rolled back? Or should it be removed. I am using the
> > <tx:jta-transaction-manager /> annotation in Spring config.
> >
> > Could someone shed some light over this because I don't understand if I
> got
> > it working, or if I need to do something else to get it working? And
> where
> > does the metadata of the file that I add get stored? I have configured =
a
> own
> > database for the persistence manager but I don't see anything useful in
> the
> > database tables? There are only a lot of what seems to be binary things
> > there? Is there a way to verify if a file is inserted or not in the
> database
> > even though the actual file is stored on disk (datastore)?
> >
> > Thank you
> >
> > - Andreas
> >
> >
> >
> > --
> > View this message in context: click here.
> NAML<http://jackrabbit.510166.n4.nabble.com/template/NamlServlet.jtp?macr=
o=3Dmacro_viewer&id=3Dinstant_html%21nabble%3Aemail.naml&base=3Dnabble.naml=
.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.=
view.web.template.NodeNamespace&breadcrumbs=3Dnotify_subscribers%21nabble%3=
Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabbl=
e%3Aemail.naml>
> ****
>
>
> ------------------------------
> View this message in context: SV: Jackrabbit JCA and JTA<http://jackrabbi=
t.510166.n4.nabble.com/SV-Jackrabbit-JCA-and-JTA-tp4659467.html>
>
> Sent from the Jackrabbit - Dev mailing list archive<http://jackrabbit.510=
166.n4.nabble.com/Jackrabbit-Dev-f523400.html>at Nabble.com.
>

--f46d0443044ef711e104e5a7e2a1
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div><div>After the exception was the actual file nod=
e created still available in the repository or<br>was it just the data in t=
he datastore that still was available?<br><br></div>If it just was the data=
 in the datastore then maybe you need to run the garbage<br>

collection on the datastore <a href=3D"http://wiki.apache.org/jackrabbit/Da=
taStore#Data_Store_Garbage_Collection">http://wiki.apache.org/jackrabbit/Da=
taStore#Data_Store_Garbage_Collection</a> ?<br></div><br></div>/Pontus<br>

</div><div class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On 5 Se=
ptember 2013 19:51, andreas <span dir=3D"ltr">&lt;<a href=3D"mailto:andreas=
@breakpoint.no" target=3D"_blank">andreas@breakpoint.no</a>&gt;</span> wrot=
e:<br>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><p class=3D"MsoNormal"><span style=3D"f=
ont-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;colo=
r:#1f497d" lang=3D"EN-US">Hello<u></u><u></u></span></p>

<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;color:#1f497d" lang=3D"EN-US">It seems l=
ike the Jackrabbit session commits independently of the other code. I have =
no idea why. <u></u><u></u></span></p>

<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;color:#1f497d" lang=3D"EN-US"><u></u>=A0=
<u></u></span></p><p class=3D"MsoNormal"><b><span style=3D"font-size:11.0pt=
;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Fra:</span></b><sp=
an style=3D"font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-ser=
if&quot;"> Chris Poulsen [via Jackrabbit] [mailto:<a href=3D"http://user/Se=
ndEmail.jtp?type=3Dnode&amp;node=3D4659467&amp;i=3D0" rel=3D"nofollow" link=
=3D"external" target=3D"_blank">[hidden email]</a>] <br>

<b>Sendt:</b> 5. september 2013 09:49<br><b>Til:</b> andreas<br><b>Emne:</b=
> Re: Jackrabbit JCA and JTA<u></u><u></u></span></p><div><div class=3D"h5"=
><p class=3D"MsoNormal"><u></u>=A0<u></u></p><p class=3D"MsoNormal">Hi, <br=
><br>

I don&#39;t know about file storing vs. transactions, but I would expect it=
 <br>to work like any other transactional change to the repository. <br><br=
>Getting the JTA setup correctly can be somewhat of a tricky task - Are <br=
>

you sure that you are in a transaction in your method (and that you are <br=
>in the correct transaction)? <br><br>Have you tried adding a simple node i=
n the transaction method to see if <br>a simple node is rolled back? Also y=
ou can usually ask spring and the <br>

JTA provider to produce really detailed logs to help you figure out what <b=
r>is going on. <br><br>HTH. <br>-- <br>Chris <br><br>On 04-09-2013 18:09, a=
ndreas wrote: <u></u><u></u></p></div></div><div><p class=3D"MsoNormal">
</p>
<div><div><div class=3D"h5"><br>&gt; Hi <br>&gt; <br>&gt; I am developing a=
n application that uses both Jackrabbit and a database. In <br>&gt; Jackrab=
bit I store the files that I upload, and the database I store all the <br>

&gt; other data in the app. I am using Spring 3.2, Hibernate 4.x and Jackra=
bbit <br>&gt; 2.6.2. I have downloaded the Jackrabbit JCA version and deplo=
yed it to JBoss <br>&gt; 7.1.1. I have configured it correctly I think. I c=
an upload file to it and <br>

&gt; it is saved. I also debugged my application and I saw that the session=
 <br>&gt; object that invoke save() and logout() on is of type XaSession. I=
 am using <br>&gt; the datastore. <br>&gt; <br>&gt; The way I tested my cod=
e is like this: I have one method in the service <br>

&gt; layer of my app annotated with @Transactional. Inside the method I fir=
st add <br>&gt; a file to the content repository, then I force a RunTimeExc=
eption to be <br>&gt; thrown (and the code that should run instead of the e=
xception would be to <br>

&gt; save my object to the database through Hibernate). I cleared the datas=
tore <br>&gt; (no files inside it) but when the exception is thrown the fil=
e that I added <br>&gt; isn&#39;t removed from the datastore. <br>&gt; <br>

&gt; So, is this correct? Does files in datastore stay in the datastore - n=
ot <br>&gt; rolled back? Or should it be removed. I am using the <br>&gt; &=
lt;tx:jta-transaction-manager /&gt; annotation in Spring config. <br>&gt; <=
br>

&gt; Could someone shed some light over this because I don&#39;t understand=
 if I got <br>&gt; it working, or if I need to do something else to get it =
working? And where <br>&gt; does the metadata of the file that I add get st=
ored? I have configured a own <br>

&gt; database for the persistence manager but I don&#39;t see anything usef=
ul in the <br>&gt; database tables? There are only a lot of what seems to b=
e binary things <br>&gt; there? Is there a way to verify if a file is inser=
ted or not in the database <br>

&gt; even though the actual file is stored on disk (datastore)? <br>&gt; <b=
r>&gt; Thank you <br>&gt; <br>&gt; - Andreas <br>&gt; <br>&gt; <br>&gt; <br=
>&gt; -- <br></div></div>&gt; View this message in context: <a rel=3D"nofol=
low" link=3D"external">click here</a>.<br>

<a href=3D"http://jackrabbit.510166.n4.nabble.com/template/NamlServlet.jtp?=
macro=3Dmacro_viewer&amp;id=3Dinstant_html%21nabble%3Aemail.naml&amp;base=
=3Dnabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNam=
espace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=3Dnotify_subs=
cribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_ins=
tant_email%21nabble%3Aemail.naml" rel=3D"nofollow" link=3D"external" target=
=3D"_blank"><span style=3D"font-size:7.0pt;font-family:&quot;Times New Roma=
n&quot;,&quot;serif&quot;">NAML</span></a> <u></u><u></u></div>

<p></p></div></div>

=09
=09
=09
<br><hr align=3D"left" width=3D"300">
View this message in context: <a href=3D"http://jackrabbit.510166.n4.nabble=
.com/SV-Jackrabbit-JCA-and-JTA-tp4659467.html" target=3D"_blank">SV: Jackra=
bbit JCA and JTA</a><div class=3D"HOEnZb"><div class=3D"h5"><br>
Sent from the <a href=3D"http://jackrabbit.510166.n4.nabble.com/Jackrabbit-=
Dev-f523400.html" target=3D"_blank">Jackrabbit - Dev mailing list archive</=
a> at Nabble.com.<br></div></div></blockquote></div><br></div>

--f46d0443044ef711e104e5a7e2a1--

From dev-return-38393-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Fri Sep  6 09:03:16 2013
Return-Path: <dev-return-38393-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B86BB10E40
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Fri,  6 Sep 2013 09:03:16 +0000 (UTC)
Received: (qmail 74302 invoked by uid 500); 6 Sep 2013 09:03:16 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 73921 invoked by uid 500); 6 Sep 2013 09:03:08 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 73913 invoked by uid 99); 6 Sep 2013 09:03:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Sep 2013 09:03:06 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.137.237.88] (HELO vps.dezide.dk) (195.137.237.88)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Sep 2013 09:03:01 +0000
Received: from [10.0.0.92] (unknown [87.116.17.14])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by vps.dezide.dk (Postfix) with ESMTP id B3124184017
	for <dev@jackrabbit.apache.org>; Fri,  6 Sep 2013 10:47:40 +0200 (CEST)
Message-ID: <52299A2D.4010101@dezide.com>
Date: Fri, 06 Sep 2013 11:02:37 +0200
From: Chris Poulsen <chris.poulsen@dezide.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20130801 Thunderbird/17.0.8
MIME-Version: 1.0
To: dev@jackrabbit.apache.org
Subject: Re: SV: Jackrabbit JCA and JTA
References: <000501ceaa60$6aa120d0$3fe36270$@breakpoint.no>
In-Reply-To: <000501ceaa60$6aa120d0$3fe36270$@breakpoint.no>
Content-Type: multipart/alternative;
 boundary="------------030009010601060005090208"
X-Virus-Checked: Checked by ClamAV on apache.org

This is a multi-part message in MIME format.
--------------030009010601060005090208
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Apparently my mail client decided to screw me over ;-) here is the 
complete msg.

Hi,

I've used a corner of the se-jcr (spring-extensions jcr) library v0.9 to 
get this going in our application (a horribly old/not maintained library).

Our transactions are driven by the use of @Transactional to allow us to 
have tests running with transactions.

I ended up not using the OSV pattern for JCR, it gave me more trouble 
than benefits. Instead I ended up using:

SessionFactoryUtils.getSession() and 
SessionFactoryUtils.releaseSession() from the spring module, this 
ensures that the JCR session is registered with the spring transaction 
synchronization stuff and did not impact my pre-transactional code much.

HTH.
-- 
Chris

On 05-09-2013 19:51, andreas wrote:
>
> Hello
>
> It seems like the Jackrabbit session commits independently of the 
> other code. I have no idea why.
>
> *Fra:*Chris Poulsen [via Jackrabbit] [mailto:[hidden email] 
> </user/SendEmail.jtp?type=node&node=4659467&i=0>]
> *Sendt:* 5. september 2013 09:49
> *Til:* andreas
> *Emne:* Re: Jackrabbit JCA and JTA
>
> Hi,
>
> I don't know about file storing vs. transactions, but I would expect it
> to work like any other transactional change to the repository.
>
> Getting the JTA setup correctly can be somewhat of a tricky task - Are
> you sure that you are in a transaction in your method (and that you are
> in the correct transaction)?
>
> Have you tried adding a simple node in the transaction method to see if
> a simple node is rolled back? Also you can usually ask spring and the
> JTA provider to produce really detailed logs to help you figure out what
> is going on.
>
> HTH.
> -- 
> Chris
>
> On 04-09-2013 18:09, andreas wrote:
>
>
> > Hi
> >
> > I am developing an application that uses both Jackrabbit and a 
> database. In
> > Jackrabbit I store the files that I upload, and the database I store 
> all the
> > other data in the app. I am using Spring 3.2, Hibernate 4.x and 
> Jackrabbit
> > 2.6.2. I have downloaded the Jackrabbit JCA version and deployed it 
> to JBoss
> > 7.1.1. I have configured it correctly I think. I can upload file to 
> it and
> > it is saved. I also debugged my application and I saw that the session
> > object that invoke save() and logout() on is of type XaSession. I am 
> using
> > the datastore.
> >
> > The way I tested my code is like this: I have one method in the service
> > layer of my app annotated with @Transactional. Inside the method I 
> first add
> > a file to the content repository, then I force a RunTimeException to be
> > thrown (and the code that should run instead of the exception would 
> be to
> > save my object to the database through Hibernate). I cleared the 
> datastore
> > (no files inside it) but when the exception is thrown the file that 
> I added
> > isn't removed from the datastore.
> >
> > So, is this correct? Does files in datastore stay in the datastore - 
> not
> > rolled back? Or should it be removed. I am using the
> > <tx:jta-transaction-manager /> annotation in Spring config.
> >
> > Could someone shed some light over this because I don't understand 
> if I got
> > it working, or if I need to do something else to get it working? And 
> where
> > does the metadata of the file that I add get stored? I have 
> configured a own
> > database for the persistence manager but I don't see anything useful 
> in the
> > database tables? There are only a lot of what seems to be binary things
> > there? Is there a way to verify if a file is inserted or not in the 
> database
> > even though the actual file is stored on disk (datastore)?
> >
> > Thank you
> >
> > - Andreas
> >
> >
> >
> > --
> > View this message in context: click here.
> NAML 
> <http://jackrabbit.510166.n4.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>
>
> ------------------------------------------------------------------------
> View this message in context: SV: Jackrabbit JCA and JTA 
> <http://jackrabbit.510166.n4.nabble.com/SV-Jackrabbit-JCA-and-JTA-tp4659467.html>
> Sent from the Jackrabbit - Dev mailing list archive 
> <http://jackrabbit.510166.n4.nabble.com/Jackrabbit-Dev-f523400.html> 
> at Nabble.com.


--------------030009010601060005090208
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body text="#000000" bgcolor="#FFFFFF">
    <div class="moz-cite-prefix">Apparently my mail client decided to
      screw me over ;-) here is the complete msg.<br>
      <br>
      Hi, <br>
      <br>
      I've used a corner of the se-jcr (spring-extensions jcr) library
      v0.9 to get this going in our application (a horribly old/not
      maintained library).<br>
      <br>
      Our transactions are driven by the use of @Transactional to allow
      us to have tests running with transactions.<br>
      <br>
      I ended up not using the OSV pattern for JCR, it gave me more
      trouble than benefits. Instead I ended up using:<br>
      <br>
      SessionFactoryUtils.getSession() and
      SessionFactoryUtils.releaseSession() from the spring module, this
      ensures that the JCR session is registered with the spring
      transaction synchronization stuff and did not impact my
      pre-transactional code much.<br>
      <br>
      HTH.<br>
      -- <br>
      Chris<br>
      <br>
      On 05-09-2013 19:51, andreas wrote:<br>
    </div>
    <blockquote cite="mid:000501ceaa60$6aa120d0$3fe36270$@breakpoint.no"
      type="cite">
      <meta http-equiv="Content-Type" content="text/html;
        charset=ISO-8859-1">
      <meta name="Generator" content="Microsoft Word 15 (filtered
        medium)">
      <!--[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]-->
      <div class="WordSection1">
        <p class="MsoNormal"><span
style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D;mso-fareast-language:EN-US"
            lang="EN-US">Hello<o:p></o:p></span></p>
        <p class="MsoNormal"><span
style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D;mso-fareast-language:EN-US"
            lang="EN-US">It seems like the Jackrabbit session commits
            independently of the other code. I have no idea why. <o:p></o:p></span></p>
        <p class="MsoNormal"><span
style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D;mso-fareast-language:EN-US"
            lang="EN-US"><o:p>&nbsp;</o:p></span></p>
        <p class="MsoNormal"><b><span
style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Fra:</span></b><span
style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">
            Chris Poulsen [via Jackrabbit] [mailto:<a
              moz-do-not-send="true"
              href="/user/SendEmail.jtp?type=node&amp;node=4659467&amp;i=0"
              target="_top" rel="nofollow" link="external">[hidden
              email]</a>] <br>
            <b>Sendt:</b> 5. september 2013 09:49<br>
            <b>Til:</b> andreas<br>
            <b>Emne:</b> Re: Jackrabbit JCA and JTA<o:p></o:p></span></p>
        <p class="MsoNormal"><o:p>&nbsp;</o:p></p>
        <p class="MsoNormal">Hi, <br>
          <br>
          I don't know about file storing vs. transactions, but I would
          expect it <br>
          to work like any other transactional change to the repository.
          <br>
          <br>
          Getting the JTA setup correctly can be somewhat of a tricky
          task - Are <br>
          you sure that you are in a transaction in your method (and
          that you are <br>
          in the correct transaction)? <br>
          <br>
          Have you tried adding a simple node in the transaction method
          to see if <br>
          a simple node is rolled back? Also you can usually ask spring
          and the <br>
          JTA provider to produce really detailed logs to help you
          figure out what <br>
          is going on. <br>
          <br>
          HTH. <br>
          -- <br>
          Chris <br>
          <br>
          On 04-09-2013 18:09, andreas wrote: <o:p></o:p></p>
        <div>
          <div class="shrinkable-quote"><br>
            &gt; Hi <br>
            &gt; <br>
            &gt; I am developing an application that uses both
            Jackrabbit and a database. In <br>
            &gt; Jackrabbit I store the files that I upload, and the
            database I store all the <br>
            &gt; other data in the app. I am using Spring 3.2, Hibernate
            4.x and Jackrabbit <br>
            &gt; 2.6.2. I have downloaded the Jackrabbit JCA version and
            deployed it to JBoss <br>
            &gt; 7.1.1. I have configured it correctly I think. I can
            upload file to it and <br>
            &gt; it is saved. I also debugged my application and I saw
            that the session <br>
            &gt; object that invoke save() and logout() on is of type
            XaSession. I am using <br>
            &gt; the datastore. <br>
            &gt; <br>
            &gt; The way I tested my code is like this: I have one
            method in the service <br>
            &gt; layer of my app annotated with @Transactional. Inside
            the method I first add <br>
            &gt; a file to the content repository, then I force a
            RunTimeException to be <br>
            &gt; thrown (and the code that should run instead of the
            exception would be to <br>
            &gt; save my object to the database through Hibernate). I
            cleared the datastore <br>
            &gt; (no files inside it) but when the exception is thrown
            the file that I added <br>
            &gt; isn't removed from the datastore. <br>
            &gt; <br>
            &gt; So, is this correct? Does files in datastore stay in
            the datastore - not <br>
            &gt; rolled back? Or should it be removed. I am using the <br>
            &gt; &lt;tx:jta-transaction-manager /&gt; annotation in
            Spring config. <br>
            &gt; <br>
            &gt; Could someone shed some light over this because I don't
            understand if I got <br>
            &gt; it working, or if I need to do something else to get it
            working? And where <br>
            &gt; does the metadata of the file that I add get stored? I
            have configured a own <br>
            &gt; database for the persistence manager but I don't see
            anything useful in the <br>
            &gt; database tables? There are only a lot of what seems to
            be binary things <br>
            &gt; there? Is there a way to verify if a file is inserted
            or not in the database <br>
            &gt; even though the actual file is stored on disk
            (datastore)? <br>
            &gt; <br>
            &gt; Thank you <br>
            &gt; <br>
            &gt; - Andreas <br>
            &gt; <br>
            &gt; <br>
            &gt; <br>
            &gt; -- <br>
            &gt; View this message in context: <a
              moz-do-not-send="true" href="" target="_top"
              rel="nofollow" link="external">click here</a>.<br>
            <a moz-do-not-send="true"
href="http://jackrabbit.510166.n4.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml"
              target="_top" rel="nofollow" link="external"><span
                style="font-size:7.0pt;font-family:&quot;Times New
                Roman&quot;,&quot;serif&quot;">NAML</span></a> <o:p></o:p></div>
        </div>
        <br>
        <hr width="300" align="left">
        View this message in context: <a moz-do-not-send="true"
href="http://jackrabbit.510166.n4.nabble.com/SV-Jackrabbit-JCA-and-JTA-tp4659467.html">SV:
          Jackrabbit JCA and JTA</a><br>
        Sent from the <a moz-do-not-send="true"
href="http://jackrabbit.510166.n4.nabble.com/Jackrabbit-Dev-f523400.html">Jackrabbit
          - Dev mailing list archive</a> at Nabble.com.<br>
      </div>
    </blockquote>
    <br>
  </body>
</html>

--------------030009010601060005090208--

From dev-return-38394-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 08:47:18 2013
Return-Path: <dev-return-38394-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56AB3C650
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 08:47:18 +0000 (UTC)
Received: (qmail 24018 invoked by uid 500); 9 Sep 2013 08:47:17 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 23968 invoked by uid 500); 9 Sep 2013 08:47:09 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 23957 invoked by uid 99); 9 Sep 2013 08:47:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 08:47:07 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: error (athena.apache.org: local policy)
Received: from [64.18.1.233] (HELO exprod6og118.obsmtp.com) (64.18.1.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 08:47:00 +0000
Received: from outbound-smtp-1.corp.adobe.com ([192.150.11.134]) by exprod6ob118.postini.com ([64.18.5.12]) with SMTP
	ID DSNKUi2K2wHKdYeop0oxXxqlPDGBpNacz7z0@postini.com; Mon, 09 Sep 2013 01:46:39 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r898giiH013761
	for <dev@jackrabbit.apache.org>; Mon, 9 Sep 2013 01:42:44 -0700 (PDT)
Received: from nahub02.corp.adobe.com (nahub02.corp.adobe.com [10.8.189.98])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r898kJ6A007375
	for <dev@jackrabbit.apache.org>; Mon, 9 Sep 2013 01:46:19 -0700 (PDT)
Received: from SJ1GWM332.corp.adobe.com (10.5.79.97) by nahub02.corp.adobe.com
 (10.8.189.98) with Microsoft SMTP Server (TLS) id 8.3.327.1; Mon, 9 Sep 2013
 01:46:18 -0700
Received: from eurcas01.eur.adobe.com (10.128.4.27) by
 SJ1GWM332.corp.adobe.com (10.5.79.97) with Microsoft SMTP Server (TLS) id
 14.3.158.1; Mon, 9 Sep 2013 01:46:18 -0700
Received: from [10.132.1.9] (10.132.1.9) by eurcas01.eur.adobe.com
 (10.128.4.111) with Microsoft SMTP Server id 8.3.327.1; Mon, 9 Sep 2013
 09:46:16 +0100
Message-ID: <522D8ADF.6030108@apache.org>
Date: Mon, 9 Sep 2013 10:46:23 +0200
From: =?ISO-8859-1?Q?Michael_D=FCrig?= <mduerig@apache.org>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20130801 Thunderbird/17.0.8
MIME-Version: 1.0
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Subject: September Board Report
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I've assembled a preliminary board report for September:

https://wiki.apache.org/jackrabbit/Board%20Report%20September%202013

Let me know if there is anything missing or broken in the report. I plan 
to submit it tomorrow evening CET.


Michael

From dev-return-38395-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 09:09:55 2013
Return-Path: <dev-return-38395-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6CDD7C6EA
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 09:09:55 +0000 (UTC)
Received: (qmail 57648 invoked by uid 500); 9 Sep 2013 09:09:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 57392 invoked by uid 500); 9 Sep 2013 09:09:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 57368 invoked by uid 99); 9 Sep 2013 09:09:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 09:09:53 +0000
Date: Mon, 9 Sep 2013 09:09:53 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.100241.1378717793446@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Created] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Unico Hommes created JCR-3665:
---------------------------------

             Summary: Loading nodes in index and database consistency checkers might fail when the last node of a batch removed concurrently
                 Key: JCR-3665
                 URL: https://issues.apache.org/jira/browse/JCR-3665
             Project: Jackrabbit Content Repository
          Issue Type: Bug
            Reporter: Unico Hommes
            Assignee: Unico Hommes


In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load because the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38396-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 09:09:56 2013
Return-Path: <dev-return-38396-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9E8AC6EB
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 09:09:56 +0000 (UTC)
Received: (qmail 58147 invoked by uid 500); 9 Sep 2013 09:09:56 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 57523 invoked by uid 500); 9 Sep 2013 09:09:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 57373 invoked by uid 99); 9 Sep 2013 09:09:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 09:09:53 +0000
Date: Mon, 9 Sep 2013 09:09:53 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.100242.1378717793542@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Updated] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes updated JCR-3665:
------------------------------

    Summary: Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently  (was: Loading nodes in index and database consistency checkers might fail when the last node of a batch removed concurrently)
    
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load because the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38397-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 09:11:55 2013
Return-Path: <dev-return-38397-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D93DDC709
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 09:11:55 +0000 (UTC)
Received: (qmail 66462 invoked by uid 500); 9 Sep 2013 09:11:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 66193 invoked by uid 500); 9 Sep 2013 09:11:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 66162 invoked by uid 99); 9 Sep 2013 09:11:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 09:11:51 +0000
Date: Mon, 9 Sep 2013 09:11:51 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.100243.1378717911595@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Updated] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes updated JCR-3665:
------------------------------

    Description: In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.  (was: In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load because the last node of the previous batch was removed in the mean time.)
    
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38398-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 09:26:53 2013
Return-Path: <dev-return-38398-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3544BC765
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 09:26:53 +0000 (UTC)
Received: (qmail 87067 invoked by uid 500); 9 Sep 2013 09:26:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 86972 invoked by uid 500); 9 Sep 2013 09:26:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 86960 invoked by uid 99); 9 Sep 2013 09:26:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 09:26:52 +0000
Date: Mon, 9 Sep 2013 09:26:52 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.100267.1378718812260@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Updated] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes updated JCR-3665:
------------------------------

    Fix Version/s: 2.7.1
                   2.6.4
    
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4, 2.7.1
>
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38399-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 09:30:54 2013
Return-Path: <dev-return-38399-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6043FC775
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 09:30:54 +0000 (UTC)
Received: (qmail 91548 invoked by uid 500); 9 Sep 2013 09:30:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 91505 invoked by uid 500); 9 Sep 2013 09:30:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 91490 invoked by uid 99); 9 Sep 2013 09:30:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 09:30:52 +0000
Date: Mon, 9 Sep 2013 09:30:52 +0000 (UTC)
From: "Jan Haderka (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666413.1377902524199.100278.1378719052791@arcas>
In-Reply-To: <JIRA.12666413.1377902524199@arcas>
References: <JIRA.12666413.1377902524199@arcas>
Subject: [jira] [Commented] (JCR-3661) jcrvlt: String[]{""} not packaged
 correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3661?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13761724#comment-13761724 ] 

Jan Haderka commented on JCR-3661:
----------------------------------

[~tripod] Can you set the fix version on this issue? Is it going out only w/ 3.0?
                
> jcrvlt: String[]{""} not packaged correctly
> -------------------------------------------
>
>                 Key: JCR-3661
>                 URL: https://issues.apache.org/jira/browse/JCR-3661
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Tobias Bocanegra
>            Assignee: Tobias Bocanegra
>
> A MV property with 1 empty string value is serialized as "[]". When deserialized, this results in an empty MV property with 0 values.
> eg:
> <?xml version="1.0" encoding="UTF-8"?>
> <jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
>     jcr:primaryType="sling:Folder"
>     allowedChildren="[]"/>
> This is a flaw in the DocViewPropertyFormat. the simplest solution is to mark an empty string value with \0.
> eg:
>     allowedChildren="[\0]"

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38400-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 09:37:55 2013
Return-Path: <dev-return-38400-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0454DC79E
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 09:37:55 +0000 (UTC)
Received: (qmail 1957 invoked by uid 500); 9 Sep 2013 09:37:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 1910 invoked by uid 500); 9 Sep 2013 09:37:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 1857 invoked by uid 99); 9 Sep 2013 09:37:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 09:37:52 +0000
Date: Mon, 9 Sep 2013 09:37:52 +0000 (UTC)
From: "Jan Haderka (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664836.1377091351217.100290.1378719472053@arcas>
In-Reply-To: <JIRA.12664836.1377091351217@arcas>
References: <JIRA.12664836.1377091351217@arcas>
Subject: [jira] [Commented] (JCR-3652) Bundle serialization broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3652?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13761727#comment-13761727 ] 

Jan Haderka commented on JCR-3652:
----------------------------------

[~tmueller] Is this issue affecting only 2.4 and 2.7 branches but working fine on 2.6?

Thx.
                
> Bundle serialization broken
> ---------------------------
>
>                 Key: JCR-3652
>                 URL: https://issues.apache.org/jira/browse/JCR-3652
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-core
>            Reporter: Thomas Mueller
>            Assignee: Thomas Mueller
>            Priority: Minor
>             Fix For: 2.4.4, 2.7.1
>
>         Attachments: JCR-3652-b.patch, JCR-3652.patch, JCR-3652-test-case.patch
>
>
> I have got a strange case where some node bundle is broken, seemingly because a byte is missing. I can't explain the missing byte, but it is reproducible, meaning that writing the bundles again will break them again. There are 11 broken bundles, 10 of them have the size 480 bytes and one is slightly larger. It is always a boolean property value that is missing, always the value for the property jcr:isCheckedOut.
> As a (temporary) solution, and to help analyze what the problem might be, I will create a patch that does the following:
> * When serializing a bundle, check if the byte array can be de-serialized. If not, then try again. Starting with the 3th try, use a slower variant where before and after writing the boolean value the buffer is flushed. I'm aware that ByteArrayOutputStream.flush doesn't do much, but maybe it solves the problem (let's see) if the problem is related to a JVM issue.
> * If de-serializing a bundle fails, check if it's because of a missing boolean property value. If yes, insert the missing byte.
> I have also added some log messages (warning / error) to help analyze the problem.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38401-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 10:01:57 2013
Return-Path: <dev-return-38401-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DDF94C835
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 10:01:56 +0000 (UTC)
Received: (qmail 36806 invoked by uid 500); 9 Sep 2013 10:01:56 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 36599 invoked by uid 500); 9 Sep 2013 10:01:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 36584 invoked by uid 99); 9 Sep 2013 10:01:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 10:01:53 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mreutegg@adobe.com designates 64.18.1.185 as permitted sender)
Received: from [64.18.1.185] (HELO exprod6og103.obsmtp.com) (64.18.1.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 10:01:45 +0000
Received: from outbound-smtp-2.corp.adobe.com ([193.104.215.16]) by exprod6ob103.postini.com ([64.18.5.12]) with SMTP
	ID DSNKUi2cchkmrCXZUH8QPImoXTh1dYj0qXOM@postini.com; Mon, 09 Sep 2013 03:01:24 PDT
Received: from inner-relay-1.corp.adobe.com (inner-relay-1.corp.adobe.com [153.32.1.51])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r89A1L2r022274
	for <dev@jackrabbit.apache.org>; Mon, 9 Sep 2013 03:01:22 -0700 (PDT)
Received: from nahub02.corp.adobe.com (nahub02.corp.adobe.com [10.8.189.98])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r89A1K6A018537
	for <dev@jackrabbit.apache.org>; Mon, 9 Sep 2013 03:01:20 -0700 (PDT)
Received: from eurhub01.eur.adobe.com (10.128.4.30) by nahub02.corp.adobe.com
 (10.8.189.98) with Microsoft SMTP Server (TLS) id 8.3.327.1; Mon, 9 Sep 2013
 03:01:20 -0700
Received: from eurmbx01.eur.adobe.com ([10.128.4.32]) by
 eurhub01.eur.adobe.com ([10.128.4.30]) with mapi; Mon, 9 Sep 2013 11:01:19
 +0100
From: Marcel Reutegger <mreutegg@adobe.com>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Date: Mon, 9 Sep 2013 11:01:18 +0100
Subject: RE: September Board Report
Thread-Topic: September Board Report
Thread-Index: Ac6tOTYiQ53YVP04Q/WnrA6gxyMRcQACjKSA
Message-ID: <9C0FC4C8E9C29945B01766FC7F9D389818A74D9BC3@eurmbx01.eur.adobe.com>
References: <522D8ADF.6030108@apache.org>
In-Reply-To: <522D8ADF.6030108@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

just one minor correction: the 2.6.3 release was done from the
2.6 branch and not from trunk.

regards
 marcel

> -----Original Message-----
> From: Michael D=FCrig [mailto:mduerig@apache.org]
> Sent: Montag, 9. September 2013 10:46
> To: dev@jackrabbit.apache.org
> Subject: September Board Report
>=20
>=20
> Hi,
>=20
> I've assembled a preliminary board report for September:
>=20
> https://wiki.apache.org/jackrabbit/Board%20Report%20September%202013
>=20
> Let me know if there is anything missing or broken in the report. I plan
> to submit it tomorrow evening CET.
>=20
>=20
> Michael

From dev-return-38402-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 10:32:14 2013
Return-Path: <dev-return-38402-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DEDF8C93D
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 10:32:14 +0000 (UTC)
Received: (qmail 69642 invoked by uid 500); 9 Sep 2013 10:32:14 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 69538 invoked by uid 500); 9 Sep 2013 10:32:14 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 69531 invoked by uid 99); 9 Sep 2013 10:32:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 10:32:13 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: error (nike.apache.org: local policy)
Received: from [64.18.1.27] (HELO exprod6og111.obsmtp.com) (64.18.1.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 10:32:05 +0000
Received: from outbound-smtp-2.corp.adobe.com ([193.104.215.16]) by exprod6ob111.postini.com ([64.18.5.12]) with SMTP
	ID DSNKUi2je54Z6E4tw7/LcBnmYdqFx9/v0DKs@postini.com; Mon, 09 Sep 2013 03:31:44 PDT
Received: from inner-relay-2.corp.adobe.com (mail-321.pac.adobe.com [153.32.1.52])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r89AVM2r024835
	for <dev@jackrabbit.apache.org>; Mon, 9 Sep 2013 03:31:22 -0700 (PDT)
Received: from nahub01.corp.adobe.com (nahub01.corp.adobe.com [10.8.189.97])
	by inner-relay-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r89AVLw7001606
	for <dev@jackrabbit.apache.org>; Mon, 9 Sep 2013 03:31:21 -0700 (PDT)
Received: from eurcas01.eur.adobe.com (10.128.4.27) by nahub01.corp.adobe.com
 (10.8.189.97) with Microsoft SMTP Server (TLS) id 8.3.327.1; Mon, 9 Sep 2013
 03:31:21 -0700
Received: from [10.132.1.9] (10.132.1.9) by eurcas01.eur.adobe.com
 (10.128.4.111) with Microsoft SMTP Server id 8.3.327.1; Mon, 9 Sep 2013
 11:31:19 +0100
Message-ID: <522DA37F.4040903@apache.org>
Date: Mon, 9 Sep 2013 12:31:27 +0200
From: =?ISO-8859-1?Q?Michael_D=FCrig?= <mduerig@apache.org>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20130801 Thunderbird/17.0.8
MIME-Version: 1.0
To: <dev@jackrabbit.apache.org>
Subject: Re: September Board Report
References: <522D8ADF.6030108@apache.org> <9C0FC4C8E9C29945B01766FC7F9D389818A74D9BC3@eurmbx01.eur.adobe.com>
In-Reply-To: <9C0FC4C8E9C29945B01766FC7F9D389818A74D9BC3@eurmbx01.eur.adobe.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



On 9.9.13 12:01 , Marcel Reutegger wrote:
> just one minor correction: the 2.6.3 release was done from the
> 2.6 branch and not from trunk.

Thanks for spotting, fixed.

Michael

From dev-return-38403-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 13:27:54 2013
Return-Path: <dev-return-38403-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5F02CE76
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 13:27:54 +0000 (UTC)
Received: (qmail 40651 invoked by uid 500); 9 Sep 2013 13:27:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 40614 invoked by uid 500); 9 Sep 2013 13:27:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 40580 invoked by uid 99); 9 Sep 2013 13:27:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 13:27:51 +0000
Date: Mon, 9 Sep 2013 13:27:51 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.100784.1378733271737@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Shashank Gupta updated JCR-3651:
--------------------------------

    Attachment: JCR-3651-svn.patch

[~tmueller] thanks for the feedback. have incorporated all comments. 
                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38404-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 13:27:55 2013
Return-Path: <dev-return-38404-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F56BCE77
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 13:27:55 +0000 (UTC)
Received: (qmail 40939 invoked by uid 500); 9 Sep 2013 13:27:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 40657 invoked by uid 500); 9 Sep 2013 13:27:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 40596 invoked by uid 99); 9 Sep 2013 13:27:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 13:27:52 +0000
Date: Mon, 9 Sep 2013 13:27:52 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.100787.1378733272266@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Shashank Gupta updated JCR-3651:
--------------------------------

    Attachment: JCR-3651-svn-updated.patch
    
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38405-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 13:27:55 2013
Return-Path: <dev-return-38405-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D0B9CE78
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 13:27:55 +0000 (UTC)
Received: (qmail 41072 invoked by uid 500); 9 Sep 2013 13:27:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 40707 invoked by uid 500); 9 Sep 2013 13:27:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 40584 invoked by uid 99); 9 Sep 2013 13:27:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 13:27:51 +0000
Date: Mon, 9 Sep 2013 13:27:51 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.100785.1378733271815@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Shashank Gupta updated JCR-3651:
--------------------------------

    Attachment:     (was: JCR-3651-svn.patch)
    
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38406-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 13:43:55 2013
Return-Path: <dev-return-38406-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A13ECEFA
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 13:43:55 +0000 (UTC)
Received: (qmail 68717 invoked by uid 500); 9 Sep 2013 13:43:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 68337 invoked by uid 500); 9 Sep 2013 13:43:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 67836 invoked by uid 99); 9 Sep 2013 13:43:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 13:43:52 +0000
Date: Mon, 9 Sep 2013 13:43:52 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.100849.1378734232438@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Shashank Gupta updated JCR-3651:
--------------------------------

    Attachment: JCR-3651-svn-updated.patch
    
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38407-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 13:43:55 2013
Return-Path: <dev-return-38407-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70008CEFF
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 13:43:55 +0000 (UTC)
Received: (qmail 68769 invoked by uid 500); 9 Sep 2013 13:43:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 68683 invoked by uid 500); 9 Sep 2013 13:43:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 67919 invoked by uid 99); 9 Sep 2013 13:43:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 13:43:52 +0000
Date: Mon, 9 Sep 2013 13:43:52 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.100851.1378734232783@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Shashank Gupta updated JCR-3651:
--------------------------------

    Attachment:     (was: JCR-3651-svn-updated.patch)
    
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>             Fix For: 2.7.1
>
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38408-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep  9 18:27:59 2013
Return-Path: <dev-return-38408-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2395A10921
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon,  9 Sep 2013 18:27:59 +0000 (UTC)
Received: (qmail 91371 invoked by uid 500); 9 Sep 2013 18:27:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 90578 invoked by uid 500); 9 Sep 2013 18:27:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 90513 invoked by uid 99); 9 Sep 2013 18:27:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Sep 2013 18:27:52 +0000
Date: Mon, 9 Sep 2013 18:27:52 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12666413.1377902524199.102322.1378751272509@arcas>
In-Reply-To: <JIRA.12666413.1377902524199@arcas>
References: <JIRA.12666413.1377902524199@arcas>
Subject: [jira] [Commented] (JCR-3661) jcrvlt: String[]{""} not packaged
 correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3661?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13762126#comment-13762126 ] 

Tobias Bocanegra commented on JCR-3661:
---------------------------------------

currently the versions are the one from jackrabbit. we have to wait until
infra created the new jira project for vlt. then we can move the issues and
use the correct versions.



                
> jcrvlt: String[]{""} not packaged correctly
> -------------------------------------------
>
>                 Key: JCR-3661
>                 URL: https://issues.apache.org/jira/browse/JCR-3661
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Tobias Bocanegra
>            Assignee: Tobias Bocanegra
>
> A MV property with 1 empty string value is serialized as "[]". When deserialized, this results in an empty MV property with 0 values.
> eg:
> <?xml version="1.0" encoding="UTF-8"?>
> <jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
>     jcr:primaryType="sling:Folder"
>     allowedChildren="[]"/>
> This is a flaw in the DocViewPropertyFormat. the simplest solution is to mark an empty string value with \0.
> eg:
>     allowedChildren="[\0]"

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38409-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 10 14:32:27 2013
Return-Path: <dev-return-38409-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2BA9AC2DD
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 10 Sep 2013 14:32:27 +0000 (UTC)
Received: (qmail 32309 invoked by uid 500); 10 Sep 2013 14:32:27 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 31988 invoked by uid 500); 10 Sep 2013 14:32:21 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 31968 invoked by uid 99); 10 Sep 2013 14:32:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Sep 2013 14:32:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alex.parvulescu@gmail.com designates 209.85.215.49 as permitted sender)
Received: from [209.85.215.49] (HELO mail-la0-f49.google.com) (209.85.215.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Sep 2013 14:32:13 +0000
Received: by mail-la0-f49.google.com with SMTP id ev20so6142933lab.22
        for <dev@jackrabbit.apache.org>; Tue, 10 Sep 2013 07:31:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=DOyykFcSRXdgvMOS7hKxiYD5z+2bjTjrWj8OheBqRDQ=;
        b=o7S01zLyAnmRsgkSkLnlcITLniQRndn+nWZgjtigGgRRcBjgFTypKMXXtcAuPnXDym
         eJRtt9zR3D/mBn9yhsOcT+gpe0b0M5ogZZHKp2C1Tugn4cRNRhtLAy27RLoscRkeydpA
         mzITwsQMO7dHTCgb6kSs4rNrZxPBHxl2af8xonVpSiINRmysX4A46iVATUKdPYg53vPn
         OrnbpU7wX03oEE55qMiugpAr1QRsW98Pr7TEy7KebB6mzPyMODBLrQfVnBTYqZY8WPqv
         DpagTb0JYl0j49sHgSdOSQN1LsCOdmNj+PROwYT/IxgdkiLkLNjkyxL3WXhvIVF7PeGh
         LWsA==
MIME-Version: 1.0
X-Received: by 10.112.42.68 with SMTP id m4mr21434261lbl.4.1378823507374; Tue,
 10 Sep 2013 07:31:47 -0700 (PDT)
Received: by 10.114.181.167 with HTTP; Tue, 10 Sep 2013 07:31:47 -0700 (PDT)
Date: Tue, 10 Sep 2013 16:31:47 +0200
Message-ID: <CAB-0WTB=juO_vTRf=XtX+ewG+5hm06b-cNw=Z1jS+mOQq6Gh4Q@mail.gmail.com>
Subject: Jackrabbit 2.7.1 release plan
From: Alex Parvulescu <alex.parvulescu@gmail.com>
To: Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: multipart/alternative; boundary=001a113368765d776804e6085d06
X-Virus-Checked: Checked by ClamAV on apache.org

--001a113368765d776804e6085d06
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Jackrabbit 2.7.0 came out in May, I think it's a good time to schedule a
new 2.7.x release later this week.
This version will also be used for the upcoming Oak 0.9 release.

The plan to have a unified release cycle for jackrabbit and oak is still in
effect, this is just one more release along the way.

best,
alex

--001a113368765d776804e6085d06
Content-Type: text/html; charset=ISO-8859-1

<div dir="ltr">Hi,<div><br></div><div>Jackrabbit 2.7.0 came out in May, I think it&#39;s a good time to schedule a new 2.7.x release later this week.</div><div>This version will also be used for the upcoming Oak 0.9 release.<br>
</div><div><br></div><div>The plan to have a unified release cycle for jackrabbit and oak is still in effect, this is just one more release along the way.</div><div><br></div><div>best,</div><div>alex</div></div>

--001a113368765d776804e6085d06--

From dev-return-38410-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 10 14:38:56 2013
Return-Path: <dev-return-38410-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06984C328
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 10 Sep 2013 14:38:56 +0000 (UTC)
Received: (qmail 55405 invoked by uid 500); 10 Sep 2013 14:38:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 55194 invoked by uid 500); 10 Sep 2013 14:38:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 55054 invoked by uid 99); 10 Sep 2013 14:38:55 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Sep 2013 14:38:55 +0000
Date: Tue, 10 Sep 2013 14:38:54 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12602426.1344503337879.108069.1378823934966@arcas>
In-Reply-To: <JIRA.12602426.1344503337879@arcas>
References: <JIRA.12602426.1344503337879@arcas>
Subject: [jira] [Resolved] (JCR-3408) Query tests should avoid casting to
 QueryManagerImpl
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3408?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu resolved JCR-3408.
----------------------------------

       Resolution: Fixed
    Fix Version/s: 2.7.1
    
> Query tests should avoid casting to QueryManagerImpl
> ----------------------------------------------------
>
>                 Key: JCR-3408
>                 URL: https://issues.apache.org/jira/browse/JCR-3408
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>            Reporter: Alex Parvulescu
>            Assignee: Alex Parvulescu
>             Fix For: 2.7.1
>
>
> A lot of query tests flush the search index before to ensure consistency.
> Getting the SearchIndex instance happens via casting the QueryManager to the jackrabbit QueryManagerImpl: 
>   ((QueryManagerImpl) qm)
> I'd like to change this direct casting into a instanceof verification. 
> This doesn't fix everything but at least it will allow other projects (like oak) to run most of the query tests, without running into ClassCastException(s).

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38412-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 08:09:00 2013
Return-Path: <dev-return-38412-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8899F107C7
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 08:09:00 +0000 (UTC)
Received: (qmail 20091 invoked by uid 500); 11 Sep 2013 08:08:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 19708 invoked by uid 500); 11 Sep 2013 08:08:59 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 19648 invoked by uid 99); 11 Sep 2013 08:08:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 08:08:51 +0000
Date: Wed, 11 Sep 2013 08:08:51 +0000 (UTC)
From: "Marcel Reutegger (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12331924.1144782786000.114849.1378886931806@arcas>
In-Reply-To: <JIRA.12331924.1144782786000@arcas>
References: <JIRA.12331924.1144782786000@arcas>
Subject: [jira] [Updated] (JCR-392) Querying element by number does not work
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-392?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Marcel Reutegger updated JCR-392:
---------------------------------

    Assignee:     (was: Marcel Reutegger)
    
> Querying element by number does not work
> ----------------------------------------
>
>                 Key: JCR-392
>                 URL: https://issues.apache.org/jira/browse/JCR-392
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core, query
>    Affects Versions: 0.9, 1.0, 1.0.1
>         Environment: svn version 393179M
>            Reporter: Oliver Wehrens
>
> I have a bunch of wiki:entries stored in my workspace. If I create the following code:
>             q = qm.createQuery("//wiki:entry[5]", Query.XPATH);
>             qr = q.execute();
>             NodeIterator it = qr.getNodes();
> The Nodeiterator reports all entries back, bot just the 5th.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38411-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 08:09:00 2013
Return-Path: <dev-return-38411-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89897107C8
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 08:09:00 +0000 (UTC)
Received: (qmail 20090 invoked by uid 500); 11 Sep 2013 08:08:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 19679 invoked by uid 500); 11 Sep 2013 08:08:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 19650 invoked by uid 99); 11 Sep 2013 08:08:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 08:08:51 +0000
Date: Wed, 11 Sep 2013 08:08:51 +0000 (UTC)
From: "Marcel Reutegger (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12314059.1125526071000.114850.1378886931954@arcas>
In-Reply-To: <JIRA.12314059.1125526071000@arcas>
References: <JIRA.12314059.1125526071000@arcas>
Subject: [jira] [Assigned] (JCR-204) Improve recoverability
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-204?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Marcel Reutegger reassigned JCR-204:
------------------------------------

    Assignee:     (was: Marcel Reutegger)
    
> Improve recoverability
> ----------------------
>
>                 Key: JCR-204
>                 URL: https://issues.apache.org/jira/browse/JCR-204
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: indexing, jackrabbit-core, observation, transactions
>         Environment: svn revision: 265028
>            Reporter: Marcel Reutegger
>            Priority: Minor
>
> Transactions in Jackrabbit are committed in SharedItemStateManager.store(). While the call to PersistenceManager.store() is by its definition atomic, updates on the index through synchronous notification by the ObservationManager are not. Consequently, it may happen that the index is not up-to-date with the workspace data in case of a crash.
> Consider the following cases:
> 1)
> - changes in a ChangeLog are successfully stored by the persistence manager
> - the observation manager notifies the query handler about the change
> - the query handler starts to update the index
> - system crashes
> -> the index is missing some changes
> 2)
> - changes in a ChangeLog are successfully stored by the persistence manager
> - system crashes
> -> the index is missing all changes
> To prevent situations like 1) the index must be fully transactional implementing ACID properties.
> In case an index update cannot be completed, the index will appear as if the update never happened. Which results in a situation described in example 2)
> To prevent situations like 2) the observation manager musts keep track of transactions and make sure that committed transactions (the ones that successfully stored the changes in the persistence manager) successfully notify all listeners. If the system should crash while listeners are notified the events must be re-delivered on restart.
> comments and suggestions on alternatives are welcome!

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38415-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:48:00 2013
Return-Path: <dev-return-38415-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4667810BD5
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:48:00 +0000 (UTC)
Received: (qmail 36777 invoked by uid 500); 11 Sep 2013 10:47:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 36422 invoked by uid 500); 11 Sep 2013 10:47:58 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 36291 invoked by uid 99); 11 Sep 2013 10:47:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:47:52 +0000
Date: Wed, 11 Sep 2013 10:47:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12659579.1374675591989.115426.1378896472262@arcas>
In-Reply-To: <JIRA.12659579.1374675591989@arcas>
References: <JIRA.12659579.1374675591989@arcas>
Subject: [jira] [Updated] (JCR-3628) Embed cause in
 org.apache.jackrabbit.core.SessionImpl#getNodeByIdentifier while rethrowing
 IllegalArgumentException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3628?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3628:
---------------------------------

    Fix Version/s: 2.7.1
    
> Embed cause in org.apache.jackrabbit.core.SessionImpl#getNodeByIdentifier while rethrowing IllegalArgumentException
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3628
>                 URL: https://issues.apache.org/jira/browse/JCR-3628
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.5.3
>            Reporter: Abhinav Atul
>            Assignee: Chetan Mehrotra
>            Priority: Minor
>             Fix For: 2.7.1
>
>
> This is needed for reasonable exception handling. The below is the changelist(org.apache.jackrabbit.core.SessionImpl#getNodeByIdentifier ):
>          } catch (IllegalArgumentException iae) {
> -            throw new RepositoryException("invalid identifier: " + id);
> +            throw new RepositoryException("invalid identifier: " + id,iae);
>          }

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38413-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:48:00 2013
Return-Path: <dev-return-38413-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 48BE010BD7
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:48:00 +0000 (UTC)
Received: (qmail 36722 invoked by uid 500); 11 Sep 2013 10:47:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 36381 invoked by uid 500); 11 Sep 2013 10:47:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 36299 invoked by uid 99); 11 Sep 2013 10:47:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:47:52 +0000
Date: Wed, 11 Sep 2013 10:47:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12662306.1375860879961.115428.1378896472414@arcas>
In-Reply-To: <JIRA.12662306.1375860879961@arcas>
References: <JIRA.12662306.1375860879961@arcas>
Subject: [jira] [Updated] (JCR-3637) JackrabbitAccessControlEntry: Add
 support for multi-valued restrictions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3637?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3637:
---------------------------------

    Fix Version/s: 2.7.1
    
> JackrabbitAccessControlEntry: Add support for multi-valued restrictions
> -----------------------------------------------------------------------
>
>                 Key: JCR-3637
>                 URL: https://issues.apache.org/jira/browse/JCR-3637
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-api
>            Reporter: angela
>            Assignee: angela
>             Fix For: 2.7.1
>
>         Attachments: JCR-3637-oak.patch, JCR-3637.patch
>
>
> Currently JackrabbitAccessControlEntry can only deal with single-valued restrictions. However, it would desirable to also allow for restrictions that contain multiple values.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38414-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:48:00 2013
Return-Path: <dev-return-38414-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49D6110BD8
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:48:00 +0000 (UTC)
Received: (qmail 36723 invoked by uid 500); 11 Sep 2013 10:47:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 36383 invoked by uid 500); 11 Sep 2013 10:47:58 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 36277 invoked by uid 99); 11 Sep 2013 10:47:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:47:51 +0000
Date: Wed, 11 Sep 2013 10:47:51 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12655332.1372426480180.115422.1378896471872@arcas>
In-Reply-To: <JIRA.12655332.1372426480180@arcas>
References: <JIRA.12655332.1372426480180@arcas>
Subject: [jira] [Updated] (JCR-3616) unit tests should use valid namespace
 names
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3616?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3616:
---------------------------------

    Fix Version/s: 2.7.1
    
> unit tests should use valid namespace names
> -------------------------------------------
>
>                 Key: JCR-3616
>                 URL: https://issues.apache.org/jira/browse/JCR-3616
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Julian Reschke
>            Priority: Minor
>             Fix For: 2.7.1
>
>
> The test configuration for jackrabbit-core uses namespace names that are not valid URIs, thus will not work as qualified names in isNodeType(String).

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38416-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:48:01 2013
Return-Path: <dev-return-38416-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47A2510BD6
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:48:00 +0000 (UTC)
Received: (qmail 36918 invoked by uid 500); 11 Sep 2013 10:47:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 36556 invoked by uid 500); 11 Sep 2013 10:47:58 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 36315 invoked by uid 99); 11 Sep 2013 10:47:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:47:52 +0000
Date: Wed, 11 Sep 2013 10:47:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12659795.1374756750503.115430.1378896472615@arcas>
In-Reply-To: <JIRA.12659795.1374756750503@arcas>
References: <JIRA.12659795.1374756750503@arcas>
Subject: [jira] [Updated] (JCR-3631) SessionTest#hasCapability: missing save
 call
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3631?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3631:
---------------------------------

    Fix Version/s: 2.7.1
    
> SessionTest#hasCapability: missing save call
> --------------------------------------------
>
>                 Key: JCR-3631
>                 URL: https://issues.apache.org/jira/browse/JCR-3631
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-tests
>            Reporter: angela
>            Assignee: angela
>             Fix For: 2.7.1
>
>
> the test for Session#hasCapability expects that an exception is raised immediately when adding a node in case Session#hasCapability returns false. however, the specification allows to postpone certain validations until the save call (e.g. permission evaluation).
> the test case should be fixed accordingly.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38417-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:49:52 2013
Return-Path: <dev-return-38417-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8040810BE0
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:49:52 +0000 (UTC)
Received: (qmail 38952 invoked by uid 500); 11 Sep 2013 10:49:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 38899 invoked by uid 500); 11 Sep 2013 10:49:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 38884 invoked by uid 99); 11 Sep 2013 10:49:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:49:51 +0000
Date: Wed, 11 Sep 2013 10:49:51 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12659587.1374677147134.115433.1378896591822@arcas>
In-Reply-To: <JIRA.12659587.1374677147134@arcas>
References: <JIRA.12659587.1374677147134@arcas>
Subject: [jira] [Updated] (JCR-3629) [jcr2spi]RepositoryException lost in
 org.apache.jackrabbit.jcr2spi.ItemManagerImpl while querying on remote
 nodes exposed by jackrabbit-spi
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3629?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3629:
---------------------------------

    Fix Version/s: 2.7.1
    
> [jcr2spi]RepositoryException lost in org.apache.jackrabbit.jcr2spi.ItemManagerImpl while querying on remote nodes exposed by jackrabbit-spi
> -------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3629
>                 URL: https://issues.apache.org/jira/browse/JCR-3629
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr2spi
>    Affects Versions: 2.5.3
>            Reporter: Abhinav Atul
>            Assignee: Chetan Mehrotra
>             Fix For: 2.7.1
>
>         Attachments: JCR-3629.patch
>
>
> RepositoryException lost in ItemManagerImpl#nodeExists, ItemManagerImpl#itemExists(HierarchyEntry), ItemManagerImpl#propertyExists, ItemManagerImpl#itemExists(ItemState)
>     /**
>      * @see ItemManager#nodeExists(Path)
>      */
>     public boolean nodeExists(Path path) {
>         try {
>             // session-sanity & permissions are checked upon
> itemExists(ItemState)
>             NodeState nodeState = hierMgr.getNodeState(path);
>             return itemExists(nodeState);
>         } catch (PathNotFoundException pnfe) {
>             return false;
>         } catch (ItemNotFoundException infe) {
>             return false;
>         } catch (RepositoryException re) {
>             return false;
>         }
>     }
> The catch block for RepositoryException should probably wrap the exception as a RuntimeException as it might happen for unknown reason.
> Changing this might break backward compatibility. 
> The issue was detected when trying to implement a synchronization service with a content repository exposed by a jackrabbit-spi implementation. If the content repository becomes non-responsive while checking whether a node exists or not, the RepositoryException is lost in ItemManager#nodeExists resulting in deletion of the local node corresponding to the remote node.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38418-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:49:53 2013
Return-Path: <dev-return-38418-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DDFA010BE2
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:49:52 +0000 (UTC)
Received: (qmail 39207 invoked by uid 500); 11 Sep 2013 10:49:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 38912 invoked by uid 500); 11 Sep 2013 10:49:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 38902 invoked by uid 99); 11 Sep 2013 10:49:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:49:52 +0000
Date: Wed, 11 Sep 2013 10:49:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.115436.1378896592079@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Updated] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3651:
---------------------------------

    Fix Version/s:     (was: 2.7.1)
    
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38419-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 10:51:53 2013
Return-Path: <dev-return-38419-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8563C10BE4
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 10:51:53 +0000 (UTC)
Received: (qmail 40214 invoked by uid 500); 11 Sep 2013 10:51:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 40156 invoked by uid 500); 11 Sep 2013 10:51:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 40135 invoked by uid 99); 11 Sep 2013 10:51:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 10:51:51 +0000
Date: Wed, 11 Sep 2013 10:51:51 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.115439.1378896711753@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Updated] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3665:
---------------------------------

    Fix Version/s:     (was: 2.7.1)
    
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4
>
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38420-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 11:30:55 2013
Return-Path: <dev-return-38420-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A18810CF2
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 11:30:55 +0000 (UTC)
Received: (qmail 2990 invoked by uid 500); 11 Sep 2013 11:30:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 2500 invoked by uid 500); 11 Sep 2013 11:30:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 2464 invoked by uid 99); 11 Sep 2013 11:30:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 11:30:52 +0000
Date: Wed, 11 Sep 2013 11:30:51 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.115562.1378899051671@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Resolved] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes resolved JCR-3665.
-------------------------------

       Resolution: Fixed
    Fix Version/s: 2.7.1

Fixed in both trunk and 2.6 branch.
                
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4, 2.7.1
>
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38421-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 11:36:53 2013
Return-Path: <dev-return-38421-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 68F0810D18
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 11:36:53 +0000 (UTC)
Received: (qmail 14645 invoked by uid 500); 11 Sep 2013 11:36:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 14460 invoked by uid 500); 11 Sep 2013 11:36:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 14406 invoked by uid 99); 11 Sep 2013 11:36:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 11:36:52 +0000
Date: Wed, 11 Sep 2013 11:36:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.115576.1378899412204@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Updated] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3665:
---------------------------------

    Fix Version/s:     (was: 2.7.1)
                   2.7.2
    
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4, 2.7.2
>
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38422-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 11:42:53 2013
Return-Path: <dev-return-38422-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8CB410D62
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 11:42:53 +0000 (UTC)
Received: (qmail 42703 invoked by uid 500); 11 Sep 2013 11:42:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 42640 invoked by uid 500); 11 Sep 2013 11:42:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 42218 invoked by uid 99); 11 Sep 2013 11:42:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 11:42:52 +0000
Date: Wed, 11 Sep 2013 11:42:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667537.1378717765295.115589.1378899772040@arcas>
In-Reply-To: <JIRA.12667537.1378717765295@arcas>
References: <JIRA.12667537.1378717765295@arcas>
Subject: [jira] [Updated] (JCR-3665) Loading nodes in index and database
 consistency checkers might fail when the last node of a batch was removed
 concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3665?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3665:
---------------------------------

    Fix Version/s:     (was: 2.7.2)
                   2.7.1

sorry about the noise, I checked the commit history and it looks like this issue is included after all :)
                
> Loading nodes in index and database consistency checkers might fail when the last node of a batch was removed concurrently
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-3665
>                 URL: https://issues.apache.org/jira/browse/JCR-3665
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4, 2.7.1
>
>
> In both the index and database consistency checkers, when nodes are loaded in batches from the database, the next batch may unexpectedly fail to load when the last node of the previous batch was removed in the mean time.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38423-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 12:05:41 2013
Return-Path: <dev-return-38423-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FA3510E0D
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 12:05:41 +0000 (UTC)
Received: (qmail 75808 invoked by uid 500); 11 Sep 2013 12:05:40 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 75765 invoked by uid 500); 11 Sep 2013 12:05:40 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 75570 invoked by uid 99); 11 Sep 2013 12:05:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 12:05:39 +0000
X-ASF-Spam-Status: No, hits=-2000.0 required=5.0
	tests=ALL_TRUSTED
X-Spam-Check-By: apache.org
Received: from [140.211.11.8] (HELO aegis.apache.org) (140.211.11.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 12:05:37 +0000
Received: from aegis.apache.org (localhost [127.0.0.1])
	by aegis.apache.org (Postfix) with ESMTP id B5F2CC042C;
	Wed, 11 Sep 2013 12:05:15 +0000 (UTC)
Date: Wed, 11 Sep 2013 12:05:09 +0000 (UTC)
From: Apache Jenkins Server <jenkins@builds.apache.org>
To: dev@jackrabbit.apache.org, alex.parvulescu@gmail.com
Message-ID: <2122790370.1332.1378901114909.JavaMail.hudson@aegis>
Subject: Jackrabbit-trunk - Build # 2187 - Failure
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_1331_2077737094.1378901110279"
X-Jenkins-Job: Jackrabbit-trunk
X-Jenkins-Result: FAILURE
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1331_2077737094.1378901110279
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

The Apache Jenkins build system has built Jackrabbit-trunk (build #2187)

Status: Failure

Check console output at https://builds.apache.org/job/Jackrabbit-trunk/2187/ to view the results.
------=_Part_1331_2077737094.1378901110279--

From dev-return-38424-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 12:17:15 2013
Return-Path: <dev-return-38424-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E49AD10E59
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 12:17:15 +0000 (UTC)
Received: (qmail 84302 invoked by uid 500); 11 Sep 2013 12:17:15 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 84255 invoked by uid 500); 11 Sep 2013 12:17:15 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 84248 invoked by uid 99); 11 Sep 2013 12:17:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 12:17:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alex.parvulescu@gmail.com designates 209.85.220.182 as permitted sender)
Received: from [209.85.220.182] (HELO mail-vc0-f182.google.com) (209.85.220.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 12:17:10 +0000
Received: by mail-vc0-f182.google.com with SMTP id hf12so6131531vcb.13
        for <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 05:16:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:date:message-id:subject:from:to:content-type;
        bh=FJnYwMXq23Vk4CSt8PhTzuYtUZvhUZiLxVjVfa1Xw5A=;
        b=ybUltVNxUUAoLr7KIcvhPMfU9pEAIO1sV0nnAors8BsyMA70CMlnMiAn3BHyOL/jQf
         p4yCY9eiunu5CDU4t9AXGC8SocwPgBLnwsEKqruB6fnoBU/zatBFQdwjainYoeh65/Me
         IC8fsNOXeqqu+TVwjP/x3CSm1md6I/VJ5hv5TSEijUwr8Fq0mDssm/nUSAW43Vk/JDEr
         AA9AJvJl6w9mFW6G1CSjf/pqpiOH881EcPamMHHuP5F7D0YTYlzPSRELe5tqIDcxU7vJ
         YQDWinYftlIisY/9z4cpPcWjaLbEzYBUjPnNXMDMMBwpkSuTryDqbsE5LfKxefJwvbJ/
         PiqA==
MIME-Version: 1.0
X-Received: by 10.220.169.203 with SMTP id a11mr528271vcz.26.1378901809089;
 Wed, 11 Sep 2013 05:16:49 -0700 (PDT)
Sender: alex.parvulescu@gmail.com
Received: by 10.220.122.135 with HTTP; Wed, 11 Sep 2013 05:16:49 -0700 (PDT)
Date: Wed, 11 Sep 2013 14:16:49 +0200
X-Google-Sender-Auth: lob06c53grHtujp8-uHnNmqeiUA
Message-ID: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
Subject: [VOTE] Release Apache Jackrabbit 2.7.1
From: Alex Parvulescu <alexparvulescu@apache.org>
To: Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: multipart/alternative; boundary=047d7b6721c482d45604e61a9881
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b6721c482d45604e61a9881
Content-Type: text/plain; charset=ISO-8859-1

A candidate for the Jackrabbit 2.7.1 release is available at:

    https://dist.apache.org/repos/dist/dev/jackrabbit/2.7.1/

The release candidate is a zip archive of the sources in:

    https://svn.apache.org/repos/asf/jackrabbit/tags/2.7.1/

The SHA1 checksum of the archive is
78743243d8d3514d37b334a73a398c0fce8945ac.

A staged Maven repository is available for review at:


https://repository.apache.org/content/repositories/orgapachejackrabbit-027/

The command for running automated checks against this release candidate is:

    $ sh check-release.sh 2.7.1 78743243d8d3514d37b334a73a398c0fce8945ac

Please vote on releasing this package as Apache Jackrabbit 2.7.1.
The vote is open for the next 72 hours and passes if a majority of at
least three +1 Jackrabbit PMC votes are cast.

    [ ] +1 Release this package as Apache Jackrabbit 2.7.1
    [ ] -1 Do not release this package because...


My vote is +1.

best,
alex

--047d7b6721c482d45604e61a9881
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div>A candidate for the Jackrabbit 2.7.1 release is avail=
able at:</div><div><br></div><div>=A0 =A0 <a href=3D"https://dist.apache.or=
g/repos/dist/dev/jackrabbit/2.7.1/">https://dist.apache.org/repos/dist/dev/=
jackrabbit/2.7.1/</a></div>
<div><br></div><div>The release candidate is a zip archive of the sources i=
n:</div><div><br></div><div>=A0 =A0 <a href=3D"https://svn.apache.org/repos=
/asf/jackrabbit/tags/2.7.1/">https://svn.apache.org/repos/asf/jackrabbit/ta=
gs/2.7.1/</a></div>
<div><br></div><div>The SHA1 checksum of the archive is 78743243d8d3514d37b=
334a73a398c0fce8945ac.</div><div><br></div><div>A staged Maven repository i=
s available for review at:</div><div><br></div><div>=A0 =A0 <a href=3D"http=
s://repository.apache.org/content/repositories/orgapachejackrabbit-027/">ht=
tps://repository.apache.org/content/repositories/orgapachejackrabbit-027/</=
a></div>
<div><br></div><div>The command for running automated checks against this r=
elease candidate is:</div><div><br></div><div>=A0 =A0 $ sh check-release.sh=
 2.7.1 78743243d8d3514d37b334a73a398c0fce8945ac</div><div><br></div><div>Pl=
ease vote on releasing this package as Apache Jackrabbit 2.7.1.</div>
<div>The vote is open for the next 72 hours and passes if a majority of at<=
/div><div>least three +1 Jackrabbit PMC votes are cast.</div><div><br></div=
><div>=A0 =A0 [ ] +1 Release this package as Apache Jackrabbit 2.7.1</div><=
div>
=A0 =A0 [ ] -1 Do not release this package because...</div><div><br></div><=
div><br></div><div>My vote is +1.</div><div><br></div><div>best,</div><div>=
alex</div></div>

--047d7b6721c482d45604e61a9881--

From dev-return-38425-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 13:27:55 2013
Return-Path: <dev-return-38425-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA92B10FE5
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 13:27:55 +0000 (UTC)
Received: (qmail 23406 invoked by uid 500); 11 Sep 2013 13:27:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 23281 invoked by uid 500); 11 Sep 2013 13:27:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 23273 invoked by uid 99); 11 Sep 2013 13:27:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:27:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jukka.zitting@gmail.com designates 209.85.219.49 as permitted sender)
Received: from [209.85.219.49] (HELO mail-oa0-f49.google.com) (209.85.219.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:27:46 +0000
Received: by mail-oa0-f49.google.com with SMTP id i7so9298433oag.36
        for <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 06:27:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=XJJnsoEy1F8bg1PHximoO6577q/32/EuHN4bY5KgoBY=;
        b=J40mZ00by/P2ELZVd1tksmb0RczU8YCgbG6eJn76EsvVj87jcjxCWtF4vtfA53AyiF
         WN2dJp8sDYS8Muoge3T8Zc7kjjCgCjfEC0NnLxH7DqmZo/e+3+V+wzB+DcR+eV04SCIT
         ggKq6X8oU82r9fU+4P4XWcZdfsN7u9p++czWkxdIvqzbytnq7zwHLaSdRLsH744wZgXu
         BxBZOJSyPHOElsiyn6C/vguecOEW/P7vGEewXvAm6ghucmKTjvs3lZWRkYu5aegX/C1m
         psl3CUXt9PAqleVH6bBsM5IhH33inyaMhuBBqfjHSgZtA46AKWshzj7gOJzna2QekVgQ
         cfSw==
X-Received: by 10.182.176.105 with SMTP id ch9mr1455723obc.40.1378906045397;
 Wed, 11 Sep 2013 06:27:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.182.39.7 with HTTP; Wed, 11 Sep 2013 06:27:05 -0700 (PDT)
In-Reply-To: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
References: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
From: Jukka Zitting <jukka.zitting@gmail.com>
Date: Wed, 11 Sep 2013 09:27:05 -0400
Message-ID: <CAOFYJNZ=F_oW9haZMkJ_rHDqJwUOmFta__sMrqa+0k3bY9+3kw@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit 2.7.1
To: Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On Wed, Sep 11, 2013 at 8:16 AM, Alex Parvulescu
<alexparvulescu@apache.org> wrote:
> Please vote on releasing this package as Apache Jackrabbit 2.7.1.

    [x] +1 Release this package as Apache Jackrabbit 2.7.1

BR,

Jukka Zitting

From dev-return-38426-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 13:29:02 2013
Return-Path: <dev-return-38426-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2FB5710FEE
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 13:29:02 +0000 (UTC)
Received: (qmail 25167 invoked by uid 500); 11 Sep 2013 13:29:01 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 25122 invoked by uid 500); 11 Sep 2013 13:29:01 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 25115 invoked by uid 99); 11 Sep 2013 13:29:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:29:01 +0000
X-ASF-Spam-Status: No, hits=-2000.0 required=5.0
	tests=ALL_TRUSTED
X-Spam-Check-By: apache.org
Received: from [140.211.11.8] (HELO aegis.apache.org) (140.211.11.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:29:00 +0000
Received: from aegis.apache.org (localhost [127.0.0.1])
	by aegis.apache.org (Postfix) with ESMTP id EC751C0414;
	Wed, 11 Sep 2013 13:28:33 +0000 (UTC)
Date: Wed, 11 Sep 2013 13:28:31 +0000 (UTC)
From: Apache Jenkins Server <jenkins@builds.apache.org>
To: dev@jackrabbit.apache.org, alex.parvulescu@gmail.com
Message-ID: <2046166584.1353.1378906113952.JavaMail.hudson@aegis>
In-Reply-To: <2122790370.1332.1378901114909.JavaMail.hudson@aegis>
References: <2122790370.1332.1378901114909.JavaMail.hudson@aegis>
Subject: Jackrabbit-trunk - Build # 2188 - Fixed
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_1352_143945778.1378906112352"
X-Jenkins-Job: Jackrabbit-trunk
X-Jenkins-Result: SUCCESS
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1352_143945778.1378906112352
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

The Apache Jenkins build system has built Jackrabbit-trunk (build #2188)

Status: Fixed

Check console output at https://builds.apache.org/job/Jackrabbit-trunk/2188/ to view the results.
------=_Part_1352_143945778.1378906112352--

From dev-return-38427-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 13:32:18 2013
Return-Path: <dev-return-38427-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A3CE10FFF
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 13:32:18 +0000 (UTC)
Received: (qmail 31326 invoked by uid 500); 11 Sep 2013 13:32:17 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 31131 invoked by uid 500); 11 Sep 2013 13:32:17 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 31122 invoked by uid 99); 11 Sep 2013 13:32:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:32:17 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: error (athena.apache.org: local policy)
Received: from [64.18.1.29] (HELO exprod6og112.obsmtp.com) (64.18.1.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:32:10 +0000
Received: from outbound-smtp-1.corp.adobe.com ([192.150.11.134]) by exprod6ob112.postini.com ([64.18.5.12]) with SMTP
	ID DSNKUjBwsYAbGZvPqIS7wxHw0kEaZWBBqEKn@postini.com; Wed, 11 Sep 2013 06:31:49 PDT
Received: from inner-relay-2.corp.adobe.com ([153.32.1.52])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r8BDRsiH015297
	for <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 06:27:54 -0700 (PDT)
Received: from nacas02.corp.adobe.com (nacas02.corp.adobe.com [10.8.189.100])
	by inner-relay-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r8BDVSw7022828
	for <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 06:31:28 -0700 (PDT)
Received: from SJ1GWM332.corp.adobe.com (10.5.79.97) by nacas02.corp.adobe.com
 (10.8.189.100) with Microsoft SMTP Server (TLS) id 8.3.327.1; Wed, 11 Sep
 2013 06:31:28 -0700
Received: from eurcas01.eur.adobe.com (10.128.4.27) by
 SJ1GWM332.corp.adobe.com (10.5.79.97) with Microsoft SMTP Server (TLS) id
 14.3.158.1; Wed, 11 Sep 2013 06:31:28 -0700
Received: from [10.132.1.9] (10.132.1.9) by eurcas01.eur.adobe.com
 (10.128.4.111) with Microsoft SMTP Server id 8.3.327.1; Wed, 11 Sep 2013
 14:31:24 +0100
Message-ID: <523070AC.8010408@apache.org>
Date: Wed, 11 Sep 2013 15:31:24 +0200
From: =?ISO-8859-1?Q?Michael_D=FCrig?= <mduerig@apache.org>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20130801 Thunderbird/17.0.8
MIME-Version: 1.0
To: <dev@jackrabbit.apache.org>
Subject: Re: [VOTE] Release Apache Jackrabbit 2.7.1
References: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
In-Reply-To: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



On 11.9.13 2:16 , Alex Parvulescu wrote:
> [x] +1 Release this package as Apache Jackrabbit 2.7.1

Michael

From dev-return-38428-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 13:36:35 2013
Return-Path: <dev-return-38428-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B18771004A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 13:36:35 +0000 (UTC)
Received: (qmail 44024 invoked by uid 500); 11 Sep 2013 13:36:34 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 43649 invoked by uid 500); 11 Sep 2013 13:36:34 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 43642 invoked by uid 99); 11 Sep 2013 13:36:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:36:34 +0000
X-ASF-Spam-Status: No, hits=3.9 required=5.0
	tests=DCC_CHECK,HTML_MESSAGE,MIME_HTML_MOSTLY,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.8.61.7] (HELO spamslammer1.tirol.gv.at) (194.8.61.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:36:27 +0000
From: =?iso-8859-1?Q?K=D6LL_Claus?= <C.KOELL@TIROL.GV.AT>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Date: Wed, 11 Sep 2013 15:35:53 +0200
Subject: AW: [VOTE] Release Apache Jackrabbit 2.7.1
Thread-Topic: [VOTE] Release Apache Jackrabbit 2.7.1
Thread-Index: Ac6u6N5lHd2qoPInR36d4xdYRPuHsQACuCvA
Message-ID: <89934884426A01458CBE55947B042D722EA561D37C@EXCHMCA.tirol.local>
References: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
In-Reply-To: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
Accept-Language: de-DE, de-AT
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-AT
Content-Type: multipart/alternative;
	boundary="_000_89934884426A01458CBE55947B042D722EA561D37CEXCHMCAtiroll_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_89934884426A01458CBE55947B042D722EA561D37CEXCHMCAtiroll_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

+1

greets
claus

--_000_89934884426A01458CBE55947B042D722EA561D37CEXCHMCAtiroll_
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Diso-8859-=
1">
<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40"><head><meta name=3DGenerator content=3D"Microso=
ft Word 14 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.E-MailFormatvorlage17
	{mso-style-type:personal-reply;
	font-family:"Arial","sans-serif";
	color:#1F497D;
	font-weight:normal;
	font-style:normal;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 2.0cm 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DDE link=3Dblue vlink=
=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span style=3D'fon=
t-size:10.0pt;font-family:"Arial","sans-serif";color:#1F497D'>+1<o:p></o:p>=
</span></p><p class=3DMsoNormal><span style=3D'font-size:10.0pt;font-family=
:"Arial","sans-serif";color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class=
=3DMsoNormal><span style=3D'font-size:10.0pt;font-family:"Arial","sans-seri=
f";color:#1F497D'>greets<o:p></o:p></span></p><p class=3DMsoNormal><span st=
yle=3D'font-size:10.0pt;font-family:"Arial","sans-serif";color:#1F497D'>cla=
us<o:p></o:p></span></p></div></body></html>=

--_000_89934884426A01458CBE55947B042D722EA561D37CEXCHMCAtiroll_--

From dev-return-38429-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 13:56:00 2013
Return-Path: <dev-return-38429-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CAFF91014D
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 13:56:00 +0000 (UTC)
Received: (qmail 3352 invoked by uid 500); 11 Sep 2013 13:55:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 3245 invoked by uid 500); 11 Sep 2013 13:55:59 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 3108 invoked by uid 99); 11 Sep 2013 13:55:58 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 13:55:58 +0000
Date: Wed, 11 Sep 2013 13:55:58 +0000 (UTC)
From: "Thomas Mueller (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.115993.1378907758038@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Commented] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13764314#comment-13764314 ] 

Thomas Mueller commented on JCR-3651:
-------------------------------------

Thanks a lot! I have a few more comments:

- The code currently doesn't use {{@Override}}
- There are some unused imports
- There is a lot of duplicate code in TestCaseBase
- CachingDataStore.addRecord: length is not used
- CachingDataStore.mkdirs can be declared static
- S3Backend.write: uploadResult is not used
- S3Backend.getKeyName can be declared static
- S3Backend.getIdentifierName can be declared static
- TestS3Ds and TestInMemDsCacheOff LOG is not used
- if (...) should use {}
- I have changed the visibility of some fields and methods
  to avoid synthetic accessor methods

I will try to commit the patch now.
                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38430-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 14:34:52 2013
Return-Path: <dev-return-38430-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C1F781034E
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 14:34:52 +0000 (UTC)
Received: (qmail 15617 invoked by uid 500); 11 Sep 2013 14:34:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 15521 invoked by uid 500); 11 Sep 2013 14:34:51 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 15246 invoked by uid 99); 11 Sep 2013 14:34:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 14:34:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of julian.reschke@gmx.de designates 212.227.17.21 as permitted sender)
Received: from [212.227.17.21] (HELO mout.gmx.net) (212.227.17.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 14:34:43 +0000
Received:  from [192.168.1.102] ([217.91.35.233]) by mail.gmx.com (mrgmx003)
 with ESMTPSA (Nemesis) id 0MSduu-1VTYZZ3sm4-00RVE2 for
 <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 16:34:22 +0200
Message-ID: <52307F66.9040206@gmx.de>
Date: Wed, 11 Sep 2013 16:34:14 +0200
From: Julian Reschke <julian.reschke@gmx.de>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20130801 Thunderbird/17.0.8
MIME-Version: 1.0
To: dev@jackrabbit.apache.org
CC: Alex Parvulescu <alexparvulescu@apache.org>
Subject: Re: [VOTE] Release Apache Jackrabbit 2.7.1
References: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
In-Reply-To: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID:  V03:K0:xZvB9Fi54iZOW+IPMLyafcWi+mDH9OYVui+r0m7yHOopVRV1wYG
 kcFdHKM/cANweLO12owaInkGi4TxODCY/RGKYJQwSBIS4SidhnvGb9PjfSOBmjKK+bVYX9K
 gGzSeWsE2eEwiLeFG4RIont8AR4Qufqm7XMLZCNydV8wczKravh0iuzlVuFTdQKyNEbbsjK
 ydKd2Cb8+zhBoRq0dPL3Q==
X-Virus-Checked: Checked by ClamAV on apache.org

[X] +1 Release this package as Apache Jackrabbit 2.7.1

On 2013-09-11 14:16, Alex Parvulescu wrote:
> A candidate for the Jackrabbit 2.7.1 release is available at:
>
> https://dist.apache.org/repos/dist/dev/jackrabbit/2.7.1/
>
> The release candidate is a zip archive of the sources in:
>
> https://svn.apache.org/repos/asf/jackrabbit/tags/2.7.1/
>
> The SHA1 checksum of the archive is
> 78743243d8d3514d37b334a73a398c0fce8945ac.
>
> A staged Maven repository is available for review at:
>
> https://repository.apache.org/content/repositories/orgapachejackrabbit-027/
>
> The command for running automated checks against this release candidate is:
>
>      $ sh check-release.sh 2.7.1 78743243d8d3514d37b334a73a398c0fce8945ac
>
> Please vote on releasing this package as Apache Jackrabbit 2.7.1.
> The vote is open for the next 72 hours and passes if a majority of at
> least three +1 Jackrabbit PMC votes are cast.
>
>      [ ] +1 Release this package as Apache Jackrabbit 2.7.1
>      [ ] -1 Do not release this package because...
>
>
> My vote is +1.
>
> best,
> alex


From dev-return-38431-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 14:37:53 2013
Return-Path: <dev-return-38431-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E354F1036B
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 14:37:53 +0000 (UTC)
Received: (qmail 21183 invoked by uid 500); 11 Sep 2013 14:37:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 21110 invoked by uid 500); 11 Sep 2013 14:37:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 21019 invoked by uid 99); 11 Sep 2013 14:37:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 14:37:52 +0000
Date: Wed, 11 Sep 2013 14:37:52 +0000 (UTC)
From: "Thomas Mueller (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.116274.1378910272203@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Commented] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13764363#comment-13764363 ] 

Thomas Mueller commented on JCR-3651:
-------------------------------------

After a little fight with SVN I have committed the patch in revision 1521876.

I'm not quite sure yet if everything is correct, specially the pom file. But I guess it should be possible to fix that.
                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38432-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 11 15:03:54 2013
Return-Path: <dev-return-38432-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B406A104B5
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 11 Sep 2013 15:03:54 +0000 (UTC)
Received: (qmail 88181 invoked by uid 500); 11 Sep 2013 15:03:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 88111 invoked by uid 500); 11 Sep 2013 15:03:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 88101 invoked by uid 99); 11 Sep 2013 15:03:51 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Sep 2013 15:03:51 +0000
Date: Wed, 11 Sep 2013 15:03:51 +0000 (UTC)
From: "Shashank Gupta (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664593.1376996543940.116332.1378911831726@arcas>
In-Reply-To: <JIRA.12664593.1376996543940@arcas>
References: <JIRA.12664593.1376996543940@arcas>
Subject: [jira] [Commented] (JCR-3651) S3 Datastore implementation
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3651?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13764380#comment-13764380 ] 

Shashank Gupta commented on JCR-3651:
-------------------------------------

Thanks [~tmueller]. 
                
> S3 Datastore implementation
> ---------------------------
>
>                 Key: JCR-3651
>                 URL: https://issues.apache.org/jira/browse/JCR-3651
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.7
>            Reporter: Shashank Gupta
>         Attachments: JCR-3651.patch, JCR-3651-svn.patch, JCR-3651-svn-updated.patch
>
>
> S3 Datastore provides capability to use Amazon S3 as datastore, thus leveraging all benefits of Amazon S3 like low cost, infinite, reliable, scalable storage.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38433-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 12 06:32:09 2013
Return-Path: <dev-return-38433-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 902A8108A2
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 12 Sep 2013 06:32:08 +0000 (UTC)
Received: (qmail 96400 invoked by uid 500); 12 Sep 2013 06:31:40 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 95313 invoked by uid 500); 12 Sep 2013 06:31:14 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 94844 invoked by uid 99); 12 Sep 2013 06:31:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Sep 2013 06:31:11 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of teofili@adobe.com designates 64.18.1.37 as permitted sender)
Received: from [64.18.1.37] (HELO exprod6og116.obsmtp.com) (64.18.1.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Sep 2013 06:31:03 +0000
Received: from outbound-smtp-2.corp.adobe.com ([193.104.215.16]) by exprod6ob116.postini.com ([64.18.5.12]) with SMTP
	ID DSNKUjFfkQL8m+xVk+HCve3cxTBI5Xtu/Y6a@postini.com; Wed, 11 Sep 2013 23:30:42 PDT
Received: from inner-relay-1.corp.adobe.com (ms-exchange.macromedia.com [153.32.1.51])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r8C6Ue2r013706
	for <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 23:30:40 -0700 (PDT)
Received: from nacas03.corp.adobe.com (nacas03.corp.adobe.com [10.8.189.121])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r8C6UO6C028963
	for <dev@jackrabbit.apache.org>; Wed, 11 Sep 2013 23:30:39 -0700 (PDT)
Received: from eurcas01.eur.adobe.com (10.128.4.27) by nacas03.corp.adobe.com
 (10.8.189.121) with Microsoft SMTP Server (TLS) id 8.3.327.1; Wed, 11 Sep
 2013 23:30:28 -0700
Received: from eurmbx02.eur.adobe.com ([10.128.4.126]) by
 eurcas01.eur.adobe.com ([10.128.4.27]) with mapi; Thu, 12 Sep 2013 07:28:44
 +0100
From: Tommaso Teofili <teofili@adobe.com>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Date: Thu, 12 Sep 2013 07:28:40 +0100
Subject: Re: [VOTE] Release Apache Jackrabbit 2.7.1
Thread-Topic: [VOTE] Release Apache Jackrabbit 2.7.1
Thread-Index: Ac6vgVRJwZ/P/7RyRP+Qkn3G+Aatgw==
Message-ID: <127F65D9-CFB0-4F1E-878F-B6FD79309BDC@adobe.com>
References: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
In-Reply-To: <CAB-0WTCfQgKmrRiO7MtPakZJ+OYg_N8GMKPmuA7gd83fVWBAHA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_127F65D9CFB04F1E878FB6FD79309BDCadobecom_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_127F65D9CFB04F1E878FB6FD79309BDCadobecom_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

[X] +1 Release this package as Apache Jackrabbit 2.7.1

Regards,
Tommaso

On 11/set/2013, at 14:16, Alex Parvulescu wrote:

A candidate for the Jackrabbit 2.7.1 release is available at:

    https://dist.apache.org/repos/dist/dev/jackrabbit/2.7.1/

The release candidate is a zip archive of the sources in:

    https://svn.apache.org/repos/asf/jackrabbit/tags/2.7.1/

The SHA1 checksum of the archive is 78743243d8d3514d37b334a73a398c0fce8945a=
c.

A staged Maven repository is available for review at:

    https://repository.apache.org/content/repositories/orgapachejackrabbit-=
027/

The command for running automated checks against this release candidate is:

    $ sh check-release.sh 2.7.1 78743243d8d3514d37b334a73a398c0fce8945ac

Please vote on releasing this package as Apache Jackrabbit 2.7.1.
The vote is open for the next 72 hours and passes if a majority of at
least three +1 Jackrabbit PMC votes are cast.

    [ ] +1 Release this package as Apache Jackrabbit 2.7.1
    [ ] -1 Do not release this package because...


My vote is +1.

best,
alex


--_000_127F65D9CFB04F1E878FB6FD79309BDCadobecom_
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<html><head></head><body style=3D"word-wrap: break-word; -webkit-nbsp-mode:=
 space; -webkit-line-break: after-white-space; ">[X] +1 Release this packag=
e as Apache Jackrabbit 2.7.1<div><br></div><div>Regards,</div><div>Tommaso<=
/div><div><br><div><div>On 11/set/2013, at 14:16, Alex Parvulescu wrote:</d=
iv><br class=3D"Apple-interchange-newline"><blockquote type=3D"cite"><div d=
ir=3D"ltr"><div>A candidate for the Jackrabbit 2.7.1 release is available a=
t:</div><div><br></div><div>&nbsp; &nbsp; <a href=3D"https://dist.apache.or=
g/repos/dist/dev/jackrabbit/2.7.1/">https://dist.apache.org/repos/dist/dev/=
jackrabbit/2.7.1/</a></div>
<div><br></div><div>The release candidate is a zip archive of the sources i=
n:</div><div><br></div><div>&nbsp; &nbsp; <a href=3D"https://svn.apache.org=
/repos/asf/jackrabbit/tags/2.7.1/">https://svn.apache.org/repos/asf/jackrab=
bit/tags/2.7.1/</a></div>
<div><br></div><div>The SHA1 checksum of the archive is 78743243d8d3514d37b=
334a73a398c0fce8945ac.</div><div><br></div><div>A staged Maven repository i=
s available for review at:</div><div><br></div><div>&nbsp; &nbsp; <a href=
=3D"https://repository.apache.org/content/repositories/orgapachejackrabbit-=
027/">https://repository.apache.org/content/repositories/orgapachejackrabbi=
t-027/</a></div>
<div><br></div><div>The command for running automated checks against this r=
elease candidate is:</div><div><br></div><div>&nbsp; &nbsp; $ sh check-rele=
ase.sh 2.7.1 78743243d8d3514d37b334a73a398c0fce8945ac</div><div><br></div><=
div>Please vote on releasing this package as Apache Jackrabbit 2.7.1.</div>
<div>The vote is open for the next 72 hours and passes if a majority of at<=
/div><div>least three +1 Jackrabbit PMC votes are cast.</div><div><br></div=
><div>&nbsp; &nbsp; [ ] +1 Release this package as Apache Jackrabbit 2.7.1<=
/div><div>
&nbsp; &nbsp; [ ] -1 Do not release this package because...</div><div><br><=
/div><div><br></div><div>My vote is +1.</div><div><br></div><div>best,</div=
><div>alex</div></div>
</blockquote></div><br></div></body></html>=

--_000_127F65D9CFB04F1E878FB6FD79309BDCadobecom_--

From dev-return-38434-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 12 10:24:11 2013
Return-Path: <dev-return-38434-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C342D10E2F
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 12 Sep 2013 10:24:11 +0000 (UTC)
Received: (qmail 25762 invoked by uid 500); 12 Sep 2013 10:24:10 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 25268 invoked by uid 500); 12 Sep 2013 10:23:58 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 25060 invoked by uid 99); 12 Sep 2013 10:23:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Sep 2013 10:23:53 +0000
Date: Thu, 12 Sep 2013 10:23:53 +0000 (UTC)
From: "Konrad Windszus (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12655246.1372380540833.121844.1378981433136@arcas>
In-Reply-To: <JIRA.12655246.1372380540833@arcas>
References: <JIRA.12655246.1372380540833@arcas>
Subject: [jira] [Commented] (JCR-3612) Contribute Adobe's FileVault to ASF
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3612?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13765318#comment-13765318 ] 

Konrad Windszus commented on JCR-3612:
--------------------------------------

Thanks a lot for the contribution of FileVault, but what about the Maven Plugins you were referring to in the description of this issue. As far as I can see none of those plugins have been contributed to https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/trunk/. Were you referring to this one: http://dev.day.com/docs/en/cq/current/core/how_to/how_to_use_the_vlttool/vlt-mavenplugin.html or any other ones? What about the Package manager? 
                
> Contribute Adobe's FileVault to ASF
> -----------------------------------
>
>                 Key: JCR-3612
>                 URL: https://issues.apache.org/jira/browse/JCR-3612
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: sandbox
>            Reporter: Tobias Bocanegra
>            Assignee: Tobias Bocanegra
>            Priority: Trivial
>
> Note: This holds as a container bug for all the work needed until the contribution is complete.
> Rational:
> ------------
> We at Adobe (and at Day Software before)
> developed quite some tooling around exporting, importing and syncing
> content from and to a JCR repository. The "checked-out" structure on
> the local filesystem also offers SVN-like operations, like update,
> checkin, status, etc., against the JCR repository. We called this
> system the "File Vault (vlt)". It uses the built-in JCR remoting of
> Jackrabbit to read and write the content.
> We also used the same serialization format to implement our "Content
> Packages" which basically are a zip of such an exported structure, w/o
> all the meta information needed for syncing. This packaging system
> also comes with a HTTP service and UI that allows to actually manage
> those packages (create, update, install, uninstall, upload, etc).
> Additionally we also developed some maven plugins that allow building
> such content packages, controlling vlt (the command line tool) and
> deploying content packages into a running repository.
> Our R&D thinks that the Jackrabbit project would benefit from such
> tooling since nothing comparable is established today. We are now at a
> stage where we cleared all hurdles with Adobe Legal, and streamlined
> the codebase so that we are ready to contribute.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38435-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 12 11:13:57 2013
Return-Path: <dev-return-38435-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD11310F6A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 12 Sep 2013 11:13:56 +0000 (UTC)
Received: (qmail 3346 invoked by uid 500); 12 Sep 2013 11:13:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 2775 invoked by uid 500); 12 Sep 2013 11:13:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 2757 invoked by uid 99); 12 Sep 2013 11:13:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Sep 2013 11:13:52 +0000
Date: Thu, 12 Sep 2013 11:13:52 +0000 (UTC)
From: "Robert Munteanu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668234.1378984398612.121949.1378984432620@arcas>
In-Reply-To: <JIRA.12668234.1378984398612@arcas>
References: <JIRA.12668234.1378984398612@arcas>
Subject: [jira] [Created] (JCR-3666) FileVault: VaultFsConfig11 references
 incorrect classes from prior versions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Robert Munteanu created JCR-3666:
------------------------------------

             Summary: FileVault: VaultFsConfig11 references incorrect classes from prior versions
                 Key: JCR-3666
                 URL: https://issues.apache.org/jira/browse/JCR-3666
             Project: Jackrabbit Content Repository
          Issue Type: Bug
          Components: jackrabbit-jcr-commons
            Reporter: Robert Munteanu
            Priority: Minor


I stumbled upon this by accident, so I can't say whether this has unintended side effects or not, but just to make sure...

VaultFsConfig11 references classes from prior mappings 

{code}
        Map<String, String> m = helper.getMappings();
        m.put("org.apache.jackrabbit.vault.fs.imprt.FolderArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.FileArtifactHandler");
        m.put("org.apache.jackrabbit.vault.fs.imprt.FileArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.FileArtifactHandler");
        m.put("org.apache.jackrabbit.vault.fs.imprt.GenericArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.GenericArtifactHandler");
        m.put("org.apache.jackrabbit.vault.fs.imprt.NodeTypeArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.NodeTypeArtifactHandler");

        m.put("org.apache.jackrabbit.vault.fs.filter.ItemFilter", "org.apache.jackrabbit.vault.fs.api.ItemFilter");
        m.put("org.apache.jackrabbit.vault.fs.filter.PathFilter", "org.apache.jackrabbit.vault.fs.api.PathFilter");
{code}

But since there was no prior org.apache.jackrabbit.vault.fs.imprt package, I guess that this is incorrect, and that the mappings should include both the previous class names and the class names which were in effect before FileVault was donated.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38436-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 16 07:42:23 2013
Return-Path: <dev-return-38436-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AC50101E4
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 16 Sep 2013 07:42:23 +0000 (UTC)
Received: (qmail 99917 invoked by uid 500); 16 Sep 2013 07:40:17 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 99734 invoked by uid 500); 16 Sep 2013 07:39:59 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 99565 invoked by uid 99); 16 Sep 2013 07:39:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Sep 2013 07:39:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alex.parvulescu@gmail.com designates 209.85.128.179 as permitted sender)
Received: from [209.85.128.179] (HELO mail-ve0-f179.google.com) (209.85.128.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Sep 2013 07:39:28 +0000
Received: by mail-ve0-f179.google.com with SMTP id c14so2625742vea.24
        for <dev@jackrabbit.apache.org>; Mon, 16 Sep 2013 00:39:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:date:message-id:subject:from:to:content-type;
        bh=57DX994WWrazHkrEkB2ESATb0m8v52CGDH1hydU8WIs=;
        b=Ukgac5INs0Ks5oqB7wAiGNzo0TcGTOIq38bsj0P1U5rVWIhamSN3+j0I/AMshkW6m0
         SOXGT3QaHU8HsoN/K/9bQr4s/ylss/oL4fH76/x6ZO6JNtYcBkTmzSWWuw+Jg8FYnVrs
         sPYz8gHEsDhKq/83xbBumx6IZqaJ+/sE2BF7IZDaNWbTp/8cZ+OsvGafmD/mlZEiKqcB
         QtA50ak0yo7FAySmS4yJXF0wxlyQ+l5k2jtm8MqLrje1Zy3d7/R2qviqbWQbx88zD6Eh
         n1v6WnhcMHjMMjKmbx3Nqx379eTL9Rp2yp8dBX3ePXzpV5SLblNJbyLtwiPREoYQUlyF
         r/Dw==
MIME-Version: 1.0
X-Received: by 10.220.91.16 with SMTP id k16mr968689vcm.21.1379317147275; Mon,
 16 Sep 2013 00:39:07 -0700 (PDT)
Sender: alex.parvulescu@gmail.com
Received: by 10.220.122.135 with HTTP; Mon, 16 Sep 2013 00:39:07 -0700 (PDT)
Date: Mon, 16 Sep 2013 09:39:07 +0200
X-Google-Sender-Auth: MIblz64b7xN81zFtd_yIovhYiZw
Message-ID: <CAB-0WTD1LKougx7G_Nnx_09x=7Ls2OvoXPdy4zJuzkGJrnfqvg@mail.gmail.com>
Subject: [RESULT] [VOTE] Release Apache Jackrabbit 2.7.1
From: Alex Parvulescu <alexparvulescu@apache.org>
To: Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: multipart/alternative; boundary=047d7b343f1a989a0304e67b4c61
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b343f1a989a0304e67b4c61
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

On Wed, Sep 11, 2013 at 2:16 PM, Alex Parvulescu
<alexparvulescu@apache.org>wrote:

>
> Please vote on releasing this package as Apache Jackrabbit 2.7.1.
> The vote is open for the next 72 hours and passes if a majority of at
> least three +1 Jackrabbit PMC votes are cast.
>

The vote passes as follows:

+1 Alex Parvulescu
+1 Claus K=D6LL
+1 Jukka Zitting
+1 Julian Reschke
+1 Michael D=FCrig
+1 Tommaso Teofili


Thanks for voting! I'll push the release out shortly.

best,
alex

--047d7b343f1a989a0304e67b4c61
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi,<br><div class=3D"gmail_extra"><br>On Wed, Sep 11, 2013=
 at 2:16 PM, Alex Parvulescu <span dir=3D"ltr">&lt;<a href=3D"mailto:alexpa=
rvulescu@apache.org" target=3D"_blank">alexparvulescu@apache.org</a>&gt;</s=
pan> wrote:<br>
<div class=3D"gmail_quote"><blockquote class=3D"gmail_quote" style=3D"margi=
n:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204=
);border-left-style:solid;padding-left:1ex"><div dir=3D"ltr"><div><br></div=
><div>
Please vote on releasing this package as Apache Jackrabbit 2.7.1.</div>
<div>The vote is open for the next 72 hours and passes if a majority of at<=
/div><div>least three +1 Jackrabbit PMC votes are cast.</div></div></blockq=
uote><div><br></div><div>The vote passes as follows:</div><div><br></div>
<div><div>+1 Alex Parvulescu<span class=3D"" style=3D"white-space:pre">	</s=
pan></div><div>+1 Claus K=D6LL</div><div>+1 Jukka Zitting</div><div>+1 Juli=
an Reschke</div><div>+1 Michael D=FCrig</div><div>+1 Tommaso Teofili</div><=
/div>
<div><br></div><div><br></div><div>Thanks for voting! I&#39;ll push the rel=
ease out shortly.</div><div><br></div><div>best,</div><div>alex</div><div>=
=A0</div></div></div></div>

--047d7b343f1a989a0304e67b4c61--

From dev-return-38437-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 17 10:56:13 2013
Return-Path: <dev-return-38437-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 841841080F
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 17 Sep 2013 10:56:13 +0000 (UTC)
Received: (qmail 2888 invoked by uid 500); 17 Sep 2013 10:56:09 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 2535 invoked by uid 500); 17 Sep 2013 10:55:58 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 2412 invoked by uid 99); 17 Sep 2013 10:55:54 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Sep 2013 10:55:54 +0000
Date: Tue, 17 Sep 2013 10:55:54 +0000 (UTC)
From: =?utf-8?Q?C=C3=A9dric_Damioli_=28JIRA=29?= <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668985.1379415352125.146071.1379415354248@arcas>
In-Reply-To: <JIRA.12668985.1379415352125@arcas>
References: <JIRA.12668985.1379415352125@arcas>
Subject: [jira] [Created] (JCR-3667) Possible regression with accepted
 content types when extracting and indexing binary values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

C=C3=A9dric Damioli created JCR-3667:
-----------------------------------

             Summary: Possible regression with accepted content types when =
extracting and indexing binary values
                 Key: JCR-3667
                 URL: https://issues.apache.org/jira/browse/JCR-3667
             Project: Jackrabbit Content Repository
          Issue Type: Bug
    Affects Versions: 2.4.4
            Reporter: C=C3=A9dric Damioli
             Fix For: 2.4.5, 2.6.4, 2.7.2


JCR-3476 introduced a mime-type test before parsing binary values, based on=
 Tika's supported parsers.
This may lead to incorrect behaviours, with a "text/xml" not being extracte=
d and indexed because the XMLParser does not declare "text/xml" as a suppor=
ted type.

The problem here is that there is a regression between 2.4.3 and 2.4.4, bec=
ause the same content was previously well recognized by Tika's Detector and=
 then extracted.

Furthermore, it seems to me inconsistent on one hand to rely on the declare=
d content type and on the other hand to delegate the actual type detection =
to Tika ?=20
This may lead to cases where the jcr:mimeType value is set to eg. "applicat=
ion/pdf" but detected and parsed by Tika as "text/plain" with no error.


--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38438-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 08:23:32 2013
Return-Path: <dev-return-38438-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CA5B10A61
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 08:23:32 +0000 (UTC)
Received: (qmail 52909 invoked by uid 500); 18 Sep 2013 08:23:20 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 51939 invoked by uid 500); 18 Sep 2013 08:22:57 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 51858 invoked by uid 99); 18 Sep 2013 08:22:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 08:22:52 +0000
Date: Wed, 18 Sep 2013 08:22:51 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.153374.1379492571611@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Created] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Andreas Tully created JCR-3668:
----------------------------------

             Summary: Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
                 Key: JCR-3668
                 URL: https://issues.apache.org/jira/browse/JCR-3668
             Project: Jackrabbit Content Repository
          Issue Type: Bug
          Components: jackrabbit-jcr-server
    Affects Versions: 2.6.3
         Environment: JBOSS AS 7.1
            Reporter: Andreas Tully
         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml

When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38439-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 08:23:36 2013
Return-Path: <dev-return-38439-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A39810A62
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 08:23:36 +0000 (UTC)
Received: (qmail 52856 invoked by uid 500); 18 Sep 2013 08:23:17 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 52783 invoked by uid 500); 18 Sep 2013 08:23:15 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 51910 invoked by uid 99); 18 Sep 2013 08:22:55 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 08:22:55 +0000
Date: Wed, 18 Sep 2013 08:22:55 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.153385.1379492575729@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Updated] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Andreas Tully updated JCR-3668:
-------------------------------

    Attachment: web.xml
                toromiro.log
                repository.xml
                jboss-deployment.log
                jboss.log
                bootstrap.properties
    
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38440-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 13:28:58 2013
Return-Path: <dev-return-38440-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AE4A0104F9
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 13:28:58 +0000 (UTC)
Received: (qmail 82813 invoked by uid 500); 18 Sep 2013 13:28:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 82774 invoked by uid 500); 18 Sep 2013 13:28:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 82763 invoked by uid 99); 18 Sep 2013 13:28:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 13:28:52 +0000
Date: Wed, 18 Sep 2013 13:28:52 +0000 (UTC)
From: "Torsten Witte (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.154565.1379510932460@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Commented] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13770765#comment-13770765 ] 

Torsten Witte commented on JCR-3668:
------------------------------------

{quote}
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit... 
{quote}

The {{AddMixinAction}} of Toromiro tries to find all mixin types that can be added to the current node.
That is done by getting all repository node types and check with {{node.canAddMixin(nodeTypeName)}}.
In practice, the Toromiro stack shows that it just calls {{org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin()}}.
Maybe it would help, if Toromiro just checks for mixin types only, instead of all node types. This improvement will be available in the next Toromiro release (version 1.12.).
But Jackrabbit should handle with invalid mixin type names, too.

{noformat}
!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
... 2 more 
{noformat}
                
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38441-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 14:23:56 2013
Return-Path: <dev-return-38441-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 96947106C1
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 14:23:56 +0000 (UTC)
Received: (qmail 5853 invoked by uid 500); 18 Sep 2013 14:23:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 5628 invoked by uid 500); 18 Sep 2013 14:23:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 5583 invoked by uid 99); 18 Sep 2013 14:23:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 14:23:52 +0000
Date: Wed, 18 Sep 2013 14:23:52 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.154774.1379514232120@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Commented] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137708=
09#comment-13770809 ]=20

Andreas Tully commented on JCR-3668:
------------------------------------

Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackra=
bbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3)
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addRespo=
nses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?

Mit freundlichen Gr=C3=BC=C3=9Fen / Best Regards / Cordialmente

Andreas Tully
Client/Server - Architektur- und Implementierungsverantwortung (I.LVD 21)

DB Systel GmbH
J=C3=BCrgen-Ponto-Platz 1, 60329 Frankfurt a. Main
Tel. +49 69 265-18641, intern 955-18641

Sitz der Gesellschaft: Frankfurt am Main
Registergericht: Frankfurt am Main, HRB 78707
USt-IdNr.: DE252204770
Gesch=C3=A4ftsf=C3=BChrer: Detlef Exner (Vorsitzender), Dr. Burkhard Klanke=
, Dr.
Klaus R=C3=BCffler
Vorsitzender des Aufsichtsrates: Dr. Rolf Kran=C3=BCchel


  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |"Torsten Witte (JIRA)" <jira@apache.org>                                =
                                                                          |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |andreas.tully@deutschebahn.com                                          =
                                                                          |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |18.09.2013 15:29                                                        =
                                                                          |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |[jira] [Commented] (JCR-3668) Incorrect "wspPath" given to DavLocatorFac=
toryImpl.getRepositoryPath()                                              |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|






    [
https://issues.apache.org/jira/browse/JCR-3668?page=3Dcom.atlassian.jira.pl=
ugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D13770765#com=
ment-13770765
 ]

Torsten Witte commented on JCR-3668:
------------------------------------

{quote}
Currently, I cannot really judge, wether this is a bug in Toromiro or
Jackrabbit...
{quote}

The {{AddMixinAction}} of Toromiro tries to find all mixin types that can
be added to the current node.
That is done by getting all repository node types and check with
{{node.canAddMixin(nodeTypeName)}}.
In practice, the Toromiro stack shows that it just calls
{{org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin()}}.
Maybe it would help, if Toromiro just checks for mixin types only, instead
of all node types. This improvement will be available in the next Toromiro
release (version 1.12.).
But Jackrabbit should handle with invalid mixin type names, too.

{noformat}
!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run
(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate
(ExceptionConverter.java:120)
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate
(ExceptionConverter.java:51)
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate
(ExceptionConverter.java:45)
at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:904)
at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead
(WorkspaceManager.java:695)
at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable
(ItemStateValidator.java:199)
at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown
Source)
... 2 more
{noformat}

jboss.log, repository.xml, toromiro.log, web.xml
everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via
subshell Toromiro) can be established without errors.
work fine, but execution of e.g.  "add mixin" or "Import XML" will fail
with an internal server error...
workspace path given to DavLocatorFactoryImpl.getRepositoryPath().
session with a correct workspace path...)
Jackrabbit...
-Djboss.bind.address=3Dlocalhost -Djboss.bind.address.management=3Dlocalhos=
t
-Djava.rmi.server.hostname=3Dlocalhost
-XX:MaxPermSize=3D256m -Djava.net.preferIPv4Stack=3Dtrue
-Dorg.jboss.resolver.warning=3Dtrue -Dsun.rmi.dgc.client.gcInterval=3D36000=
00
-Dsun.rmi.dgc.server.gcInterval=3D3600000
-Djboss.modules.system.pkgs=3Dorg.jboss.byteman -Djava.awt.headless=3Dtrue
-Djboss.server.default.config=3Dstandalone.xml
"Brontes" starting
management service using socket-binding (management-http)
3.0.3.GA
log handlers
-- 26) JBAS016200: Activating ConfigAdmin Subsystem
38) JBAS011800: Activating Naming Subsystem
Remoting version 3.2.3.GA
-- 48) JBAS015537: Activating WebServices Extension
Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
44) JBAS013101: Activating Security Subsystem
JBAS011940: Activating OSGi Subsystem
JBAS013100: Current PicketBox version=3D4.0.7.Final
JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
JBAS011802: Starting Naming Service
1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
(ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant
driver class org.h2.Driver (version 1.3)
(ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant
driver class com.mysql.jdbc.Driver (version 5.1)
thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
(MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
service thread 1-9) JBAS010400: Bound data source
[java:jboss/datasources/ExampleDS]
service thread 1-13) JBAS010400: Bound data source
[java:jboss/datasources/MySqlDS]
thread 1-15) JBAS015012: Started FileSystemDeploymentService for
directory /usr/local/share/jboss/standalone/deployments
JBAS017100: Listening on localhost/127.0.0.1:4447
JBAS017100: Listening on localhost/127.0.0.1:9999
1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
1-3) Class Path entry derbyLocale_cs.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_de_DE.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_es.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_fr.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_hu.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_it.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_ja_JP.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_ko_KR.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_pl.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_pt_BR.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_ru.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_zh_CN.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_zh_TW.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
thread 1-5) JBAS010403: Deploying JDBC-compliant driver class
org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
service thread 1-12) Starting repository...
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/repository
(MSC service thread 1-12) no custom node type definitions found
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/version
(MSC service thread 1-7) RepositoryAccessServlet initialized.
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) authenticate-header =3D Basic realm=3D"Jackrabbit Webdav Server=
"
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) csrf-protection =3D null
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) createAbsoluteURI =3D true
[org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service
thread 1-7) resource-path-prefix =3D '/repository'
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) authenticate-header =3D Basic realm=3D"Jackrabbit Webdav Server=
"
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) csrf-protection =3D null
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) createAbsoluteURI =3D true
Registering web context: /jackrabbit-webapp-2.6.3
service thread 1-12) initializing workspace 'default'...
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/workspaces/=
default

(MSC service thread 1-12) Index
initialized: /usr/local/share/jboss/standalone/configuration/repository/rep=
ository/index
 Version: 3
(MSC service thread 1-12) Index
initialized: /usr/local/share/jboss/standalone/configuration/repository/wor=
kspaces/default/index
 Version: 3
service thread 1-12) workspace 'default' initialized
service thread 1-12) SecurityManager =3D class
org.apache.jackrabbit.core.DefaultSecurityManager
service thread 1-12) initializing workspace 'security'...
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/workspaces/=
security

(MSC service thread 1-12) Index
initialized: /usr/local/share/jboss/standalone/configuration/repository/wor=
kspaces/security/index
 Version: 3
service thread 1-12) workspace 'security' initialized
(MSC service thread 1-12) init: use Repository Login-Configuration for
Jackrabbit
service thread 1-12) Repository started (5304ms)
thread 1-12) JBAS010406: Registered connection factory
java:/jca/DocumentStore
service thread 1-12) IJ020002: Deployed:
file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrab=
bit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/

thread 1-13) JBAS010401: Bound JCA ConnectionFactory
[java:/jca/DocumentStore]
Admin console listening on http://127.0.0.1:9990
JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298
services (78 services are passive or on-demand)
JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
more
2.0
implied.
2.0//EN"
org.apache.jackrabbit.core.config.RepositoryConfigTest.java>      -> -->
state
class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSystem">
JackrabbitSecurityManager interface
class=3D"org.apache.jackrabbit.core.DefaultSecurityManager"
workspaceName=3D"security">
interface
-->
class=3D"org.apache.jackrabbit.core.security.DefaultAccessManager">
-->
class=3D"org.apache.jackrabbit.core.security.authentication.DefaultLoginMod=
ule">

default value)
param is missing is 'admin')
default workspace
defaultWorkspace=3D"default"/>
class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSystem">
interface
class=3D"org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManage=
r">

{wsp.home}/db;create=3Dtrue"/>
class=3D"org.apache.jackrabbit.core.query.lucene.SearchIndex">
for the respective
class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSystem">
for persisting version state.
based on
future
class=3D"org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManage=
r">

{rep.home}/version/db;create=3Dtrue"/>
class=3D"org.apache.jackrabbit.core.query.lucene.SearchIndex">
class=3D"org.apache.jackrabbit.core.journal.MemoryJournal"/>
2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
access
or Webdav.
<servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-=
class>

<param-name>repository.context.attribute.name</param-name>>
<param-value>javax.jcr.Repository</param-value>>         </init-param> -->
JNDI</description>
<param-value>org.jboss.as.naming.InitialContextFactory</param-value>
<param-name>missing-auth-mapping</param-name>>
<param-value></param-value>>             <description>>
Defines how a missing authorization header should be handled.>
1) If this init-param is missing, a 401 response is generated.>
This is suiteable for clients (eg. webdav clients) for which>
sending a proper authorization header is not possible if the>
server never sent a 401.>                 2) If this init-param is present
with an empty value,>                    null-credentials are returned,
thus forcing an null login>                    on the repository.>
3) If this init-param has a 'user:password' value, the respective>
simple credentials are generated.>             </description>>
</init-param>-->
initial context
added to the initial context environment).
<param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFa=
ctory</param-value>

<param-value>///jackrabbit.repository</param-value>>
<description>The URI for the RMI connection.</description>>
</init-param>-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
repository.
<servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-clas=
s>

<servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class=
>
 -->
repository.
'WWW-Authenticate' header
Server"</param-value>
resources such as:
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
repository.
<servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-c=
lass>

<servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class=
>
 -->
<param-name>missing-auth-mapping</param-name>>
<param-value></param-value>>             <description>>
Defines how a missing authorization header should be handled.>
1) If this init-param is missing, a 401 response is generated.>
This is suitable for clients (eg. WebDAV clients) for which>
sending a proper authorization header is not possible if the>
server never sent a 401.>                 2) If this init-param is present
with an empty value,>                    null-credentials are returned,
thus forcing an null login>                    on the repository.>
3) If this init-param is present with the value 'guestcredentials'>
java.jcr.GuestCredentials are used to login to the repository.>
4) If this init-param has a 'user:password' value, the respective>
simple credentials are generated.>             </description>>
</init-param> -->
'WWW-Authenticate' header
<param-name>authenticate-header</param-name>>
<param-value>Basic realm=3D"Jackrabbit Webdav Server"</param-value>>
<description>>                 Defines the value of the 'WWW-Authenticate'
header.>             </description>>         </init-param> -->
repository.
JcrRemotingServlet temporary files (default: "jackrabbit")</description>
name (under home, default: "tmp")</description>
type names to default depth.</description>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
<servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</s=
ervlet-class>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
2.0
implied.
repository.config=3Dusr/local/share/jboss/standalone/configuration/reposito=
ry/repository.xml

java.naming.factory.initial=3Dorg.apache.jackrabbit.core.jndi.provider.Dumm=
yInitialContextFactory

-----------------------------------------------
Source)
$ModalContextThread.run(ModalContext.java:121)
(ExceptionConverter.java:120)
(ExceptionConverter.java:51)
(ExceptionConverter.java:45)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:904)
(WorkspaceManager.java:695)
org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable
(ItemStateValidator.java:199)
(NodeImpl.java:837)
(Unknown Source)
Error
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseExcept=
ion
(DavMethodBase.java:165)
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess
(DavMethodBase.java:174)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:876)
(ExceptionConverter.java:120)
(ExceptionConverter.java:51)
(ExceptionConverter.java:45)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:904)
(WorkspaceManager.java:695)
org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable
(ItemStateValidator.java:199)
(NodeImpl.java:837)
(Unknown Source)
Source)
$ModalContextThread.run(ModalContext.java:121)
Error
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseExcept=
ion
(DavMethodBase.java:165)
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess
(DavMethodBase.java:174)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:876)
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackra=
bbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg
(workspace: /jackrabbit-webapp-2.6.3)
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addRespo=
nses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA
administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira




               =20
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.lo=
g, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), ever=
ything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell=
 Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to wor=
k fine, but execution of e.g.  "add mixin" or "Import XML" will fail with a=
n internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong wo=
rkspace path given to DavLocatorFactoryImpl.getRepositoryPath().=20
> (Which obviously was already called before on other commands in the same =
session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jac=
krabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind=
.address=3Dlocalhost -Djboss.bind.address.management=3Dlocalhost -Djava.rmi=
.server.hostname=3Dlocalhost
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPerm=
Size=3D256m -Djava.net.preferIPv4Stack=3Dtrue -Dorg.jboss.resolver.warning=
=3Dtrue -Dsun.rmi.dgc.client.gcInterval=3D3600000 -Dsun.rmi.dgc.server.gcIn=
terval=3D3600000 -Djboss.modules.system.pkgs=3Dorg.jboss.byteman -Djava.awt=
.headless=3Dtrue -Djboss.server.default.config=3Dstandalone.xml
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Bront=
es" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http manage=
ment service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.G=
A
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap =
log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool =
-- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38=
) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Re=
moting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool =
-- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Th=
read Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- =
44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) =
JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS=
013100: Current PicketBox version=3D4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS=
010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011=
802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16=
) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (Serve=
rService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver cla=
ss org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (Serve=
rService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver=
 class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service=
 thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] =
(MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC s=
ervice thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/Ex=
ampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC s=
ervice thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/M=
ySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service =
thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory =
/usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS0=
17100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS0=
17100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1=
-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1=
-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service t=
hread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.der=
by.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry]=
 (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (=
MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) authenticate-header =3D Basic realm=3D"Jackr=
abbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) csrf-protection =3D null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) createAbsoluteURI =3D true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServl=
et] (MSC service thread 1-7) resource-path-prefix =3D '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) authenticate-header =3D Basic realm=3D"Jackr=
abbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) csrf-protection =3D null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) createAbsoluteURI =3D true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: R=
egistering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] =
(MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standal=
one/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] =
(MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standal=
one/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) SecurityManager =3D class org.apache.jackrabbit.core.Defaul=
tSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] =
(MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standal=
one/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (M=
SC service thread 1-12) init: use Repository Login-Configuration for Jackra=
bbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service threa=
d 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC =
service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standa=
lone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe=
/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service threa=
d 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Ad=
min console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JB=
oss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 servic=
es (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) =
JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) =
JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> <?xml version=3D"1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.=
0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implie=
d.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//=
EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSys=
tem">
>         <param name=3D"path" value=3D"${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class=3D"org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName=3D"Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManage=
r interface
>         -->
>         <SecurityManager class=3D"org.apache.jackrabbit.core.DefaultSecur=
ityManager" workspaceName=3D"security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager i=
nterface
>             -->
>             <!-- <WorkspaceAccessManager class=3D"..."/> -->
>             <!-- <param name=3D"config" value=3D"${rep.home}/security.xml=
"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class=3D"org.apache.jackrabbit.core.security.Defau=
ltAccessManager">
>             <!-- <param name=3D"config" value=3D"${rep.home}/access.xml"/=
> -->
>         </AccessManager>
>         <LoginModule class=3D"org.apache.jackrabbit.core.security.authent=
ication.DefaultLoginModule">
>            <!--=20
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name=3D"anonymousId" value=3D"anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is=
 'admin')
>             -->
>            <param name=3D"adminId" value=3D"admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspa=
ce
>     -->
>     <Workspaces rootPath=3D"${rep.home}/workspaces" defaultWorkspace=3D"d=
efault"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name=3D"${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class=3D"org.apache.jackrabbit.core.fs.local.LocalFil=
eSystem">
>             <param name=3D"path" value=3D"${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager inter=
face
>         -->
>         <PersistenceManager class=3D"org.apache.jackrabbit.core.persisten=
ce.pool.DerbyPersistenceManager">
>           <param name=3D"url" value=3D"jdbc:derby:${wsp.home}/db;create=
=3Dtrue"/>
>           <param name=3D"schemaObjectPrefix" value=3D"${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class=3D"org.apache.jackrabbit.core.query.lucene.Sea=
rchIndex">
>             <param name=3D"path" value=3D"${wsp.home}/index"/>
>             <param name=3D"supportHighlighting" value=3D"true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath=3D"${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respe=
ctive
>             persistence manager
>         -->
>         <FileSystem class=3D"org.apache.jackrabbit.core.fs.local.LocalFil=
eSystem">
>             <param name=3D"path" value=3D"${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting =
version state.
>             Please note that the current versioning implementation is bas=
ed on
>             a 'normal' persistence manager, but this could change in futu=
re
>             implementations.
>         -->
>         <PersistenceManager class=3D"org.apache.jackrabbit.core.persisten=
ce.pool.DerbyPersistenceManager">
>           <param name=3D"url" value=3D"jdbc:derby:${rep.home}/version/db;=
create=3Dtrue"/>
>           <param name=3D"schemaObjectPrefix" value=3D"version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class=3D"org.apache.jackrabbit.core.query.lucene.SearchI=
ndex">
>         <param name=3D"path" value=3D"${rep.home}/repository/index"/>
>         <param name=3D"supportHighlighting" value=3D"true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id=3D"node1">
>         <Journal class=3D"org.apache.jackrabbit.core.journal.MemoryJourna=
l"/>
>     </Cluster>
> </Repository>
> web.xml
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> <?xml version=3D"1.0" encoding=3D"UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application =
2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- R E P O S I T O R Y   S E R V L E T                             =
       -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to=
 access
>             the repository. The repository can be accessed via JNDI, RMI =
or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet=
</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via =
JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param=
-value>
>         </init-param>=20
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be hand=
led.
>                 1) If this init-param is missing, a 401 response is gener=
ated.
>                    This is suiteable for clients (eg. webdav clients) for=
 which
>                    sending a proper authorization header is not possible =
if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null lo=
gin
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the re=
spective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be adde=
d to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyIn=
itialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>        =20
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>        =20
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- W E B D A V  S E R V L E T                                      =
        -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the reposito=
ry.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet=
</servlet-class>
> =09<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</ser=
vlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repo=
sitory.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authentica=
te' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm=3D"Jackrabbit Webdav Server"</param-=
value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources suc=
h as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- W E B D A V  S E R V E R  S E R V L E T                         =
         -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the reposito=
ry.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerSer=
vlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingSe=
rvlet</servlet-class> -->
>  =09<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be hand=
led.
>                 1) If this init-param is missing, a 401 response is gener=
ated.
>                    This is suitable for clients (eg. WebDAV clients) for =
which
>                    sending a proper authorization header is not possible =
if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null lo=
gin
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcre=
dentials'
>                    java.jcr.GuestCredentials are used to login to the rep=
ository.
>                 4) If this init-param has a 'user:password' value, the re=
spective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authentica=
te' header
>         -->
>        =20
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm=3D"Jackrabbit Webdav Server"</param-=
value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>        =20
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repo=
sitory.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for =
JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory=
 name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node t=
ype names to default depth.</description>
>         </init-param>       =20
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- R M I   B I N D I N G   S E R V L E T                           =
       -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingSe=
rvlet</servlet-class>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- S E R V L E T   M A P P I N G                                   =
       -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.=
0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implie=
d.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=3Dusr/local/share/jboss/standalone/configuration/reposi=
tory/repository.xml
> repository.home=3Dusr/local/share/jboss/standalone/configuration/reposito=
ry
> repository.name=3Drepository
> # RMI Settings
> #rmi.enabled=3Dtrue
> #rmi.port=3D1199
> #rmi.host=3Dlocalhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=3D//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=3Dtrue
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=3Djava:/jca/DocumentStore
> #jndi.name=3D${repository.name}
> #jndi.name=3Drepository
> java.naming.provider.url=3Djnp://localhost:1099
> java.naming.factory.initial=3Dorg.apache.jackrabbit.core.jndi.provider.Du=
mmyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> !SESSION 2013-09-18 06:46:39.948 ----------------------------------------=
-------
> eclipse.buildId=3Dunknown
> java.version=3D1.7.0_09
> java.vendor=3DOracle Corporation
> BootLoader constants: OS=3Dlinux, ARCH=3Dx86, WS=3Dgtk, NL=3Dde_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> =09at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> =09at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(Mod=
alContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:120)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:51)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:45)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:904)
> =09at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceMan=
ager.java:695)
> =09at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWrita=
ble(ItemStateValidator.java:199)
> =09at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:83=
7)
> =09at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown =
Source)
> =09... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Err=
or
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getRespon=
seException(DavMethodBase.java:165)
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSucc=
ess(DavMethodBase.java:174)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:876)
> =09... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:120)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:51)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:45)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:904)
> =09at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceMan=
ager.java:695)
> =09at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWrita=
ble(ItemStateValidator.java:199)
> =09at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:83=
7)
> =09at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown =
Source)
> =09at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> =09at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(Mod=
alContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Err=
or
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getRespon=
seException(DavMethodBase.java:165)
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSucc=
ess(DavMethodBase.java:174)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:876)
> =09... 6 more
> JBOSS Failure Log (After "add mixin")
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImp=
l] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[d=
efault-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-=
127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw excep=
tion: java.lang.IllegalArgumentException: Unexpected format of resource pat=
h: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jac=
krabbit-webapp-2.6.3)
> =09at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositor=
yPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLoca=
torImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webd=
av-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.=
addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:=
]
> =09at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.=
init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.version.report.ReportType.createReport=
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(Abstrac=
tResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(Wo=
rkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(=
AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(A=
bstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(A=
bstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> =09at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss=
-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> =09at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Ap=
plicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.ApplicationFilterChain.doFilter(Applicatio=
nFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrappe=
rValve.java:275) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.StandardContextValve.invoke(StandardContex=
tValve.java:161) [jbossweb-7.0.13.Final.jar:]
> =09at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(Se=
curityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1=
.Final]
> =09at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve=
.java:155) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve=
.java:102) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineV=
alve.java:109) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.j=
ava:368) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.coyote.http11.Http11Processor.process(Http11Processor.ja=
va:877) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.pro=
cess(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:=
930) [jbossweb-7.0.13.Final.jar:]
> =09at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38442-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:02:00 2013
Return-Path: <dev-return-38442-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BDC0105A2
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:02:00 +0000 (UTC)
Received: (qmail 2624 invoked by uid 500); 18 Sep 2013 21:01:58 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 1665 invoked by uid 500); 18 Sep 2013 21:01:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 1599 invoked by uid 99); 18 Sep 2013 21:01:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:01:52 +0000
Date: Wed, 18 Sep 2013 21:01:52 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157690.1379538112310@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Comment Edited] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137708=
09#comment-13770809 ]=20

Andreas Tully edited comment on JCR-3668 at 9/18/13 9:00 PM:
-------------------------------------------------------------

Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackra=
bbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3)
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addRespo=
nses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
               =20
      was (Author: andreas.tully):
    Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackra=
bbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3)
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addRespo=
nses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?

Mit freundlichen Gr=C3=BC=C3=9Fen / Best Regards / Cordialmente

Andreas Tully
Client/Server - Architektur- und Implementierungsverantwortung (I.LVD 21)

DB Systel GmbH
J=C3=BCrgen-Ponto-Platz 1, 60329 Frankfurt a. Main
Tel. +49 69 265-18641, intern 955-18641

Sitz der Gesellschaft: Frankfurt am Main
Registergericht: Frankfurt am Main, HRB 78707
USt-IdNr.: DE252204770
Gesch=C3=A4ftsf=C3=BChrer: Detlef Exner (Vorsitzender), Dr. Burkhard Klanke=
, Dr.
Klaus R=C3=BCffler
Vorsitzender des Aufsichtsrates: Dr. Rolf Kran=C3=BCchel


  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |"Torsten Witte (JIRA)" <jira@apache.org>                                =
                                                                          |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |andreas.tully@deutschebahn.com                                          =
                                                                          |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |18.09.2013 15:29                                                        =
                                                                          |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|
  |[jira] [Commented] (JCR-3668) Incorrect "wspPath" given to DavLocatorFac=
toryImpl.getRepositoryPath()                                              |
  >------------------------------------------------------------------------=
--------------------------------------------------------------------------|






    [
https://issues.apache.org/jira/browse/JCR-3668?page=3Dcom.atlassian.jira.pl=
ugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D13770765#com=
ment-13770765
 ]

Torsten Witte commented on JCR-3668:
------------------------------------

{quote}
Currently, I cannot really judge, wether this is a bug in Toromiro or
Jackrabbit...
{quote}

The {{AddMixinAction}} of Toromiro tries to find all mixin types that can
be added to the current node.
That is done by getting all repository node types and check with
{{node.canAddMixin(nodeTypeName)}}.
In practice, the Toromiro stack shows that it just calls
{{org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin()}}.
Maybe it would help, if Toromiro just checks for mixin types only, instead
of all node types. This improvement will be available in the next Toromiro
release (version 1.12.).
But Jackrabbit should handle with invalid mixin type names, too.

{noformat}
!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run
(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate
(ExceptionConverter.java:120)
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate
(ExceptionConverter.java:51)
at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate
(ExceptionConverter.java:45)
at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:904)
at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead
(WorkspaceManager.java:695)
at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable
(ItemStateValidator.java:199)
at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown
Source)
... 2 more
{noformat}

jboss.log, repository.xml, toromiro.log, web.xml
everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via
subshell Toromiro) can be established without errors.
work fine, but execution of e.g.  "add mixin" or "Import XML" will fail
with an internal server error...
workspace path given to DavLocatorFactoryImpl.getRepositoryPath().
session with a correct workspace path...)
Jackrabbit...
-Djboss.bind.address=3Dlocalhost -Djboss.bind.address.management=3Dlocalhos=
t
-Djava.rmi.server.hostname=3Dlocalhost
-XX:MaxPermSize=3D256m -Djava.net.preferIPv4Stack=3Dtrue
-Dorg.jboss.resolver.warning=3Dtrue -Dsun.rmi.dgc.client.gcInterval=3D36000=
00
-Dsun.rmi.dgc.server.gcInterval=3D3600000
-Djboss.modules.system.pkgs=3Dorg.jboss.byteman -Djava.awt.headless=3Dtrue
-Djboss.server.default.config=3Dstandalone.xml
"Brontes" starting
management service using socket-binding (management-http)
3.0.3.GA
log handlers
-- 26) JBAS016200: Activating ConfigAdmin Subsystem
38) JBAS011800: Activating Naming Subsystem
Remoting version 3.2.3.GA
-- 48) JBAS015537: Activating WebServices Extension
Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
44) JBAS013101: Activating Security Subsystem
JBAS011940: Activating OSGi Subsystem
JBAS013100: Current PicketBox version=3D4.0.7.Final
JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
JBAS011802: Starting Naming Service
1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
(ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant
driver class org.h2.Driver (version 1.3)
(ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant
driver class com.mysql.jdbc.Driver (version 5.1)
thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
(MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
service thread 1-9) JBAS010400: Bound data source
[java:jboss/datasources/ExampleDS]
service thread 1-13) JBAS010400: Bound data source
[java:jboss/datasources/MySqlDS]
thread 1-15) JBAS015012: Started FileSystemDeploymentService for
directory /usr/local/share/jboss/standalone/deployments
JBAS017100: Listening on localhost/127.0.0.1:4447
JBAS017100: Listening on localhost/127.0.0.1:9999
1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
1-3) Class Path entry derbyLocale_cs.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_de_DE.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_es.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_fr.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_hu.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_it.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_ja_JP.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_ko_KR.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_pl.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_pt_BR.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_ru.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_zh_CN.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
1-3) Class Path entry derbyLocale_zh_TW.jar in
"/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to
a valid jar for a Class-Path reference.
thread 1-5) JBAS010403: Deploying JDBC-compliant driver class
org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
service thread 1-12) Starting repository...
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/repository
(MSC service thread 1-12) no custom node type definitions found
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/version
(MSC service thread 1-7) RepositoryAccessServlet initialized.
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) authenticate-header =3D Basic realm=3D"Jackrabbit Webdav Server=
"
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) csrf-protection =3D null
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) createAbsoluteURI =3D true
[org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service
thread 1-7) resource-path-prefix =3D '/repository'
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) authenticate-header =3D Basic realm=3D"Jackrabbit Webdav Server=
"
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) csrf-protection =3D null
[org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service
thread 1-7) createAbsoluteURI =3D true
Registering web context: /jackrabbit-webapp-2.6.3
service thread 1-12) initializing workspace 'default'...
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/workspaces/=
default

(MSC service thread 1-12) Index
initialized: /usr/local/share/jboss/standalone/configuration/repository/rep=
ository/index
 Version: 3
(MSC service thread 1-12) Index
initialized: /usr/local/share/jboss/standalone/configuration/repository/wor=
kspaces/default/index
 Version: 3
service thread 1-12) workspace 'default' initialized
service thread 1-12) SecurityManager =3D class
org.apache.jackrabbit.core.DefaultSecurityManager
service thread 1-12) initializing workspace 'security'...
(MSC service thread 1-12) LocalFileSystem initialized at
path /usr/local/share/jboss/standalone/configuration/repository/workspaces/=
security

(MSC service thread 1-12) Index
initialized: /usr/local/share/jboss/standalone/configuration/repository/wor=
kspaces/security/index
 Version: 3
service thread 1-12) workspace 'security' initialized
(MSC service thread 1-12) init: use Repository Login-Configuration for
Jackrabbit
service thread 1-12) Repository started (5304ms)
thread 1-12) JBAS010406: Registered connection factory
java:/jca/DocumentStore
service thread 1-12) IJ020002: Deployed:
file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrab=
bit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/

thread 1-13) JBAS010401: Bound JCA ConnectionFactory
[java:/jca/DocumentStore]
Admin console listening on http://127.0.0.1:9990
JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298
services (78 services are passive or on-demand)
JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
more
2.0
implied.
2.0//EN"
org.apache.jackrabbit.core.config.RepositoryConfigTest.java>      -> -->
state
class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSystem">
JackrabbitSecurityManager interface
class=3D"org.apache.jackrabbit.core.DefaultSecurityManager"
workspaceName=3D"security">
interface
-->
class=3D"org.apache.jackrabbit.core.security.DefaultAccessManager">
-->
class=3D"org.apache.jackrabbit.core.security.authentication.DefaultLoginMod=
ule">

default value)
param is missing is 'admin')
default workspace
defaultWorkspace=3D"default"/>
class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSystem">
interface
class=3D"org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManage=
r">

{wsp.home}/db;create=3Dtrue"/>
class=3D"org.apache.jackrabbit.core.query.lucene.SearchIndex">
for the respective
class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSystem">
for persisting version state.
based on
future
class=3D"org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManage=
r">

{rep.home}/version/db;create=3Dtrue"/>
class=3D"org.apache.jackrabbit.core.query.lucene.SearchIndex">
class=3D"org.apache.jackrabbit.core.journal.MemoryJournal"/>
2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
access
or Webdav.
<servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-=
class>

<param-name>repository.context.attribute.name</param-name>>
<param-value>javax.jcr.Repository</param-value>>         </init-param> -->
JNDI</description>
<param-value>org.jboss.as.naming.InitialContextFactory</param-value>
<param-name>missing-auth-mapping</param-name>>
<param-value></param-value>>             <description>>
Defines how a missing authorization header should be handled.>
1) If this init-param is missing, a 401 response is generated.>
This is suiteable for clients (eg. webdav clients) for which>
sending a proper authorization header is not possible if the>
server never sent a 401.>                 2) If this init-param is present
with an empty value,>                    null-credentials are returned,
thus forcing an null login>                    on the repository.>
3) If this init-param has a 'user:password' value, the respective>
simple credentials are generated.>             </description>>
</init-param>-->
initial context
added to the initial context environment).
<param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFa=
ctory</param-value>

<param-value>///jackrabbit.repository</param-value>>
<description>The URI for the RMI connection.</description>>
</init-param>-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
repository.
<servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-clas=
s>

<servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class=
>
 -->
repository.
'WWW-Authenticate' header
Server"</param-value>
resources such as:
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
repository.
<servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-c=
lass>

<servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class=
>
 -->
<param-name>missing-auth-mapping</param-name>>
<param-value></param-value>>             <description>>
Defines how a missing authorization header should be handled.>
1) If this init-param is missing, a 401 response is generated.>
This is suitable for clients (eg. WebDAV clients) for which>
sending a proper authorization header is not possible if the>
server never sent a 401.>                 2) If this init-param is present
with an empty value,>                    null-credentials are returned,
thus forcing an null login>                    on the repository.>
3) If this init-param is present with the value 'guestcredentials'>
java.jcr.GuestCredentials are used to login to the repository.>
4) If this init-param has a 'user:password' value, the respective>
simple credentials are generated.>             </description>>
</init-param> -->
'WWW-Authenticate' header
<param-name>authenticate-header</param-name>>
<param-value>Basic realm=3D"Jackrabbit Webdav Server"</param-value>>
<description>>                 Defines the value of the 'WWW-Authenticate'
header.>             </description>>         </init-param> -->
repository.
JcrRemotingServlet temporary files (default: "jackrabbit")</description>
name (under home, default: "tmp")</description>
type names to default depth.</description>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
<servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</s=
ervlet-class>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
-->
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D -->
2.0
implied.
repository.config=3Dusr/local/share/jboss/standalone/configuration/reposito=
ry/repository.xml

java.naming.factory.initial=3Dorg.apache.jackrabbit.core.jndi.provider.Dumm=
yInitialContextFactory

-----------------------------------------------
Source)
$ModalContextThread.run(ModalContext.java:121)
(ExceptionConverter.java:120)
(ExceptionConverter.java:51)
(ExceptionConverter.java:45)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:904)
(WorkspaceManager.java:695)
org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable
(ItemStateValidator.java:199)
(NodeImpl.java:837)
(Unknown Source)
Error
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseExcept=
ion
(DavMethodBase.java:165)
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess
(DavMethodBase.java:174)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:876)
(ExceptionConverter.java:120)
(ExceptionConverter.java:51)
(ExceptionConverter.java:45)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:904)
(WorkspaceManager.java:695)
org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable
(ItemStateValidator.java:199)
(NodeImpl.java:837)
(Unknown Source)
Source)
$ModalContextThread.run(ModalContext.java:121)
Error
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseExcept=
ion
(DavMethodBase.java:165)
org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess
(DavMethodBase.java:174)
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted
(RepositoryServiceImpl.java:876)
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackra=
bbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg
(workspace: /jackrabbit-webapp-2.6.3)
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addRespo=
nses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA
administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira




                 =20
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.lo=
g, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), ever=
ything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell=
 Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to wor=
k fine, but execution of e.g.  "add mixin" or "Import XML" will fail with a=
n internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong wo=
rkspace path given to DavLocatorFactoryImpl.getRepositoryPath().=20
> (Which obviously was already called before on other commands in the same =
session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jac=
krabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind=
.address=3Dlocalhost -Djboss.bind.address.management=3Dlocalhost -Djava.rmi=
.server.hostname=3Dlocalhost
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPerm=
Size=3D256m -Djava.net.preferIPv4Stack=3Dtrue -Dorg.jboss.resolver.warning=
=3Dtrue -Dsun.rmi.dgc.client.gcInterval=3D3600000 -Dsun.rmi.dgc.server.gcIn=
terval=3D3600000 -Djboss.modules.system.pkgs=3Dorg.jboss.byteman -Djava.awt=
.headless=3Dtrue -Djboss.server.default.config=3Dstandalone.xml
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Bront=
es" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http manage=
ment service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.G=
A
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap =
log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool =
-- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38=
) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Re=
moting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool =
-- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Th=
read Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- =
44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) =
JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS=
013100: Current PicketBox version=3D4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS=
010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011=
802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16=
) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (Serve=
rService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver cla=
ss org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (Serve=
rService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver=
 class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service=
 thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] =
(MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC s=
ervice thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/Ex=
ampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC s=
ervice thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/M=
ySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service =
thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory =
/usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS0=
17100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS0=
17100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1=
-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1=
-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.r=
ar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path re=
ference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1=
-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.=
3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path=
 reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service t=
hread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.der=
by.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry]=
 (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (=
MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) authenticate-header =3D Basic realm=3D"Jackr=
abbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) csrf-protection =3D null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) createAbsoluteURI =3D true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServl=
et] (MSC service thread 1-7) resource-path-prefix =3D '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) authenticate-header =3D Basic realm=3D"Jackr=
abbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) csrf-protection =3D null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavSer=
vlet] (MSC service thread 1-7) createAbsoluteURI =3D true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: R=
egistering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] =
(MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standal=
one/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] =
(MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standal=
one/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) SecurityManager =3D class org.apache.jackrabbit.core.Defaul=
tSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] =
(MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/sh=
are/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] =
(MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standal=
one/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (M=
SC service thread 1-12) init: use Repository Login-Configuration for Jackra=
bbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC servi=
ce thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service threa=
d 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC =
service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standa=
lone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe=
/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service threa=
d 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Ad=
min console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JB=
oss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 servic=
es (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) =
JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) =
JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> <?xml version=3D"1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.=
0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implie=
d.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//=
EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class=3D"org.apache.jackrabbit.core.fs.local.LocalFileSys=
tem">
>         <param name=3D"path" value=3D"${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class=3D"org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName=3D"Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManage=
r interface
>         -->
>         <SecurityManager class=3D"org.apache.jackrabbit.core.DefaultSecur=
ityManager" workspaceName=3D"security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager i=
nterface
>             -->
>             <!-- <WorkspaceAccessManager class=3D"..."/> -->
>             <!-- <param name=3D"config" value=3D"${rep.home}/security.xml=
"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class=3D"org.apache.jackrabbit.core.security.Defau=
ltAccessManager">
>             <!-- <param name=3D"config" value=3D"${rep.home}/access.xml"/=
> -->
>         </AccessManager>
>         <LoginModule class=3D"org.apache.jackrabbit.core.security.authent=
ication.DefaultLoginModule">
>            <!--=20
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name=3D"anonymousId" value=3D"anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is=
 'admin')
>             -->
>            <param name=3D"adminId" value=3D"admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspa=
ce
>     -->
>     <Workspaces rootPath=3D"${rep.home}/workspaces" defaultWorkspace=3D"d=
efault"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name=3D"${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class=3D"org.apache.jackrabbit.core.fs.local.LocalFil=
eSystem">
>             <param name=3D"path" value=3D"${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager inter=
face
>         -->
>         <PersistenceManager class=3D"org.apache.jackrabbit.core.persisten=
ce.pool.DerbyPersistenceManager">
>           <param name=3D"url" value=3D"jdbc:derby:${wsp.home}/db;create=
=3Dtrue"/>
>           <param name=3D"schemaObjectPrefix" value=3D"${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class=3D"org.apache.jackrabbit.core.query.lucene.Sea=
rchIndex">
>             <param name=3D"path" value=3D"${wsp.home}/index"/>
>             <param name=3D"supportHighlighting" value=3D"true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath=3D"${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respe=
ctive
>             persistence manager
>         -->
>         <FileSystem class=3D"org.apache.jackrabbit.core.fs.local.LocalFil=
eSystem">
>             <param name=3D"path" value=3D"${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting =
version state.
>             Please note that the current versioning implementation is bas=
ed on
>             a 'normal' persistence manager, but this could change in futu=
re
>             implementations.
>         -->
>         <PersistenceManager class=3D"org.apache.jackrabbit.core.persisten=
ce.pool.DerbyPersistenceManager">
>           <param name=3D"url" value=3D"jdbc:derby:${rep.home}/version/db;=
create=3Dtrue"/>
>           <param name=3D"schemaObjectPrefix" value=3D"version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class=3D"org.apache.jackrabbit.core.query.lucene.SearchI=
ndex">
>         <param name=3D"path" value=3D"${rep.home}/repository/index"/>
>         <param name=3D"supportHighlighting" value=3D"true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id=3D"node1">
>         <Journal class=3D"org.apache.jackrabbit.core.journal.MemoryJourna=
l"/>
>     </Cluster>
> </Repository>
> web.xml
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> <?xml version=3D"1.0" encoding=3D"UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application =
2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- R E P O S I T O R Y   S E R V L E T                             =
       -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to=
 access
>             the repository. The repository can be accessed via JNDI, RMI =
or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet=
</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via =
JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param=
-value>
>         </init-param>=20
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be hand=
led.
>                 1) If this init-param is missing, a 401 response is gener=
ated.
>                    This is suiteable for clients (eg. webdav clients) for=
 which
>                    sending a proper authorization header is not possible =
if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null lo=
gin
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the re=
spective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be adde=
d to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyIn=
itialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>        =20
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>        =20
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- W E B D A V  S E R V L E T                                      =
        -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the reposito=
ry.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet=
</servlet-class>
> =09<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</ser=
vlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repo=
sitory.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authentica=
te' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm=3D"Jackrabbit Webdav Server"</param-=
value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources suc=
h as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- W E B D A V  S E R V E R  S E R V L E T                         =
         -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the reposito=
ry.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerSer=
vlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingSe=
rvlet</servlet-class> -->
>  =09<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be hand=
led.
>                 1) If this init-param is missing, a 401 response is gener=
ated.
>                    This is suitable for clients (eg. WebDAV clients) for =
which
>                    sending a proper authorization header is not possible =
if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null lo=
gin
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcre=
dentials'
>                    java.jcr.GuestCredentials are used to login to the rep=
ository.
>                 4) If this init-param has a 'user:password' value, the re=
spective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authentica=
te' header
>         -->
>        =20
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm=3D"Jackrabbit Webdav Server"</param-=
value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>        =20
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repo=
sitory.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for =
JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory=
 name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node t=
ype names to default depth.</description>
>         </init-param>       =20
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- R M I   B I N D I N G   S E R V L E T                           =
       -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingSe=
rvlet</servlet-class>
>     </servlet>
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <!-- S E R V L E T   M A P P I N G                                   =
       -->
>     <!-- =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D --=
>
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.=
0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implie=
d.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=3Dusr/local/share/jboss/standalone/configuration/reposi=
tory/repository.xml
> repository.home=3Dusr/local/share/jboss/standalone/configuration/reposito=
ry
> repository.name=3Drepository
> # RMI Settings
> #rmi.enabled=3Dtrue
> #rmi.port=3D1199
> #rmi.host=3Dlocalhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=3D//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=3Dtrue
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=3Djava:/jca/DocumentStore
> #jndi.name=3D${repository.name}
> #jndi.name=3Drepository
> java.naming.provider.url=3Djnp://localhost:1099
> java.naming.factory.initial=3Dorg.apache.jackrabbit.core.jndi.provider.Du=
mmyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> !SESSION 2013-09-18 06:46:39.948 ----------------------------------------=
-------
> eclipse.buildId=3Dunknown
> java.version=3D1.7.0_09
> java.vendor=3DOracle Corporation
> BootLoader constants: OS=3Dlinux, ARCH=3Dx86, WS=3Dgtk, NL=3Dde_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> =09at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> =09at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(Mod=
alContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:120)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:51)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:45)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:904)
> =09at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceMan=
ager.java:695)
> =09at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWrita=
ble(ItemStateValidator.java:199)
> =09at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:83=
7)
> =09at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown =
Source)
> =09... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Err=
or
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getRespon=
seException(DavMethodBase.java:165)
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSucc=
ess(DavMethodBase.java:174)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:876)
> =09... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:120)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:51)
> =09at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(Exception=
Converter.java:45)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:904)
> =09at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceMan=
ager.java:695)
> =09at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWrita=
ble(ItemStateValidator.java:199)
> =09at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:83=
7)
> =09at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown =
Source)
> =09at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> =09at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(Mod=
alContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Err=
or
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getRespon=
seException(DavMethodBase.java:165)
> =09at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSucc=
ess(DavMethodBase.java:174)
> =09at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(Repos=
itoryServiceImpl.java:876)
> =09... 6 more
> JBOSS Failure Log (After "add mixin")
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImp=
l] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[d=
efault-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-=
127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw excep=
tion: java.lang.IllegalArgumentException: Unexpected format of resource pat=
h: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jac=
krabbit-webapp-2.6.3)
> =09at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositor=
yPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLoca=
torImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webd=
av-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.=
addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:=
]
> =09at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.=
init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.version.report.ReportType.createReport=
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(Abstrac=
tResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(Wo=
rkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(=
AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(A=
bstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> =09at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(A=
bstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> =09at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss=
-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> =09at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Ap=
plicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.ApplicationFilterChain.doFilter(Applicatio=
nFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrappe=
rValve.java:275) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.StandardContextValve.invoke(StandardContex=
tValve.java:161) [jbossweb-7.0.13.Final.jar:]
> =09at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(Se=
curityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1=
.Final]
> =09at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve=
.java:155) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve=
.java:102) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineV=
alve.java:109) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.j=
ava:368) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.coyote.http11.Http11Processor.process(Http11Processor.ja=
va:877) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.pro=
cess(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> =09at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:=
930) [jbossweb-7.0.13.Final.jar:]
> =09at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38443-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:04:01 2013
Return-Path: <dev-return-38443-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41862105AD
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:04:01 +0000 (UTC)
Received: (qmail 9053 invoked by uid 500); 18 Sep 2013 21:03:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 8999 invoked by uid 500); 18 Sep 2013 21:03:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 8977 invoked by uid 99); 18 Sep 2013 21:03:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:03:52 +0000
Date: Wed, 18 Sep 2013 21:03:52 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157740.1379538232253@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Comment Edited] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13770809#comment-13770809 ] 

Andreas Tully edited comment on JCR-3668 at 9/18/13 9:02 PM:
-------------------------------------------------------------

Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg *(
workspace: /jackrabbit-webapp-2.6.3)*
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                
      was (Author: andreas.tully):
    Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3)
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                  
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38444-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:04:02 2013
Return-Path: <dev-return-38444-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B54D105B3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:04:02 +0000 (UTC)
Received: (qmail 9350 invoked by uid 500); 18 Sep 2013 21:03:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 9108 invoked by uid 500); 18 Sep 2013 21:03:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 9002 invoked by uid 99); 18 Sep 2013 21:03:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:03:53 +0000
Date: Wed, 18 Sep 2013 21:03:53 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157744.1379538233071@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Comment Edited] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13770809#comment-13770809 ] 

Andreas Tully edited comment on JCR-3668 at 9/18/13 9:02 PM:
-------------------------------------------------------------

Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg **(
{color:red} workspace: /jackrabbit-webapp-2.6.3)**
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                
      was (Author: andreas.tully):
    Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg *(
workspace: /jackrabbit-webapp-2.6.3)*
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                  
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38445-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:06:05 2013
Return-Path: <dev-return-38445-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83486105B9
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:06:05 +0000 (UTC)
Received: (qmail 14084 invoked by uid 500); 18 Sep 2013 21:06:02 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 13995 invoked by uid 500); 18 Sep 2013 21:06:01 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 13968 invoked by uid 99); 18 Sep 2013 21:06:00 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:06:00 +0000
Date: Wed, 18 Sep 2013 21:06:00 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157756.1379538360273@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Comment Edited] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13770809#comment-13770809 ] 

Andreas Tully edited comment on JCR-3668 at 9/18/13 9:05 PM:
-------------------------------------------------------------

Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3) <== THIS IS THE PROBLEM I WOULD SEE... THE WORKSPACE IS "DEFAULT" AND NOT "JACKRABBIT-WEBAPP-2.6.3!!!
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                
      was (Author: andreas.tully):
    Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg **(
{color:red} workspace: /jackrabbit-webapp-2.6.3)**
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                  
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38446-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:07:54 2013
Return-Path: <dev-return-38446-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4AC69105BC
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:07:54 +0000 (UTC)
Received: (qmail 15872 invoked by uid 500); 18 Sep 2013 21:07:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 15802 invoked by uid 500); 18 Sep 2013 21:07:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 15788 invoked by uid 99); 18 Sep 2013 21:07:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:07:52 +0000
Date: Wed, 18 Sep 2013 21:07:52 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157758.1379538472070@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Comment Edited] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13770809#comment-13770809 ] 

Andreas Tully edited comment on JCR-3668 at 9/18/13 9:06 PM:
-------------------------------------------------------------

Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3) <== THIS IS THE PROBLEM I WOULD SEE... THE WORKSPACE IS "DEFAULT" AND NOT "JACKRABBIT-WEBAPP-2.6.3"!!!
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                
      was (Author: andreas.tully):
    Hi Torsten,

thanks for the quick reply...
I am not sure, wether your explanation covers the wrong workspace issue
seen here...

JBOSS Failure Log (After "add mixin")
[org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl]
(http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]]
 (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet
JCRWebdavServer threw exception: java.lang.IllegalArgumentException:
Unexpected format of resource
path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (
workspace: /jackrabbit-webapp-2.6.3) <== THIS IS THE PROBLEM I WOULD SEE... THE WORKSPACE IS "DEFAULT" AND NOT "JACKRABBIT-WEBAPP-2.6.3!!!
org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath
(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356)
[jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses
(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init
(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.version.report.ReportType.createReport
(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport
(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport
(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute
(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service
(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
(HttpServlet.java:847)
[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter
(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
org.jboss.as.web.security.SecurityContextAssociationValve.invoke
(SecurityContextAssociationValve.java:153)
[jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
$Http11ConnectionHandler.process(Http11Protocol.java:671)
[jbossweb-7.0.13.Final.jar:]
(JIoEndpoint.java:930) [jbossweb-7.0.13.

jackrabbit-webapp-2.6.3 is not the workspace, what finally leads to the
error in DavLocatorFactoryImpl.getRepositoryPath()...

Could you say anything about this?
                  
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38447-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:07:55 2013
Return-Path: <dev-return-38447-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F039A105BF
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:07:54 +0000 (UTC)
Received: (qmail 16100 invoked by uid 500); 18 Sep 2013 21:07:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 15939 invoked by uid 500); 18 Sep 2013 21:07:53 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 15819 invoked by uid 99); 18 Sep 2013 21:07:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:07:52 +0000
Date: Wed, 18 Sep 2013 21:07:52 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157761.1379538472334@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Updated] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Andreas Tully updated JCR-3668:
-------------------------------

    Description: 
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


  was:
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple WEBDav commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


    
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38448-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:10:00 2013
Return-Path: <dev-return-38448-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A34C105C8
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:10:00 +0000 (UTC)
Received: (qmail 17762 invoked by uid 500); 18 Sep 2013 21:09:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 17721 invoked by uid 500); 18 Sep 2013 21:09:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 17713 invoked by uid 99); 18 Sep 2013 21:09:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:09:53 +0000
Date: Wed, 18 Sep 2013 21:09:53 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157764.1379538593733@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Updated] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Andreas Tully updated JCR-3668:
-------------------------------

    Description: 
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


  was:
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


    
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38449-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:11:57 2013
Return-Path: <dev-return-38449-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEE96105D3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:11:57 +0000 (UTC)
Received: (qmail 22183 invoked by uid 500); 18 Sep 2013 21:11:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 22130 invoked by uid 500); 18 Sep 2013 21:11:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 22121 invoked by uid 99); 18 Sep 2013 21:11:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:11:52 +0000
Date: Wed, 18 Sep 2013 21:11:51 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157766.1379538711908@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Updated] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Andreas Tully updated JCR-3668:
-------------------------------

    Description: 
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a jackrabbit problem for me... 

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


  was:
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit...

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


    
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a jackrabbit problem for me... 
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38450-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 18 21:13:53 2013
Return-Path: <dev-return-38450-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3CD9105E4
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 18 Sep 2013 21:13:53 +0000 (UTC)
Received: (qmail 25559 invoked by uid 500); 18 Sep 2013 21:13:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 25524 invoked by uid 500); 18 Sep 2013 21:13:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 25511 invoked by uid 99); 18 Sep 2013 21:13:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Sep 2013 21:13:52 +0000
Date: Wed, 18 Sep 2013 21:13:52 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.157772.1379538832124@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Updated] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Andreas Tully updated JCR-3668:
-------------------------------

    Description: 
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a Jackrabbit problem for me... 

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


  was:
When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
(Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a jackrabbit problem for me... 

Here all relevant files and excerpts...

JBOSS-Deployment
=====================================
appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/share/jboss

  JAVA: java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"

repository.xml
=====================================
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value="version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository>

web.xml
=====================================
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
<web-app>
    <display-name>Jackrabbit JCR Server</display-name>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <!-- <init-param>
          <param-name>repository.context.attribute.name</param-name>
          <param-value>javax.jcr.Repository</param-value>
        </init-param> -->

        <init-param>
            <param-name>repository-name</param-name>
            <param-value>java:/jca/DocumentStore</param-value>
            <description>Repository Name that is used to retrieve it via JNDI</description>
        </init-param>

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>jnp://localhost:1099</param-value>
        </init-param>

        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
        </init-param> 

       <!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>-->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).

        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value>http://www.apache.org/jackrabbit</param-value>
        </init-param>
        <init-param>
            <param-name>java.naming.factory.initial</param-name>
            <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        
        <!--<init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>-->
        

        <load-on-startup>3</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
            <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JCRWebdavServer</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
             <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
             <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
 	<!-- <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value></param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) If this init-param is missing, a 401 response is generated.
                   This is suitable for clients (eg. WebDAV clients) for which
                   sending a proper authorization header is not possible if the
                   server never sent a 401.
                2) If this init-param is present with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository.
                3) If this init-param is present with the value 'guestcredentials'
                   java.jcr.GuestCredentials are used to login to the repository.
                4) If this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param> -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        
       <!-- <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param> -->
        
        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/server</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>

        <!--
            Init parameters specific for JcrRemotingServlet
        -->
        <!--
        <init-param>
            <param-name>home</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
        </init-param>
        <init-param>
            <param-name>temp-directory</param-name>
            <param-value></param-value>
            <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
        </init-param>
        -->
        <init-param>
            <param-name>batchread-config</param-name>
            <param-value>/WEB-INF/batchread.properties</param-value>
            <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
        </init-param>        

        <load-on-startup>5</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- S E R V L E T   M A P P I N G                                          -->
    <!-- ====================================================================== -->
    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>JCRWebdavServer</servlet-name>
        <url-pattern>/server/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>
</web-app>

bootstrap.properties
=====================================
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# This is the template file for the 'bootstrap.properties' that will
# be placed in the repository home directory (or whatever is specified
# in the "bootstrap-config" init parameter.

# Repository configuration settings (will be adjusted by installer)
repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
repository.home=usr/local/share/jboss/standalone/configuration/repository
repository.name=repository

# RMI Settings
#rmi.enabled=true
#rmi.port=1199
#rmi.host=localhost
# If the URI is not specified, it's composed as follows:
#rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}

# JNDI Settings
# all properties starting with 'java.naming.' will go into the
# environment of the initial context
jndi.enabled=true
# if the name is not specified, it's initialized with the repository.name
jndi.name=java:/jca/DocumentStore
#jndi.name=${repository.name}
#jndi.name=repository
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory

Toromiro Failure Log (After "add mixin")
=====================================
!SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
!MESSAGE Exception occurred
!STACK 0
java.lang.reflect.InvocationTargetException
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	... 2 more
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more
Root exception:
javax.jcr.RepositoryException: Internal Server Error
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
	... 6 more

JBOSS Failure Log (After "add mixin")
=====================================
07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]


    
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a Jackrabbit problem for me... 
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38451-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 19 07:21:12 2013
Return-Path: <dev-return-38451-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E4CF3105AD
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 19 Sep 2013 07:21:12 +0000 (UTC)
Received: (qmail 92874 invoked by uid 500); 19 Sep 2013 07:21:08 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 92792 invoked by uid 500); 19 Sep 2013 07:20:57 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 92772 invoked by uid 99); 19 Sep 2013 07:20:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Sep 2013 07:20:52 +0000
Date: Thu, 19 Sep 2013 07:20:52 +0000 (UTC)
From: "Torsten Witte (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.160503.1379575252486@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Commented] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13771655#comment-13771655 ] 

Torsten Witte commented on JCR-3668:
------------------------------------

Hi, Andreas!

I just took a look at the Toromiro side. The wrong workspace seems to be a Jackrabbit problem.
                
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a Jackrabbit problem for me... 
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38452-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 19 09:20:08 2013
Return-Path: <dev-return-38452-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89C56107FB
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 19 Sep 2013 09:20:08 +0000 (UTC)
Received: (qmail 40973 invoked by uid 500); 19 Sep 2013 09:20:05 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 38449 invoked by uid 500); 19 Sep 2013 09:19:56 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 38398 invoked by uid 99); 19 Sep 2013 09:19:53 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Sep 2013 09:19:53 +0000
Date: Thu, 19 Sep 2013 09:19:53 +0000 (UTC)
From: "Andreas Tully (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.161065.1379582393500@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Commented] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13771723#comment-13771723 ] 

Andreas Tully commented on JCR-3668:
------------------------------------

Hey Torsten!

Thanks for the effort...
That is also my suspicion...

I hope this issue here will be addressed and there will be fix available for this bug in jackrabbit soon...

Regards,

Andreas
                
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a Jackrabbit problem for me... 
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38453-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 19 13:24:05 2013
Return-Path: <dev-return-38453-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 625F510DBE
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 19 Sep 2013 13:24:05 +0000 (UTC)
Received: (qmail 76891 invoked by uid 500); 19 Sep 2013 13:24:02 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 76837 invoked by uid 500); 19 Sep 2013 13:23:55 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 76703 invoked by uid 99); 19 Sep 2013 13:23:52 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Sep 2013 13:23:52 +0000
Date: Thu, 19 Sep 2013 13:23:52 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12628689.1358850448354.161812.1379597032781@arcas>
In-Reply-To: <JIRA.12628689.1358850448354@arcas>
References: <JIRA.12628689.1358850448354@arcas>
Subject: [jira] [Updated] (JCR-3495) Unregister from PrivilegeRegistry and
 NodeTypeRegistry on Session.logout()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3495?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Alex Parvulescu updated JCR-3495:
---------------------------------

    Fix Version/s: 2.4.5
    
> Unregister from PrivilegeRegistry and NodeTypeRegistry on Session.logout()
> --------------------------------------------------------------------------
>
>                 Key: JCR-3495
>                 URL: https://issues.apache.org/jira/browse/JCR-3495
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: nodetype, security
>            Reporter: Marcel Reutegger
>            Priority: Minor
>             Fix For: 2.4.5, 2.6.1, 2.7
>
>         Attachments: JCR-3495.patch
>
>
> PrivilegeRegistry and NodeTypeRegistry contains weak references to a session even if the session is explicitly logged out. While PrivilegeRegistry is designed that way and currently does not allow a client to unregister a listener, the NodeTypeRegistry does have a method to unregister, but it is not used by NodeTypeManagerImpl.
> This puts extra load on the finalizer and should be avoided.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38454-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 19 13:50:18 2013
Return-Path: <dev-return-38454-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2FD5710E70
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 19 Sep 2013 13:50:18 +0000 (UTC)
Received: (qmail 32175 invoked by uid 500); 19 Sep 2013 13:50:02 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 31961 invoked by uid 500); 19 Sep 2013 13:49:56 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 31635 invoked by uid 99); 19 Sep 2013 13:49:54 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Sep 2013 13:49:54 +0000
Date: Thu, 19 Sep 2013 13:49:54 +0000 (UTC)
From: "Alex Parvulescu (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12628689.1358850448354.162016.1379598594087@arcas>
In-Reply-To: <JIRA.12628689.1358850448354@arcas>
References: <JIRA.12628689.1358850448354@arcas>
Subject: [jira] [Commented] (JCR-3495) Unregister from PrivilegeRegistry and
 NodeTypeRegistry on Session.logout()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3495?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13771903#comment-13771903 ] 

Alex Parvulescu commented on JCR-3495:
--------------------------------------

backported to 2.4 with rev 1524732.
                
> Unregister from PrivilegeRegistry and NodeTypeRegistry on Session.logout()
> --------------------------------------------------------------------------
>
>                 Key: JCR-3495
>                 URL: https://issues.apache.org/jira/browse/JCR-3495
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: nodetype, security
>            Reporter: Marcel Reutegger
>            Priority: Minor
>             Fix For: 2.4.5, 2.6.1, 2.7
>
>         Attachments: JCR-3495.patch
>
>
> PrivilegeRegistry and NodeTypeRegistry contains weak references to a session even if the session is explicitly logged out. While PrivilegeRegistry is designed that way and currently does not allow a client to unregister a listener, the NodeTypeRegistry does have a method to unregister, but it is not used by NodeTypeManagerImpl.
> This puts extra load on the finalizer and should be avoided.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38457-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 23 15:16:58 2013
Return-Path: <dev-return-38457-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70C9E10B46
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 23 Sep 2013 15:16:58 +0000 (UTC)
Received: (qmail 69980 invoked by uid 500); 23 Sep 2013 15:16:27 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 69842 invoked by uid 500); 23 Sep 2013 15:16:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 69393 invoked by uid 99); 23 Sep 2013 15:16:06 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Sep 2013 15:16:06 +0000
Date: Mon, 23 Sep 2013 15:16:06 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12644283.1366781418311.3014.1379949366037@arcas>
In-Reply-To: <JIRA.12644283.1366781418311@arcas>
References: <JIRA.12644283.1366781418311@arcas>
Subject: [jira] [Updated] (JCR-3582) Unable to create nodes with whitespace
 chars != ASCII SP
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3582?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

Julian Reschke updated JCR-3582:
--------------------------------

    Fix Version/s: 2.7.2
                   2.6.4
   =20
> Unable to create nodes with whitespace chars !=3D ASCII SP
> --------------------------------------------------------
>
>                 Key: JCR-3582
>                 URL: https://issues.apache.org/jira/browse/JCR-3582
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.6.3, 2.7.1
>            Reporter: Abhinav Mathur
>            Assignee: Julian Reschke
>            Priority: Trivial
>             Fix For: 2.6.4, 2.7.2
>
>
> when trying to create a node with double byte space in name,following err=
or is thrown=20
> Exception in thread "main" javax.jcr.RepositoryException: Failed to resol=
ve path 2byte=E3=80=80space.jpg relative to node /
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:65)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:1)
>        at org.apache.jackrabbit.core.session.SessionState.perform(Session=
State.java:216)
>        at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
>        at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.ja=
va:1814)
>        at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1766)
>        at Test.main(Test.java:29)
> Caused by: org.apache.jackrabbit.spi.commons.conversion.MalformedPathExce=
ption: '2byte=E3=80=80space.jpg' is not a valid path. Whitespace not a allo=
wed in name.
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:393)
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:122)
>        at org.apache.jackrabbit.spi.commons.conversion.ParsingPathResolve=
r.getQPath(ParsingPathResolver.java:90)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:98)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:77)
>        at org.apache.jackrabbit.spi.commons.conversion.DefaultNamePathRes=
olver.getQPath(DefaultNamePathResolver.java:82)
>        at org.apache.jackrabbit.core.SessionImpl.getQPath(SessionImpl.jav=
a:648)
>        at org.apache.jackrabbit.core.session.SessionContext.getQPath(Sess=
ionContext.java:338)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:63)
>        ... 6 more
> This can be reproduced by following code
> public static void main(String[] args) throws Exception {
>               Repository repository =3D new TransientRepository();
>               Session session =3D repository.login(new SimpleCredentials(=
"username",
>                            "password".toCharArray()));
>               try {
>                      Node root =3D session.getRootNode();
>                     =20
>                      // Store content
>                      Node hello =3D root.addNode("2byte=E3=80=80space.jpg=
");
>              =20
>                      session.save();
>               } finally {
>                      session.logout();
>               }
>        }
> I am using jackrabbit-2.6.0

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38456-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 23 15:16:58 2013
Return-Path: <dev-return-38456-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 950DD10B48
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 23 Sep 2013 15:16:58 +0000 (UTC)
Received: (qmail 70127 invoked by uid 500); 23 Sep 2013 15:16:32 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 69817 invoked by uid 500); 23 Sep 2013 15:16:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 69355 invoked by uid 99); 23 Sep 2013 15:16:04 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Sep 2013 15:16:04 +0000
Date: Mon, 23 Sep 2013 15:16:04 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12644283.1366781418311.3006.1379949364433@arcas>
In-Reply-To: <JIRA.12644283.1366781418311@arcas>
References: <JIRA.12644283.1366781418311@arcas>
Subject: [jira] [Updated] (JCR-3582) Unable to create nodes with whitespace
 chars != ASCII SP
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3582?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

Julian Reschke updated JCR-3582:
--------------------------------

    Priority: Trivial  (was: Major)
   =20
> Unable to create nodes with whitespace chars !=3D ASCII SP
> --------------------------------------------------------
>
>                 Key: JCR-3582
>                 URL: https://issues.apache.org/jira/browse/JCR-3582
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Abhinav Mathur
>            Assignee: Julian Reschke
>            Priority: Trivial
>
> when trying to create a node with double byte space in name,following err=
or is thrown=20
> Exception in thread "main" javax.jcr.RepositoryException: Failed to resol=
ve path 2byte=E3=80=80space.jpg relative to node /
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:65)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:1)
>        at org.apache.jackrabbit.core.session.SessionState.perform(Session=
State.java:216)
>        at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
>        at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.ja=
va:1814)
>        at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1766)
>        at Test.main(Test.java:29)
> Caused by: org.apache.jackrabbit.spi.commons.conversion.MalformedPathExce=
ption: '2byte=E3=80=80space.jpg' is not a valid path. Whitespace not a allo=
wed in name.
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:393)
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:122)
>        at org.apache.jackrabbit.spi.commons.conversion.ParsingPathResolve=
r.getQPath(ParsingPathResolver.java:90)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:98)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:77)
>        at org.apache.jackrabbit.spi.commons.conversion.DefaultNamePathRes=
olver.getQPath(DefaultNamePathResolver.java:82)
>        at org.apache.jackrabbit.core.SessionImpl.getQPath(SessionImpl.jav=
a:648)
>        at org.apache.jackrabbit.core.session.SessionContext.getQPath(Sess=
ionContext.java:338)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:63)
>        ... 6 more
> This can be reproduced by following code
> public static void main(String[] args) throws Exception {
>               Repository repository =3D new TransientRepository();
>               Session session =3D repository.login(new SimpleCredentials(=
"username",
>                            "password".toCharArray()));
>               try {
>                      Node root =3D session.getRootNode();
>                     =20
>                      // Store content
>                      Node hello =3D root.addNode("2byte=E3=80=80space.jpg=
");
>              =20
>                      session.save();
>               } finally {
>                      session.logout();
>               }
>        }
> I am using jackrabbit-2.6.0

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38455-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 23 15:16:58 2013
Return-Path: <dev-return-38455-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD48A10B49
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 23 Sep 2013 15:16:58 +0000 (UTC)
Received: (qmail 70030 invoked by uid 500); 23 Sep 2013 15:16:29 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 69545 invoked by uid 500); 23 Sep 2013 15:16:11 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 69377 invoked by uid 99); 23 Sep 2013 15:16:05 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Sep 2013 15:16:05 +0000
Date: Mon, 23 Sep 2013 15:16:05 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12644283.1366781418311.3011.1379949365426@arcas>
In-Reply-To: <JIRA.12644283.1366781418311@arcas>
References: <JIRA.12644283.1366781418311@arcas>
Subject: [jira] [Updated] (JCR-3582) Unable to create nodes with whitespace
 chars != ASCII SP
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3582?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

Julian Reschke updated JCR-3582:
--------------------------------

    Affects Version/s: 2.6.3
                       2.7.1
   =20
> Unable to create nodes with whitespace chars !=3D ASCII SP
> --------------------------------------------------------
>
>                 Key: JCR-3582
>                 URL: https://issues.apache.org/jira/browse/JCR-3582
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.6.3, 2.7.1
>            Reporter: Abhinav Mathur
>            Assignee: Julian Reschke
>            Priority: Trivial
>
> when trying to create a node with double byte space in name,following err=
or is thrown=20
> Exception in thread "main" javax.jcr.RepositoryException: Failed to resol=
ve path 2byte=E3=80=80space.jpg relative to node /
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:65)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:1)
>        at org.apache.jackrabbit.core.session.SessionState.perform(Session=
State.java:216)
>        at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
>        at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.ja=
va:1814)
>        at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1766)
>        at Test.main(Test.java:29)
> Caused by: org.apache.jackrabbit.spi.commons.conversion.MalformedPathExce=
ption: '2byte=E3=80=80space.jpg' is not a valid path. Whitespace not a allo=
wed in name.
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:393)
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:122)
>        at org.apache.jackrabbit.spi.commons.conversion.ParsingPathResolve=
r.getQPath(ParsingPathResolver.java:90)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:98)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:77)
>        at org.apache.jackrabbit.spi.commons.conversion.DefaultNamePathRes=
olver.getQPath(DefaultNamePathResolver.java:82)
>        at org.apache.jackrabbit.core.SessionImpl.getQPath(SessionImpl.jav=
a:648)
>        at org.apache.jackrabbit.core.session.SessionContext.getQPath(Sess=
ionContext.java:338)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:63)
>        ... 6 more
> This can be reproduced by following code
> public static void main(String[] args) throws Exception {
>               Repository repository =3D new TransientRepository();
>               Session session =3D repository.login(new SimpleCredentials(=
"username",
>                            "password".toCharArray()));
>               try {
>                      Node root =3D session.getRootNode();
>                     =20
>                      // Store content
>                      Node hello =3D root.addNode("2byte=E3=80=80space.jpg=
");
>              =20
>                      session.save();
>               } finally {
>                      session.logout();
>               }
>        }
> I am using jackrabbit-2.6.0

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38458-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 23 15:46:10 2013
Return-Path: <dev-return-38458-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C215D10C40
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 23 Sep 2013 15:46:10 +0000 (UTC)
Received: (qmail 29457 invoked by uid 500); 23 Sep 2013 15:46:05 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 29243 invoked by uid 500); 23 Sep 2013 15:46:04 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 29215 invoked by uid 99); 23 Sep 2013 15:46:03 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Sep 2013 15:46:03 +0000
Date: Mon, 23 Sep 2013 15:46:03 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12644283.1366781418311.3165.1379951163345@arcas>
In-Reply-To: <JIRA.12644283.1366781418311@arcas>
References: <JIRA.12644283.1366781418311@arcas>
Subject: [jira] [Resolved] (JCR-3582) Unable to create nodes with whitespace
 chars != ASCII SP
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3582?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

Julian Reschke resolved JCR-3582.
---------------------------------

    Resolution: Fixed
   =20
> Unable to create nodes with whitespace chars !=3D ASCII SP
> --------------------------------------------------------
>
>                 Key: JCR-3582
>                 URL: https://issues.apache.org/jira/browse/JCR-3582
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.6.3, 2.7.1
>            Reporter: Abhinav Mathur
>            Assignee: Julian Reschke
>            Priority: Trivial
>             Fix For: 2.6.4, 2.7.2
>
>
> when trying to create a node with double byte space in name,following err=
or is thrown=20
> Exception in thread "main" javax.jcr.RepositoryException: Failed to resol=
ve path 2byte=E3=80=80space.jpg relative to node /
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:65)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:1)
>        at org.apache.jackrabbit.core.session.SessionState.perform(Session=
State.java:216)
>        at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
>        at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.ja=
va:1814)
>        at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1766)
>        at Test.main(Test.java:29)
> Caused by: org.apache.jackrabbit.spi.commons.conversion.MalformedPathExce=
ption: '2byte=E3=80=80space.jpg' is not a valid path. Whitespace not a allo=
wed in name.
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:393)
>        at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(P=
athParser.java:122)
>        at org.apache.jackrabbit.spi.commons.conversion.ParsingPathResolve=
r.getQPath(ParsingPathResolver.java:90)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:98)
>        at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolve=
r.getQPath(CachingPathResolver.java:77)
>        at org.apache.jackrabbit.spi.commons.conversion.DefaultNamePathRes=
olver.getQPath(DefaultNamePathResolver.java:82)
>        at org.apache.jackrabbit.core.SessionImpl.getQPath(SessionImpl.jav=
a:648)
>        at org.apache.jackrabbit.core.session.SessionContext.getQPath(Sess=
ionContext.java:338)
>        at org.apache.jackrabbit.core.session.AddNodeOperation.perform(Add=
NodeOperation.java:63)
>        ... 6 more
> This can be reproduced by following code
> public static void main(String[] args) throws Exception {
>               Repository repository =3D new TransientRepository();
>               Session session =3D repository.login(new SimpleCredentials(=
"username",
>                            "password".toCharArray()));
>               try {
>                      Node root =3D session.getRootNode();
>                     =20
>                      // Store content
>                      Node hello =3D root.addNode("2byte=E3=80=80space.jpg=
");
>              =20
>                      session.save();
>               } finally {
>                      session.logout();
>               }
>        }
> I am using jackrabbit-2.6.0

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrato=
rs
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38459-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 23 16:52:56 2013
Return-Path: <dev-return-38459-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6E98A10F36
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 23 Sep 2013 16:52:56 +0000 (UTC)
Received: (qmail 77672 invoked by uid 500); 23 Sep 2013 16:52:56 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 77435 invoked by uid 500); 23 Sep 2013 16:52:56 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 77413 invoked by uid 99); 23 Sep 2013 16:52:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Sep 2013 16:52:54 +0000
X-ASF-Spam-Status: No, hits=-2000.0 required=5.0
	tests=ALL_TRUSTED
X-Spam-Check-By: apache.org
Received: from [140.211.11.8] (HELO aegis.apache.org) (140.211.11.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Sep 2013 16:52:53 +0000
Received: from aegis.apache.org (localhost [127.0.0.1])
	by aegis.apache.org (Postfix) with ESMTP id A416BC03F0;
	Mon, 23 Sep 2013 16:52:33 +0000 (UTC)
Date: Mon, 23 Sep 2013 16:52:30 +0000 (UTC)
From: Apache Jenkins Server <jenkins@builds.apache.org>
To: dev@jackrabbit.apache.org, julian.reschke@gmx.de
Message-ID: <1440512759.3605.1379955153669.JavaMail.hudson@aegis>
Subject: Jackrabbit-trunk - Build # 2191 - Unstable
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_3604_2019033946.1379955151515"
X-Jenkins-Job: Jackrabbit-trunk
X-Jenkins-Result: UNSTABLE
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3604_2019033946.1379955151515
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

The Apache Jenkins build system has built Jackrabbit-trunk (build #2191)

Status: Unstable

Check console output at https://builds.apache.org/job/Jackrabbit-trunk/2191/ to view the results.
------=_Part_3604_2019033946.1379955151515--

From dev-return-38460-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 24 14:39:42 2013
Return-Path: <dev-return-38460-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83D1410720
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 24 Sep 2013 14:39:42 +0000 (UTC)
Received: (qmail 43425 invoked by uid 500); 24 Sep 2013 14:25:32 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 43164 invoked by uid 500); 24 Sep 2013 14:25:14 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 43058 invoked by uid 99); 24 Sep 2013 14:25:02 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Sep 2013 14:25:02 +0000
Date: Tue, 24 Sep 2013 14:25:02 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670284.1380032593021.9384.1380032702471@arcas>
In-Reply-To: <JIRA.12670284.1380032593021@arcas>
References: <JIRA.12670284.1380032593021@arcas>
Subject: [jira] [Created] (JCR-3669) Improve index performance by upgrading
 lucene to 4.x
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

frank created JCR-3669:
--------------------------

             Summary: Improve index performance by upgrading lucene to 4.x
                 Key: JCR-3669
                 URL: https://issues.apache.org/jira/browse/JCR-3669
             Project: Jackrabbit Content Repository
          Issue Type: Wish
          Components: jackrabbit-core
    Affects Versions: 2.6.4, 2.7.2
         Environment: Apply to All
            Reporter: frank
            Priority: Critical
             Fix For: 2.6.4, 2.7.2


Since Lucene 4.x has much better performance than Lucene 3.x, if Jackrabbit upgrades the Lucene component to version 4.x, it will improve much on the performance.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38462-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 24 20:05:12 2013
Return-Path: <dev-return-38462-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 94CA6105B3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 24 Sep 2013 20:05:12 +0000 (UTC)
Received: (qmail 51041 invoked by uid 500); 24 Sep 2013 20:05:11 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 50944 invoked by uid 500); 24 Sep 2013 20:05:10 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 50301 invoked by uid 99); 24 Sep 2013 20:05:03 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Sep 2013 20:05:03 +0000
Date: Tue, 24 Sep 2013 20:05:03 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667115.1378391071230.11519.1380053103309@arcas>
In-Reply-To: <JIRA.12667115.1378391071230@arcas>
References: <JIRA.12667115.1378391071230@arcas>
Subject: [jira] [Assigned] (JCR-3664) FileVault: fix javadoc for
 PlatformNameFormatter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3664?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Tobias Bocanegra reassigned JCR-3664:
-------------------------------------

    Assignee: Tobias Bocanegra
    
> FileVault: fix javadoc for PlatformNameFormatter
> ------------------------------------------------
>
>                 Key: JCR-3664
>                 URL: https://issues.apache.org/jira/browse/JCR-3664
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Assignee: Tobias Bocanegra
>            Priority: Trivial
>         Attachments: JCR-3664-1.patch
>
>
> The javadoc for this class is incorrectly formatted - it is written as plain text rather than HTML. It's missing some p and pre tags to make it render as expected.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38461-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 24 20:05:12 2013
Return-Path: <dev-return-38461-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98453105B4
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 24 Sep 2013 20:05:12 +0000 (UTC)
Received: (qmail 51040 invoked by uid 500); 24 Sep 2013 20:05:11 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 50379 invoked by uid 500); 24 Sep 2013 20:05:05 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 50296 invoked by uid 99); 24 Sep 2013 20:05:03 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Sep 2013 20:05:03 +0000
Date: Tue, 24 Sep 2013 20:05:02 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668234.1378984398612.11517.1380053102943@arcas>
In-Reply-To: <JIRA.12668234.1378984398612@arcas>
References: <JIRA.12668234.1378984398612@arcas>
Subject: [jira] [Resolved] (JCR-3666) FileVault: VaultFsConfig11 references
 incorrect classes from prior versions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3666?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Tobias Bocanegra resolved JCR-3666.
-----------------------------------

    Resolution: Fixed

removed old references in revision 1525985
                
> FileVault: VaultFsConfig11 references incorrect classes from prior versions
> ---------------------------------------------------------------------------
>
>                 Key: JCR-3666
>                 URL: https://issues.apache.org/jira/browse/JCR-3666
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Priority: Minor
>
> I stumbled upon this by accident, so I can't say whether this has unintended side effects or not, but just to make sure...
> VaultFsConfig11 references classes from prior mappings 
> {code}
>         Map<String, String> m = helper.getMappings();
>         m.put("org.apache.jackrabbit.vault.fs.imprt.FolderArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.FileArtifactHandler");
>         m.put("org.apache.jackrabbit.vault.fs.imprt.FileArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.FileArtifactHandler");
>         m.put("org.apache.jackrabbit.vault.fs.imprt.GenericArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.GenericArtifactHandler");
>         m.put("org.apache.jackrabbit.vault.fs.imprt.NodeTypeArtifactHandler", "org.apache.jackrabbit.vault.fs.impl.io.NodeTypeArtifactHandler");
>         m.put("org.apache.jackrabbit.vault.fs.filter.ItemFilter", "org.apache.jackrabbit.vault.fs.api.ItemFilter");
>         m.put("org.apache.jackrabbit.vault.fs.filter.PathFilter", "org.apache.jackrabbit.vault.fs.api.PathFilter");
> {code}
> But since there was no prior org.apache.jackrabbit.vault.fs.imprt package, I guess that this is incorrect, and that the mappings should include both the previous class names and the class names which were in effect before FileVault was donated.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38463-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Tue Sep 24 20:09:05 2013
Return-Path: <dev-return-38463-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98825105D2
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Tue, 24 Sep 2013 20:09:05 +0000 (UTC)
Received: (qmail 57064 invoked by uid 500); 24 Sep 2013 20:09:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 57017 invoked by uid 500); 24 Sep 2013 20:09:03 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 56998 invoked by uid 99); 24 Sep 2013 20:09:02 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Sep 2013 20:09:02 +0000
Date: Tue, 24 Sep 2013 20:09:02 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12667115.1378391071230.11525.1380053342797@arcas>
In-Reply-To: <JIRA.12667115.1378391071230@arcas>
References: <JIRA.12667115.1378391071230@arcas>
Subject: [jira] [Updated] (JCR-3664) FileVault: fix javadoc for
 PlatformNameFormatter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3664?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Tobias Bocanegra updated JCR-3664:
----------------------------------

    Resolution: Fixed
        Status: Resolved  (was: Patch Available)

fixed in revision 1525987
                
> FileVault: fix javadoc for PlatformNameFormatter
> ------------------------------------------------
>
>                 Key: JCR-3664
>                 URL: https://issues.apache.org/jira/browse/JCR-3664
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-commons
>            Reporter: Robert Munteanu
>            Assignee: Tobias Bocanegra
>            Priority: Trivial
>         Attachments: JCR-3664-1.patch
>
>
> The javadoc for this class is incorrectly formatted - it is written as plain text rather than HTML. It's missing some p and pre tags to make it render as expected.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38464-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 25 01:38:04 2013
Return-Path: <dev-return-38464-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0927F102FA
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 25 Sep 2013 01:38:04 +0000 (UTC)
Received: (qmail 45858 invoked by uid 500); 25 Sep 2013 01:38:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 45376 invoked by uid 500); 25 Sep 2013 01:38:02 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 45343 invoked by uid 99); 25 Sep 2013 01:38:02 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 01:38:02 +0000
Date: Wed, 25 Sep 2013 01:38:02 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670284.1380032593021.13958.1380073082511@arcas>
In-Reply-To: <JIRA.12670284.1380032593021@arcas>
References: <JIRA.12670284.1380032593021@arcas>
Subject: [jira] [Updated] (JCR-3669) Improve index performance by upgrading
 lucene to 4.x
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3669?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

frank updated JCR-3669:
-----------------------

    Fix Version/s:     (was: 2.7.2)
                       (was: 2.6.4)
    
> Improve index performance by upgrading lucene to 4.x
> ----------------------------------------------------
>
>                 Key: JCR-3669
>                 URL: https://issues.apache.org/jira/browse/JCR-3669
>             Project: Jackrabbit Content Repository
>          Issue Type: Wish
>          Components: jackrabbit-core
>    Affects Versions: 2.6.4, 2.7.2
>         Environment: Apply to All
>            Reporter: frank
>            Priority: Critical
>              Labels: features, performance
>
> Since Lucene 4.x has much better performance than Lucene 3.x, if Jackrabbit upgrades the Lucene component to version 4.x, it will improve much on the performance.

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38466-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 25 04:51:17 2013
Return-Path: <dev-return-38466-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2C94E10727
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 25 Sep 2013 04:51:17 +0000 (UTC)
Received: (qmail 35757 invoked by uid 500); 25 Sep 2013 04:51:10 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 35624 invoked by uid 500); 25 Sep 2013 04:51:08 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 35590 invoked by uid 99); 25 Sep 2013 04:51:04 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 04:51:04 +0000
Date: Wed, 25 Sep 2013 04:51:04 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670414.1380084567025.14636.1380084664450@arcas>
In-Reply-To: <JIRA.12670414.1380084567025@arcas>
References: <JIRA.12670414.1380084567025@arcas>
Subject: [jira] [Created] (JCR-3670) FileVault: Remove CQ/CRX/day/adobe
 references
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Tobias Bocanegra created JCR-3670:
-------------------------------------

             Summary: FileVault: Remove CQ/CRX/day/adobe references
                 Key: JCR-3670
                 URL: https://issues.apache.org/jira/browse/JCR-3670
             Project: Jackrabbit Content Repository
          Issue Type: Bug
            Reporter: Tobias Bocanegra
            Priority: Minor


as stated correctly by ate, we need to remove references to day/adobe and cq/crx defaults:

> Most of it doesn't really do any 'harm' in a non-CQ5/CRX context, Like for
> example the CRX specific Node types in (vault-core) DefaultNodeTypes.java, or
> the default configurations in the (vault-core) defaultConfig-1.[0|1].xml files.
> But in some other areas I think they might be(come) more than a nuisance, like
> for example:
> - default/fallback "crx.default" workspace name used in (vault-core)
> AggregatManagerImpl.java
> - default/fallback "/crx/server" prefix used in (vault-core) RepositoryAddress.java
> - "/var/crxpatches" patchParentPath in (vault-core) ImportOptions.java
> - CRX specific default URI/WPS constants in (vault-cli) VaultFsApp.java
> - CRX specific constants in (vault-vlt) Sync.java
> - and a few more (just search for CQ or CRX, case-insensitive)

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38465-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 25 04:51:17 2013
Return-Path: <dev-return-38465-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E7A810729
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 25 Sep 2013 04:51:17 +0000 (UTC)
Received: (qmail 35694 invoked by uid 500); 25 Sep 2013 04:51:09 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 35610 invoked by uid 500); 25 Sep 2013 04:51:06 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 35597 invoked by uid 99); 25 Sep 2013 04:51:04 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 04:51:04 +0000
Date: Wed, 25 Sep 2013 04:51:04 +0000 (UTC)
From: "Tobias Bocanegra (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670414.1380084567025.14637.1380084664548@arcas>
In-Reply-To: <JIRA.12670414.1380084567025@arcas>
References: <JIRA.12670414.1380084567025@arcas>
Subject: [jira] [Assigned] (JCR-3670) FileVault: Remove CQ/CRX/day/adobe
 references
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3670?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Tobias Bocanegra reassigned JCR-3670:
-------------------------------------

    Assignee: Tobias Bocanegra
    
> FileVault: Remove CQ/CRX/day/adobe references
> ---------------------------------------------
>
>                 Key: JCR-3670
>                 URL: https://issues.apache.org/jira/browse/JCR-3670
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Tobias Bocanegra
>            Assignee: Tobias Bocanegra
>            Priority: Minor
>
> as stated correctly by ate, we need to remove references to day/adobe and cq/crx defaults:
> > Most of it doesn't really do any 'harm' in a non-CQ5/CRX context, Like for
> > example the CRX specific Node types in (vault-core) DefaultNodeTypes.java, or
> > the default configurations in the (vault-core) defaultConfig-1.[0|1].xml files.
> > But in some other areas I think they might be(come) more than a nuisance, like
> > for example:
> > - default/fallback "crx.default" workspace name used in (vault-core)
> > AggregatManagerImpl.java
> > - default/fallback "/crx/server" prefix used in (vault-core) RepositoryAddress.java
> > - "/var/crxpatches" patchParentPath in (vault-core) ImportOptions.java
> > - CRX specific default URI/WPS constants in (vault-cli) VaultFsApp.java
> > - CRX specific constants in (vault-vlt) Sync.java
> > - and a few more (just search for CQ or CRX, case-insensitive)

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38467-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 25 12:44:28 2013
Return-Path: <dev-return-38467-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5EBED10211
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 25 Sep 2013 12:44:28 +0000 (UTC)
Received: (qmail 40802 invoked by uid 500); 25 Sep 2013 12:14:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 40316 invoked by uid 500); 25 Sep 2013 12:14:02 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 39382 invoked by uid 99); 25 Sep 2013 12:12:11 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 12:12:11 +0000
Date: Wed, 25 Sep 2013 12:12:11 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12669208.1379492509536.15835.1380111131171@arcas>
In-Reply-To: <JIRA.12669208.1379492509536@arcas>
References: <JIRA.12669208.1379492509536@arcas>
Subject: [jira] [Commented] (JCR-3668) Incorrect "wspPath" given to
 DavLocatorFactoryImpl.getRepositoryPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3668?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13777383#comment-13777383 ] 

Julian Reschke commented on JCR-3668:
-------------------------------------

It would be awesome to have a unit test that demonstrates the problem.
                
> Incorrect "wspPath" given to DavLocatorFactoryImpl.getRepositoryPath()
> ----------------------------------------------------------------------
>
>                 Key: JCR-3668
>                 URL: https://issues.apache.org/jira/browse/JCR-3668
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-jcr-server
>    Affects Versions: 2.6.3
>         Environment: JBOSS AS 7.1
>            Reporter: Andreas Tully
>         Attachments: bootstrap.properties, jboss-deployment.log, jboss.log, repository.xml, toromiro.log, web.xml
>
>
> When deploying jackrabbit-webapp-2.6.3.war (e.g. into JBOSS AS 7.1), everything seems to be fine and a connection to WEBDAV/DAVex (e.g. via subshell Toromiro) can be established without errors.
> All simple repository commands (like create, edit or delete node) seem to work fine, but execution of e.g.  "add mixin" or "Import XML" will fail with an internal server error...
> A look into the exception stack trace clearly seems to hint to a wrong workspace path given to DavLocatorFactoryImpl.getRepositoryPath(). 
> (Which obviously was already called before on other commands in the same session with a correct workspace path instead...)
> Currently, I cannot really judge, wether this is a bug in Toromiro or Jackrabbit, but I can confirm, that same Toromiro version is at least working fine via WebDAV connection to jackrabbit-standalone-2.6.3.jar. So it seems to be more a Jackrabbit problem for me... 
> Here all relevant files and excerpts...
> JBOSS-Deployment
> =====================================
> appserver@ubuntu:/usr/local/share/jboss/bin$ ./standalone.sh -Djboss.bind.address=localhost -Djboss.bind.address.management=localhost -Djava.rmi.server.hostname=localhost
> =========================================================================
>   JBoss Bootstrap Environment
>   JBOSS_HOME: /usr/local/share/jboss
>   JAVA: java
>   JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml
> =========================================================================
> 07:45:22,814 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
> 07:45:24,334 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
> 07:45:24,514 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
> 07:45:30,296 INFO  [org.xnio] XNIO Version 3.0.3.GA
> 07:45:30,296 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
> 07:45:30,321 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
> 07:45:30,335 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
> 07:45:30,338 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
> 07:45:30,353 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
> 07:45:30,342 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 3.2.3.GA
> 07:45:30,362 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
> 07:45:30,360 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
> 07:45:30,357 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
> 07:45:30,360 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
> 07:45:30,375 INFO  [org.jboss.as.security] (MSC service thread 1-11) JBAS013100: Current PicketBox version=4.0.7.Final
> 07:45:30,406 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
> 07:45:31,339 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
> 07:45:31,342 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-16) JBAS015400: Bound mail session [java:jboss/mail/Default]
> 07:45:31,355 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
> 07:45:31,864 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
> 07:45:32,065 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
> 07:45:32,451 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-12) JBoss Web Services - Stack CXF Server 4.0.2.GA
> 07:45:32,561 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
> 07:45:32,565 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
> 07:45:33,053 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-15) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/share/jboss/standalone/deployments
> 07:45:33,085 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
> 07:45:33,086 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:9999
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of "jackrabbit-webapp-2.6.3.war"
> 07:45:33,307 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "jackrabbit-jca-2.6.3.rar"
> 07:46:00,733 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_cs.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_de_DE.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_es.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,734 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_fr.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_hu.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_it.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ja_JP.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,736 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ko_KR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pl.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,737 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_pt_BR.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_ru.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_CN.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:00,739 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry derbyLocale_zh_TW.jar in "/content/jackrabbit-jca-2.6.3.rar/derby-10.5.3.0_1.jar"  does not point to a valid jar for a Class-Path reference.
> 07:46:02,344 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010403: Deploying JDBC-compliant driver class org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
> 07:46:02,520 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Starting repository...
> 07:46:02,523 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/repository
> 07:46:02,649 INFO  [org.apache.jackrabbit.core.nodetype.NodeTypeRegistry] (MSC service thread 1-12) no custom node type definitions found
> 07:46:02,666 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/version
> 07:46:04,892 INFO  [org.apache.jackrabbit.j2ee.RepositoryAccessServlet] (MSC service thread 1-7) RepositoryAccessServlet initialized.
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:04,893 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:04,894 INFO  [org.apache.jackrabbit.webdav.simple.SimpleWebdavServlet] (MSC service thread 1-7) resource-path-prefix = '/repository'
> 07:46:05,039 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) authenticate-header = Basic realm="Jackrabbit Webdav Server"
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) csrf-protection = null
> 07:46:05,040 INFO  [org.apache.jackrabbit.webdav.server.AbstractWebdavServlet] (MSC service thread 1-7) createAbsoluteURI = true
> 07:46:05,046 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /jackrabbit-webapp-2.6.3
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'default'...
> 07:46:05,521 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/default
> 07:46:06,701 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/repository/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/default/index Version: 3
> 07:46:06,858 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'default' initialized
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) SecurityManager = class org.apache.jackrabbit.core.DefaultSecurityManager
> 07:46:06,863 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) initializing workspace 'security'...
> 07:46:06,864 INFO  [org.apache.jackrabbit.core.fs.local.LocalFileSystem] (MSC service thread 1-12) LocalFileSystem initialized at path /usr/local/share/jboss/standalone/configuration/repository/workspaces/security
> 07:46:07,800 INFO  [org.apache.jackrabbit.core.query.lucene.SearchIndex] (MSC service thread 1-12) Index initialized: /usr/local/share/jboss/standalone/configuration/repository/workspaces/security/index Version: 3
> 07:46:07,801 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) workspace 'security' initialized
> 07:46:07,802 INFO  [org.apache.jackrabbit.core.DefaultSecurityManager] (MSC service thread 1-12) init: use Repository Login-Configuration for Jackrabbit
> 07:46:07,824 INFO  [org.apache.jackrabbit.core.RepositoryImpl] (MSC service thread 1-12) Repository started (5304ms)
> 07:46:07,825 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-12) JBAS010406: Registered connection factory java:/jca/DocumentStore
> 07:46:07,829 INFO  [org.jboss.as.connector.deployers.RaXmlDeployer] (MSC service thread 1-12) IJ020002: Deployed: file:/usr/local/share/jboss/standalone/tmp/vfs/temp91e1b58f0fb8ebd3/jackrabbit-jca-2.6.3.rar-f0a7e5e6b2164cbe/contents/
> 07:46:07,831 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-13) JBAS010401: Bound JCA ConnectionFactory [java:/jca/DocumentStore]
> 07:46:07,831 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015951: Admin console listening on http://127.0.0.1:9990
> 07:46:07,832 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 46618ms - Started 218 of 298 services (78 services are passive or on-demand)
> 07:46:08,097 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-webapp-2.6.3.war"
> 07:46:08,098 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "jackrabbit-jca-2.6.3.rar"
> repository.xml
> =====================================
> <?xml version="1.0"?>
> <!--
>    Licensed to the Apache Software Foundation (ASF) under one or more
>    contributor license agreements.  See the NOTICE file distributed with
>    this work for additional information regarding copyright ownership.
>    The ASF licenses this file to You under the Apache License, Version 2.0
>    (the "License"); you may not use this file except in compliance with
>    the License.  You may obtain a copy of the License at
>        http://www.apache.org/licenses/LICENSE-2.0
>    Unless required by applicable law or agreed to in writing, software
>    distributed under the License is distributed on an "AS IS" BASIS,
>    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>    See the License for the specific language governing permissions and
>    limitations under the License.
> -->
> <!DOCTYPE Repository
>           PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
>           "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">
> <!-- Example Repository Configuration File
>      Used by
>      - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
>      -
> -->
> <Repository>
>     <!--
>         virtual file system where the repository stores global state
>         (e.g. registered namespaces, custom node types, etc.)
>     -->
>     <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>         <param name="path" value="${rep.home}/repository"/>
>     </FileSystem>
>     <!--
>         data store configuration
>     -->
>     <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>
>     <!--
>         security configuration
>     -->
>     <Security appName="Jackrabbit">
>         <!--
>             security manager:
>             class: FQN of class implementing the JackrabbitSecurityManager interface
>         -->
>         <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
>             <!--
>             workspace access:
>             class: FQN of class implementing the WorkspaceAccessManager interface
>             -->
>             <!-- <WorkspaceAccessManager class="..."/> -->
>             <!-- <param name="config" value="${rep.home}/security.xml"/> -->
>         </SecurityManager>
>         <!--
>             access manager:
>             class: FQN of class implementing the AccessManager interface
>         -->
>         <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
>             <!-- <param name="config" value="${rep.home}/access.xml"/> -->
>         </AccessManager>
>         <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
>            <!-- 
>               anonymous user name ('anonymous' is the default value)
>             -->
>            <param name="anonymousId" value="anonymous"/>
>            <!--
>               administrator user id (default value if param is missing is 'admin')
>             -->
>            <param name="adminId" value="admin"/>
>         </LoginModule>
>     </Security>
>     <!--
>         location of workspaces root directory and name of default workspace
>     -->
>     <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
>     <!--
>         workspace configuration template:
>         used to create the initial workspace if there's no workspace yet
>     -->
>     <Workspace name="${wsp.name}">
>         <!--
>             virtual file system of the workspace:
>             class: FQN of class implementing the FileSystem interface
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${wsp.home}"/>
>         </FileSystem>
>         <!--
>             persistence manager of the workspace:
>             class: FQN of class implementing the PersistenceManager interface
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
>           <param name="schemaObjectPrefix" value="${wsp.name}_"/>
>         </PersistenceManager>
>         <!--
>             Search index and the file system it uses.
>             class: FQN of class implementing the QueryHandler interface
>         -->
>         <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>             <param name="path" value="${wsp.home}/index"/>
>             <param name="supportHighlighting" value="true"/>
>         </SearchIndex>
>     </Workspace>
>     <!--
>         Configures the versioning
>     -->
>     <Versioning rootPath="${rep.home}/version">
>         <!--
>             Configures the filesystem to use for versioning for the respective
>             persistence manager
>         -->
>         <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
>             <param name="path" value="${rep.home}/version" />
>         </FileSystem>
>         <!--
>             Configures the persistence manager to be used for persisting version state.
>             Please note that the current versioning implementation is based on
>             a 'normal' persistence manager, but this could change in future
>             implementations.
>         -->
>         <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
>           <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
>           <param name="schemaObjectPrefix" value="version_"/>
>         </PersistenceManager>
>     </Versioning>
>     <!--
>         Search index for content that is shared repository wide
>         (/jcr:system tree, contains mainly versions)
>     -->
>     <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
>         <param name="path" value="${rep.home}/repository/index"/>
>         <param name="supportHighlighting" value="true"/>
>     </SearchIndex>
>     <!--
>         Run with a cluster journal
>     -->
>     <Cluster id="node1">
>         <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
>     </Cluster>
> </Repository>
> web.xml
> =====================================
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">
> <web-app>
>     <display-name>Jackrabbit JCR Server</display-name>
>     <!-- ====================================================================== -->
>     <!-- R E P O S I T O R Y   S E R V L E T                                    -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Repository</servlet-name>
>         <description>
>             This servlet provides other servlets and jsps a common way to access
>             the repository. The repository can be accessed via JNDI, RMI or Webdav.
>         </description>
>         <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>
>         <!-- <init-param>
>           <param-name>repository.context.attribute.name</param-name>
>           <param-value>javax.jcr.Repository</param-value>
>         </init-param> -->
>         <init-param>
>             <param-name>repository-name</param-name>
>             <param-value>java:/jca/DocumentStore</param-value>
>             <description>Repository Name that is used to retrieve it via JNDI</description>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>jnp://localhost:1099</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.jboss.as.naming.InitialContextFactory</param-value>
>         </init-param> 
>        <!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suiteable for clients (eg. webdav clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param>-->
>         <!--
>             JNDI environment variables for creating the initial context
>             (all init parameters starting with java.naming.* will be added to the initial context environment).
>         <init-param>
>             <param-name>java.naming.provider.url</param-name>
>             <param-value>http://www.apache.org/jackrabbit</param-value>
>         </init-param>
>         <init-param>
>             <param-name>java.naming.factory.initial</param-name>
>             <param-value>org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory</param-value>
>         </init-param>
>         -->
>         <!--
>             RMI url, if RMI remoting is needed
>         -->
>         
>         <!--<init-param>
>             <param-name>rmi-uri</param-name>
>             <param-value>///jackrabbit.repository</param-value>
>             <description>The URI for the RMI connection.</description>
>         </init-param>-->
>         
>         <load-on-startup>3</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V L E T                                              -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>Webdav</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>             <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>
> 	<!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/repository</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         <!--
>         <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param>
>         -->
>         <!--
>             Parameter used to configure behaviour of webdav resources such as:
>             - destinction between collections and non-collections
>             - resource filtering
>         -->
>         <init-param>
>             <param-name>resource-config</param-name>
>             <param-value>/WEB-INF/config.xml</param-value>
>             <description>
>                 Defines various dav-resource configuration parameters.
>             </description>
>         </init-param>
>         <load-on-startup>4</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- W E B D A V  S E R V E R  S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <description>
>             The webdav servlet that connects HTTP request to the repository.
>         </description>
>              <servlet-class>org.apache.jackrabbit.j2ee.JCRWebdavServerServlet</servlet-class>
>              <!-- <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class> -->
>  	<!-- <init-param>
>             <param-name>missing-auth-mapping</param-name>
>             <param-value></param-value>
>             <description>
>                 Defines how a missing authorization header should be handled.
>                 1) If this init-param is missing, a 401 response is generated.
>                    This is suitable for clients (eg. WebDAV clients) for which
>                    sending a proper authorization header is not possible if the
>                    server never sent a 401.
>                 2) If this init-param is present with an empty value,
>                    null-credentials are returned, thus forcing an null login
>                    on the repository.
>                 3) If this init-param is present with the value 'guestcredentials'
>                    java.jcr.GuestCredentials are used to login to the repository.
>                 4) If this init-param has a 'user:password' value, the respective
>                    simple credentials are generated.
>             </description>
>         </init-param> -->
>         <!--
>             Optional parameter to define the value of the 'WWW-Authenticate' header
>         -->
>         
>        <!-- <init-param>
>             <param-name>authenticate-header</param-name>
>             <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
>             <description>
>                 Defines the value of the 'WWW-Authenticate' header.
>             </description>
>         </init-param> -->
>         
>         <init-param>
>             <param-name>resource-path-prefix</param-name>
>             <param-value>/server</param-value>
>             <description>
>                 defines the prefix for spooling resources out of the repository.
>             </description>
>         </init-param>
>         <!--
>             Init parameters specific for JcrRemotingServlet
>         -->
>         <!--
>         <init-param>
>             <param-name>home</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional home directory for JcrRemotingServlet temporary files (default: "jackrabbit")</description>
>         </init-param>
>         <init-param>
>             <param-name>temp-directory</param-name>
>             <param-value></param-value>
>             <description>JcrRemotingServlet: Optional temporary directory name (under home, default: "tmp")</description>
>         </init-param>
>         -->
>         <init-param>
>             <param-name>batchread-config</param-name>
>             <param-value>/WEB-INF/batchread.properties</param-value>
>             <description>JcrRemotingServlet: Optional mapping from node type names to default depth.</description>
>         </init-param>        
>         <load-on-startup>5</load-on-startup>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- R M I   B I N D I N G   S E R V L E T                                  -->
>     <!-- ====================================================================== -->
>     <servlet>
>       <servlet-name>RMI</servlet-name>
>       <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
>     </servlet>
>     <!-- ====================================================================== -->
>     <!-- S E R V L E T   M A P P I N G                                          -->
>     <!-- ====================================================================== -->
>     <servlet-mapping>
>         <servlet-name>Webdav</servlet-name>
>         <url-pattern>/repository/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>JCRWebdavServer</servlet-name>
>         <url-pattern>/server/*</url-pattern>
>     </servlet-mapping>
>     <servlet-mapping>
>         <servlet-name>RMI</servlet-name>
>         <url-pattern>/rmi</url-pattern>
>     </servlet-mapping>
> </web-app>
> bootstrap.properties
> =====================================
> #  Licensed to the Apache Software Foundation (ASF) under one or more
> #  contributor license agreements.  See the NOTICE file distributed with
> #  this work for additional information regarding copyright ownership.
> #  The ASF licenses this file to You under the Apache License, Version 2.0
> #  (the "License"); you may not use this file except in compliance with
> #  the License.  You may obtain a copy of the License at
> #
> #      http://www.apache.org/licenses/LICENSE-2.0
> #
> #  Unless required by applicable law or agreed to in writing, software
> #  distributed under the License is distributed on an "AS IS" BASIS,
> #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> #  See the License for the specific language governing permissions and
> #  limitations under the License.
> # This is the template file for the 'bootstrap.properties' that will
> # be placed in the repository home directory (or whatever is specified
> # in the "bootstrap-config" init parameter.
> # Repository configuration settings (will be adjusted by installer)
> repository.config=usr/local/share/jboss/standalone/configuration/repository/repository.xml
> repository.home=usr/local/share/jboss/standalone/configuration/repository
> repository.name=repository
> # RMI Settings
> #rmi.enabled=true
> #rmi.port=1199
> #rmi.host=localhost
> # If the URI is not specified, it's composed as follows:
> #rmi.uri=//${rmi.host}:${rmi.port}/${repository.name}
> # JNDI Settings
> # all properties starting with 'java.naming.' will go into the
> # environment of the initial context
> jndi.enabled=true
> # if the name is not specified, it's initialized with the repository.name
> jndi.name=java:/jca/DocumentStore
> #jndi.name=${repository.name}
> #jndi.name=repository
> java.naming.provider.url=jnp://localhost:1099
> java.naming.factory.initial=org.apache.jackrabbit.core.jndi.provider.DummyInitialContextFactory
> Toromiro Failure Log (After "add mixin")
> =====================================
> !SESSION 2013-09-18 06:46:39.948 -----------------------------------------------
> eclipse.buildId=unknown
> java.version=1.7.0_09
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=de_DE
> Command-line arguments:  -os linux -ws gtk -arch x86
> !ENTRY com.subshell.toromiro 4 0 2013-09-18 07:00:26.169
> !MESSAGE Exception occurred
> !STACK 0
> java.lang.reflect.InvocationTargetException
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	... 2 more
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> Root exception:
> javax.jcr.RepositoryException: Internal Server Error
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:120)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:51)
> 	at org.apache.jackrabbit.spi2dav.ExceptionConverter.generate(ExceptionConverter.java:45)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:904)
> 	at org.apache.jackrabbit.jcr2spi.WorkspaceManager.canRead(WorkspaceManager.java:695)
> 	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkIsWritable(ItemStateValidator.java:199)
> 	at org.apache.jackrabbit.jcr2spi.NodeImpl.canAddMixin(NodeImpl.java:837)
> 	at com.subshell.toromiro.delegators.NodeDelegator.canAddMixin(Unknown Source)
> 	at com.subshell.toromiro.actions.AddMixinAction$1.run(Unknown Source)
> 	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
> Caused by: org.apache.jackrabbit.webdav.DavException: Internal Server Error
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.getResponseException(DavMethodBase.java:165)
> 	at org.apache.jackrabbit.webdav.client.methods.DavMethodBase.checkSuccess(DavMethodBase.java:174)
> 	at org.apache.jackrabbit.spi2dav.RepositoryServiceImpl.isGranted(RepositoryServiceImpl.java:876)
> 	... 6 more
> JBOSS Failure Log (After "add mixin")
> =====================================
> 07:00:25,637 ERROR [org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl] (http-localhost-127.0.0.1-8080-1) Unexpected format of resource path.
> 07:00:25,639 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jackrabbit-webapp-2.6.3].[JCRWebdavServer]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet JCRWebdavServer threw exception: java.lang.IllegalArgumentException: Unexpected format of resource path: /jackrabbit-webapp-2.6.3/server/default/jcr:root/dfgdfg (workspace: /jackrabbit-webapp-2.6.3)
> 	at org.apache.jackrabbit.webdav.jcr.DavLocatorFactoryImpl.getRepositoryPath(DavLocatorFactoryImpl.java:65) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.AbstractLocatorFactory$DavResourceLocatorImpl.getRepositoryPath(AbstractLocatorFactory.java:356) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.addResponses(JcrPrivilegeReport.java:117) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.version.report.JcrPrivilegeReport.init(JcrPrivilegeReport.java:102) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.version.report.ReportType.createReport(ReportType.java:72) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.AbstractResource.getReport(AbstractResource.java:487) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.jcr.WorkspaceResourceImpl.getReport(WorkspaceResourceImpl.java:84) [jackrabbit-jcr-server-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doReport(AbstractWebdavServlet.java:1096) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:402) [jackrabbit-webdav-2.6.3.jar:]
> 	at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.service(AbstractWebdavServlet.java:291) [jackrabbit-webdav-2.6.3.jar:]
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
> 	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
> 	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
> 	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38468-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 25 14:59:08 2013
Return-Path: <dev-return-38468-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 08C47107F1
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 25 Sep 2013 14:59:08 +0000 (UTC)
Received: (qmail 25930 invoked by uid 500); 25 Sep 2013 14:59:07 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 25785 invoked by uid 500); 25 Sep 2013 14:59:06 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 25767 invoked by uid 99); 25 Sep 2013 14:59:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 14:59:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alex.parvulescu@gmail.com designates 209.85.212.44 as permitted sender)
Received: from [209.85.212.44] (HELO mail-vb0-f44.google.com) (209.85.212.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 14:58:58 +0000
Received: by mail-vb0-f44.google.com with SMTP id e13so4482246vbg.17
        for <multiple recipients>; Wed, 25 Sep 2013 07:58:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:date:message-id:subject:from:to:content-type;
        bh=AnHm+9Ad3wxM4DnUrFjQAc16Zpycg8EAzukuyNLSF7A=;
        b=pEnnfX7iT4Ge8lyZ7JCseYeS994P5/8Zi6tSHl2rq6344d6MKbJGm72tHlKIXsefFX
         Hk8saVeYHKBzHnzsjzRx15C3L2QyNvjrhwP+waINtV39YU8a8K5GbThtHXfXGxxesDU6
         hmRHJoqlV+P2aq5lu8yfgMcmcJKgHYg3uqrVZW17DjGor4C/ktcAYocUj+DSFqT0C2qF
         ELhM3HN1jdfbFGgJwI0j0Pvy2VSiebyBgsVrs9fLakUZeAnn+KD8wVd1EI8QhVIGAYWS
         R9gprekJXWi97jSN8JMdZ/R8zunqNeSssStaErFtshXDc22zHgbDQe8iAB79bTs2mAFY
         lqOA==
MIME-Version: 1.0
X-Received: by 10.52.33.98 with SMTP id q2mr176210vdi.50.1380121117544; Wed,
 25 Sep 2013 07:58:37 -0700 (PDT)
Sender: alex.parvulescu@gmail.com
Received: by 10.220.122.135 with HTTP; Wed, 25 Sep 2013 07:58:37 -0700 (PDT)
Date: Wed, 25 Sep 2013 16:58:37 +0200
X-Google-Sender-Auth: tAoxfJ1VOWd8YUKzf3BDUt1pVSM
Message-ID: <CAB-0WTChZnKFXjtP_A7XaRfDbLNMGqQsW6=e=UAFF0O_T6ubJQ@mail.gmail.com>
Subject: [ANNOUNCE] Apache Jackrabbit 2.7.1 released
From: Alex Parvulescu <alexparvulescu@apache.org>
To: announce@apache.org, announce@jackrabbit.apache.org, 
	Jackrabbit Users <users@jackrabbit.apache.org>, 
	Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

The Apache Jackrabbit community is pleased to announce the release of
Apache Jackrabbit 2.7.1. The release is available for download at:

    http://jackrabbit.apache.org/downloads.html

See the full release notes below for details about this release.


Release Notes -- Apache Jackrabbit -- Version 2.7.1

Introduction
------------

This is Apache Jackrabbit(TM) 2.7, a fully compliant implementation of the
Content Repository for Java(TM) Technology API, version 2.0 (JCR 2.0) as
specified in the Java Specification Request 283 (JSR 283).

Apache Jackrabbit 2.7 is an unstable series of releases cut directly from
Jackrabbit trunk, with a focus on new features and other improvements.
For production use we recommend the latest stable 2.6 release.

Changes in Jackrabbit 2.7.1
---------------------------

New features

  [JCR-3534] Efficient copying of binaries across repositories with
the same data store
  [JCR-3634] New method: JackrabbitRepository.login(Credentials,
Map<String, Object>)
  [JCR-3637] JackrabbitAccessControlEntry: Add support for
multi-valued restrictions
  [JCR-3652] Bundle serialization broken

Improvements

  [JCR-2029] JCR Remoting: Use DAV:lockroot to expose the lock-holding node
  [JCR-3322] add TCK coverage of isNodeType(expandedName)
  [JCR-3408] Query tests should avoid casting to QueryManagerImpl
  [JCR-3591] Upgrade to latest Logback
  [JCR-3596] Reduce level for 'overwriting cached item' log messages
in ItemManager
  [JCR-3616] unit tests should use valid namespace names
  [JCR-3620] JCA deployment descriptor for Apache Geronimo
  [JCR-3625] make port number for webdav integration tests configurable
  [JCR-3626] NodeTypeTest.getPrimaryItemName can get ssssslllllloooowwwww
  [JCR-3628] Embed cause in
org.apache.jackrabbit.core.SessionImpl#getNodeByIdentifier while
rethrowing IllegalArgumentException

Bug fixes

  [JCR-3228] WebDav/DavEx remoting throws workspace mismatch
exceptions when running on port 80
  [JCR-3398] LOWER operand with nested LOCALNAME operand does not work with SQL2
  [JCR-3498] OUTER JOIN behavior is improperly excluding some values
  [JCR-3547] Datastore GC doesn't reset updateModifiedDateOnAccess on datastore
  [JCR-3595] AbstractJournal logging is too verbose
  [JCR-3601] AbstractJCRTest.cleanUpTestRoot() does not properly set
testNodeType
  [JCR-3603] Index aggreate with property include does not speed up order by
  [JCR-3604] NodeMixinUtil.getAddableMixinName() can return mixins
already inherited by the node
  [JCR-3605] Possible Deadlock during TimeoutHandler is running
  [JCR-3610] html excerpt broken when one of the indexed properties
contains markup
  [JCR-3617] Inconsistent CachingHierarchyManager under concurrent access
  [JCR-3621] Race condition in MixinTest between event delivery and
unregistering the observation listener
  [JCR-3629] [jcr2spi]RepositoryException lost in
org.apache.jackrabbit.jcr2spi.ItemManagerImpl while querying on remote
nodes exposed by jackrabbit-spi
  [JCR-3630] XSS in DirListingExportHandler
  [JCR-3631] SessionTest#hasCapability: missing save call
  [JCR-3633] If header field sent with PROPFIND (for lock discovery)
  [JCR-3635] Manually specified jcr:frozenUuid overwriting the one
assigned by the VersionManager when versioning node
  [JCR-3639] VersionLabelTest adds label to root version
  [JCR-3642] Ambiguous exception expectation in
SessionMoveVersionExceptionTest and WorkspaceMoveVersionExceptionTest
  [JCR-3645] LockManagerImpl do not prevent the internal PathMap in
all relevant Methods
  [JCR-3653] SessionState logs nano seconds but writes 'us'
  [JCR-3654] Error MembershipCache if a group node contains MV property
  [JCR-3655] Better Locking inside LockManagerImpl
  [JCR-3656] improve error handling when shared node support is missing
  [JCR-3658] MembershipCache not consistently synchronized

Changes in Jackrabbit 2.7.0
---------------------------

New features

  [JCR-3550] Methods for determining type of array of values
  [JCR-3566] add TCK test for NaN and infinity double property values

Improvements

  [JCR-3402] getSize() returning too many often -1
  [JCR-3495] Unregister from PrivilegeRegistry and NodeTypeRegistry on ...
  [JCR-3507] Make it possible to remove version histories via the ...
  [JCR-3513] Slower range query execution
  [JCR-3516] Search index consistency check should report and fix wrong ...
  [JCR-3517] Search index consistency check should be able to double ...
  [JCR-3519] Disable IOCounters based on log level
  [JCR-3524] Node type selection for reference constraint is not optimal
  [JCR-3528] Node type selection for CanAddChildNodeCallWithNodeTypeTest#...
  [JCR-3531] Borrow all available RepositoryHelpers
  [JCR-3535] Davex remoting should support absolute path hrefs
  [JCR-3537] Large number of SQL queries when adding nodes with version history
  [JCR-3549] URIResolverImpl needs to handle absolute paths in addition ...
  [JCR-3553] improve error logging for unexpected path formats
  [JCR-3554] RepositoryService.getReferences needs to deal with absolute ...
  [JCR-3559] RepositoryStubExceptions with root causes
  [JCR-3571] Light optimization for CachingNameResolver.getJCRName(Name)
  [JCR-3573] Improve token based login concurrency
  [JCR-3574] Leverage WebDAV compliance class 3 to use absolute paths in ...
  [JCR-3575] use absolute paths in WebDAV request bodies (DAV:href elements)
  [JCR-3577] Allow creation of users with 'null' password
  [JCR-3578] use absolute paths in DeltaV request bodies, and resolve hrefs ...
  [JCR-3580] JcrPrivilegeReport needs to deal with both absolute paths and ...
  [JCR-3583] UPDATE method needs to deal with both absolute paths and ...
  [JCR-3587] RepositoryImpl should expose the collection of ..

Bug fixes

  [JCR-3276] JCA Adpater not handling transaction suspension correctly
  [JCR-3382] ItemManager.getNode does not do a permission check when the ...
  [JCR-3465] JcrUtils.getOrCreateByPath() creates a whole subtree instead ...
  [JCR-3512] DelayedDelete in MultiDatastore does not work correctly
  [JCR-3518] Build fails on Mac OS + JDK 7
  [JCR-3521] IllegalArgumentException thrown on a box running java7 with ...
  [JCR-3523] Workspace.copy changes WeakReferences to References
  [JCR-3539] NotQuery#advance (and for older versions skipTo) violates ...
  [JCR-3540] locator for RootCollection generates a broken href when using ...
  [JCR-3543] TCK does not allow a property to be re-bound to a different ...
  [JCR-3545] unknown REPORT should cause status code 409/DAV:supported-report
  [JCR-3551] DavEx cannot handle Double.NaN properties
  [JCR-3552] Principal associated with Group does not update members
  [JCR-3556] IndexingConfigurationImpl.getAggregateRules() should return ...
  [JCR-3562] Adding a child node named {foo fails but bar} works
  [JCR-3570] Make immediately Repository start configureable in ...
  [JCR-3576] handle absolute paths in observation response bodies
  [JCR-3581] Incorrect bitwise arithmetic in BitsetENTCacheImpl.BitsetKey...

In addition to the above-mentioned changes, this release contains
all the changes included up to the Apache Jackrabbit 2.6.0 release.

For more detailed information about all the changes in this and other
Jackrabbit releases, please see the Jackrabbit issue tracker at

    https://issues.apache.org/jira/browse/JCR

Release Contentsusers@jackrabbit.apache.org
----------------

This release consists of a single source archive packaged as a zip file.
The archive can be unpacked with the jar tool from your JDK installation.
See the README.txt file for instructions on how to build this release.

The source archive is accompanied by SHA1 and MD5 checksums and a PGP
signature that you can use to verify the authenticity of your download.
The public key used for the PGP signature can be found at
https://svn.apache.org/repos/asf/jackrabbit/dist/KEYS.

About Apache Jackrabbit
-----------------------

Apache Jackrabbit is a fully conforming implementation of the Content
Repository for Java Technology API (JCR). A content repository is a
hierarchical content store with support for structured and unstructured
content, full text search, versioning, transactions, observation, and
more.

For more information, visit http://jackrabbit.apache.org/

About The Apache Software Foundation
------------------------------------

Established in 1999, The Apache Software Foundation provides organizational,
legal, and financial support for more than 100 freely-available,
collaboratively-developed Open Source projects. The pragmatic Apache License
enables individual and commercial users to easily deploy Apache software;
the Foundation's intellectual property framework limits the legal exposure
of its 2,500+ contributors.

For more information, visit http://www.apache.org/

Trademarks
----------

Apache Jackrabbit, Jackrabbit, Apache, the Apache feather logo, and the Apache
Jackrabbit project logo are trademarks of The Apache Software Foundation.

From dev-return-38469-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Wed Sep 25 19:07:59 2013
Return-Path: <dev-return-38469-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2EEE410471
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Wed, 25 Sep 2013 19:07:59 +0000 (UTC)
Received: (qmail 26086 invoked by uid 500); 25 Sep 2013 19:07:57 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 26050 invoked by uid 500); 25 Sep 2013 19:07:56 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 26035 invoked by uid 99); 25 Sep 2013 19:07:55 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 19:07:55 +0000
Received: from localhost (HELO mail-ie0-f177.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Sep 2013 19:07:55 +0000
Received: by mail-ie0-f177.google.com with SMTP id qd12so119943ieb.22
        for <dev@jackrabbit.apache.org>; Wed, 25 Sep 2013 12:07:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=9IQjt6vJS7ncSDV1qgiKfKmMz4wjPNTLmwCSQN84wDA=;
        b=RZCT8TbxMGItYNW8Us4Zrd53RNABcakF9LWOHGZy79ZuAxxy++PFtgAPId2q9p06NC
         TphG1FiWvkqGo+zleiB2eKBfY0ZoE3AeuGgu4v6xptmCEUjFnvbe7a2AOBUgED/epb0D
         zh6l6VGFGHUg15XTOLAPBt5gAHshjUYqp5ykansClztsKjJKb2z3/cV2nxK7fT3Qg69Y
         JQWXha7CiM5eLqT1qj0uVtlyb8Tyoeq/3axZb+3RFhvw/zbhYU8E+EkLsLY8+4whkNEF
         Jcy+h42xXQWExk1TTJaZEL7Hx/p5mAqqd8wn3GpWDP6RURJKpglORh0B2jN3hKXeOYOy
         M82g==
X-Gm-Message-State: ALoCoQlVk3NoJlXOJP/32Y8SqUQhpq8mHx4BS2zpLl9FIxl2oodfktQYLsPteftRgGkM9KRyo3vG
MIME-Version: 1.0
X-Received: by 10.43.3.196 with SMTP id nz4mr4989159icb.74.1380136074599; Wed,
 25 Sep 2013 12:07:54 -0700 (PDT)
Received: by 10.64.68.20 with HTTP; Wed, 25 Sep 2013 12:07:54 -0700 (PDT)
Date: Wed, 25 Sep 2013 12:07:54 -0700
Message-ID: <CAB+dfi=Sm3NWXhOuhS6KnGsExoeczGzWRBUz5zs-TYLOZ3xdSg@mail.gmail.com>
Subject: [VOTE] Release Apache Jackrabbit FileVault 3.0.0
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

A candidate for the Jackrabbit FileVault 3.0.0 release is available at:

    https://dist.apache.org/repos/dist/dev/jackrabbit/filevault/3.0.0/

The release candidate is a zip archive of the sources in:

    https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/tags/vault-reactor-3.0.0/

The SHA1 checksum of the archive is 2ef6494e23676cf7cf081721a713e381c7be9a58.

A staged Maven repository is available for review at:

    https://repository.apache.org/content/repositories/orgapachejackrabbit-100/

Please vote on releasing this package as Apache Jackrabbit FileVault 3.0.0
The vote is open for the next 72 hours and passes if a majority of at
least three +1 Jackrabbit PMC votes are cast.

    [ ] +1 Release this package as Apache Jackrabbit FileVault 3.0.0
    [ ] -1 Do not release this package because...


My vote is +1.

Regards, Toby

From dev-return-38470-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 10:08:20 2013
Return-Path: <dev-return-38470-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7FD7A10AF6
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 10:08:20 +0000 (UTC)
Received: (qmail 35607 invoked by uid 500); 26 Sep 2013 10:06:51 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 34973 invoked by uid 500); 26 Sep 2013 10:05:32 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 34541 invoked by uid 99); 26 Sep 2013 10:04:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 10:04:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [74.125.82.171] (HELO mail-we0-f171.google.com) (74.125.82.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 10:04:33 +0000
Received: by mail-we0-f171.google.com with SMTP id t61so895391wes.30
        for <dev@jackrabbit.apache.org>; Thu, 26 Sep 2013 03:04:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=obEKE5bY47ei/NqTakiMnzOWSxUSzA2oxxB/NaJNYfY=;
        b=LrCyfiz0lCR2r5n0gth6uRwmHu59ntxZB29GmVeCNbeY3gxaS6WTiPK1si9hQtQVs4
         HlrmteUb+sCk619pC/BZrf3fql4jUuY7wutg6nBNyVpUOiXcH0piIyDU1juCNGKY6Kf2
         7SxzlKtAtdNqwbeD+NJN2DbbiTsS+3ikNDKH8ct5VqeftM6alvnfAcu0gHGn5+bJgGXE
         20VLidQji24gZD2dVVGwM95ZTwqxvt3zId5AouftY3RdAM2wFPM1DfxSdL2bD3uw/bm0
         NErxTHqvTVge+d6f5ol3fz6nfG8g34DkuwOGlb3GqN2EVCCR2JEZUyQAIICc4pqpX3cO
         3bNQ==
X-Gm-Message-State: ALoCoQkDmPnWchVmLWmt6Q/F8O5//rtp+I9yViWicLtXvGtHggS89Tg7I5M2KQUcbKrj7zhwsRaD
X-Received: by 10.194.219.1 with SMTP id pk1mr128914wjc.36.1380189852622;
        Thu, 26 Sep 2013 03:04:12 -0700 (PDT)
Received: from [10.10.100.151] (oosteinde.castasoftware.com. [81.21.138.121])
        by mx.google.com with ESMTPSA id dx7sm1839967wib.8.1969.12.31.16.00.00
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 26 Sep 2013 03:04:11 -0700 (PDT)
Message-ID: <52440699.6060602@douma.nu>
Date: Thu, 26 Sep 2013 12:04:09 +0200
From: Ate Douma <ate@douma.nu>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130803 Thunderbird/17.0.8
MIME-Version: 1.0
To: dev@jackrabbit.apache.org
Subject: Re: [VOTE] Release Apache Jackrabbit FileVault 3.0.0
References: <CAB+dfi=Sm3NWXhOuhS6KnGsExoeczGzWRBUz5zs-TYLOZ3xdSg@mail.gmail.com>
In-Reply-To: <CAB+dfi=Sm3NWXhOuhS6KnGsExoeczGzWRBUz5zs-TYLOZ3xdSg@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm +1 (not-binding) on this release.

There are a few comments I'd like to give however:

- The RELEASE_NOTES.txt indicates JCR-3670 has already been resolved, but this 
is not the case.

- There are two files for LICENSE and LICENSE.txt and for NOTICE and NOTICE.txt.
These files do not contain the same content!

The NOTICE.txt adds a notice that FileVault source code originates from 
Day/Adobe, which is fine, but this file is *not* also distributed with the 
binary artifacts (e.g. under META-INF/ in the jars), which I assume would be the 
intention...

The LICENSE.txt has an extra (leftover?) section under the standard ASL2.0 
header concerning an included Xpath grammer within Jackrabbit subcomponents. 
However AFAIK this is not applicable to (current) FileVault.
This LICENSE.txt is (also) *not* distributed with the binary artifacts, which in 
this case probably is correct :)

- the 'main' artifact is call vault-reactor (as derived from the root pom.xml), 
and therefore likewise the source distribution zip. Might it not be better to 
rename the root pom.xml its name to "vault" or else at least the name of the 
source distribution zip?

Maybe that the NOTICE attribution for Day/Adobe not being distributed is 
problematic for Adobe, but other than that I think these are minor issues which 
can be fixed (if needed) later.

Thanks, Ate


On 09/25/2013 09:07 PM, Tobias Bocanegra wrote:
> A candidate for the Jackrabbit FileVault 3.0.0 release is available at:
>
>      https://dist.apache.org/repos/dist/dev/jackrabbit/filevault/3.0.0/
>
> The release candidate is a zip archive of the sources in:
>
>      https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/tags/vault-reactor-3.0.0/
>
> The SHA1 checksum of the archive is 2ef6494e23676cf7cf081721a713e381c7be9a58.
>
> A staged Maven repository is available for review at:
>
>      https://repository.apache.org/content/repositories/orgapachejackrabbit-100/
>
> Please vote on releasing this package as Apache Jackrabbit FileVault 3.0.0
> The vote is open for the next 72 hours and passes if a majority of at
> least three +1 Jackrabbit PMC votes are cast.
>
>      [ ] +1 Release this package as Apache Jackrabbit FileVault 3.0.0
>      [ ] -1 Do not release this package because...
>
>
> My vote is +1.
>
> Regards, Toby
>


From dev-return-38471-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 16:32:22 2013
Return-Path: <dev-return-38471-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 614E9108DC
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 16:32:22 +0000 (UTC)
Received: (qmail 20061 invoked by uid 500); 26 Sep 2013 16:32:18 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 19816 invoked by uid 500); 26 Sep 2013 16:32:14 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 19696 invoked by uid 99); 26 Sep 2013 16:32:11 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:32:11 +0000
Date: Thu, 26 Sep 2013 16:32:11 +0000 (UTC)
From: "Marcus Smith (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12630128.1359638628069.24959.1380213131317@arcas>
In-Reply-To: <JIRA.12630128.1359638628069@arcas>
References: <JIRA.12630128.1359638628069@arcas>
Subject: [jira] [Commented] (JCR-3509) Workspace maxIdleTime parameter not
 working
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3509?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13778949#comment-13778949 ] 

Marcus Smith commented on JCR-3509:
-----------------------------------

hi, regarding this issue.  How is WorkspaceInfo.active ever set back to false after it is set to true?  I've traced the code from SessionInfo.logout() and do not see active being set to false, no matter how many
active sessions i have (i have debugged the case of zero sessions....active is never false).  This prevents WorkspaceInfo.disposeIfIdle() from ever executing past "if (!initialized || active)".  Have I missed something????  Thanks for the help!
                
> Workspace maxIdleTime parameter not working
> -------------------------------------------
>
>                 Key: JCR-3509
>                 URL: https://issues.apache.org/jira/browse/JCR-3509
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: config
>    Affects Versions: 2.4.3
>         Environment: JSF, SPRING
>            Reporter: Sarfaraaz ASLAM
>            Priority: Minor
>         Attachments: derby.jackrabbit.repository.xml, JcrConfigurer.java
>
>
> would like to set the maximum number of seconds that a workspace can remain unused before the workspace is automatically closed through maxIdleTime parameter but this seems not to work. 

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38472-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 16:34:05 2013
Return-Path: <dev-return-38472-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F6A7108F4
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 16:34:05 +0000 (UTC)
Received: (qmail 27728 invoked by uid 500); 26 Sep 2013 16:34:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 27672 invoked by uid 500); 26 Sep 2013 16:34:03 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 27659 invoked by uid 99); 26 Sep 2013 16:34:03 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:34:03 +0000
Date: Thu, 26 Sep 2013 16:34:03 +0000 (UTC)
From: "Marcus Smith (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12630128.1359638628069.24970.1380213243313@arcas>
In-Reply-To: <JIRA.12630128.1359638628069@arcas>
References: <JIRA.12630128.1359638628069@arcas>
Subject: [jira] [Comment Edited] (JCR-3509) Workspace maxIdleTime parameter
 not working
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3509?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13778949#comment-13778949 ] 

Marcus Smith edited comment on JCR-3509 at 9/26/13 4:32 PM:
------------------------------------------------------------

hi, regarding this issue.  How is WorkspaceInfo.active ever set back to false after it is set to true?  I've traced the code from SessionInfo.logout() and do not see active being set to false, no matter how many
active sessions i have (i have debugged the case of zero sessions....active is never false).  This prevents WorkspaceInfo.disposeIfIdle() from ever executing past the if statement on line 2123 in RepositoryImpl.  Have I missed something????  Thanks for the help!
                
      was (Author: marcussmith):
    hi, regarding this issue.  How is WorkspaceInfo.active ever set back to false after it is set to true?  I've traced the code from SessionInfo.logout() and do not see active being set to false, no matter how many
active sessions i have (i have debugged the case of zero sessions....active is never false).  This prevents WorkspaceInfo.disposeIfIdle() from ever executing past "if (!initialized || active)".  Have I missed something????  Thanks for the help!
                  
> Workspace maxIdleTime parameter not working
> -------------------------------------------
>
>                 Key: JCR-3509
>                 URL: https://issues.apache.org/jira/browse/JCR-3509
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: config
>    Affects Versions: 2.4.3
>         Environment: JSF, SPRING
>            Reporter: Sarfaraaz ASLAM
>            Priority: Minor
>         Attachments: derby.jackrabbit.repository.xml, JcrConfigurer.java
>
>
> would like to set the maximum number of seconds that a workspace can remain unused before the workspace is automatically closed through maxIdleTime parameter but this seems not to work. 

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38473-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 16:37:09 2013
Return-Path: <dev-return-38473-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 554CE1090A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 16:37:09 +0000 (UTC)
Received: (qmail 33241 invoked by uid 500); 26 Sep 2013 16:37:08 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 33189 invoked by uid 500); 26 Sep 2013 16:37:08 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 33178 invoked by uid 99); 26 Sep 2013 16:37:07 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:37:07 +0000
Received: from localhost (HELO mail-ie0-f173.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:37:07 +0000
Received: by mail-ie0-f173.google.com with SMTP id ar20so1669265iec.4
        for <dev@jackrabbit.apache.org>; Thu, 26 Sep 2013 09:37:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=j8EupKHQcj3wywrvx39s7AZE1jXt9/sKUvD1JN/yKzg=;
        b=O7qnqyFjTa7rfdW9Lcgb544FuOWVteEYH3PUZw2pQVssyh3PqR2uhBReMxHJImxNB1
         zFQYggu4OVbARssYEqdTzFaoYka6/ztf+6v8+1iubXdWzyXALou1X3Yl93TnCPfThOl0
         XT/FliTw6yglvw4te4/zCI6sxotx5mjnycftf2ibB+I8/6ILyWbOaN3LgDrcTFhl4vcB
         5DUmRmSMzdnfZH9PfWKXcA4qwdhRCSOvAafzhC3g8OVfDL1P9FIyEAKNkZZIDQaLPWac
         sUmeD7ydqbujcEmpjK+GcstUkuoO2Ejdumo2vn1HnUcfGfud5dOByclUefKo7ixujnNE
         cuXg==
X-Gm-Message-State: ALoCoQk1zjNmM6HAG8Y4Fr0UsvVkChkib9MUNDMUZmy0TIZYAu/pdUawYHO0Hx4Tw9v5uCZH6o7B
MIME-Version: 1.0
X-Received: by 10.42.121.4 with SMTP id h4mr1993904icr.61.1380213426637; Thu,
 26 Sep 2013 09:37:06 -0700 (PDT)
Received: by 10.64.68.20 with HTTP; Thu, 26 Sep 2013 09:37:06 -0700 (PDT)
In-Reply-To: <52440699.6060602@douma.nu>
References: <CAB+dfi=Sm3NWXhOuhS6KnGsExoeczGzWRBUz5zs-TYLOZ3xdSg@mail.gmail.com>
	<52440699.6060602@douma.nu>
Date: Thu, 26 Sep 2013 09:37:06 -0700
Message-ID: <CAB+dfinV_q4Q3Q-68TM1xeVPe5KTRfRr9JcYoGj4-Z7b2w3qjQ@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit FileVault 3.0.0
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

Thanks Ate for the close look. I'll cancel the release and fix those issues.
Regards, Toby

On Thu, Sep 26, 2013 at 3:04 AM, Ate Douma <ate@douma.nu> wrote:
> I'm +1 (not-binding) on this release.
>
> There are a few comments I'd like to give however:
>
> - The RELEASE_NOTES.txt indicates JCR-3670 has already been resolved, but
> this is not the case.
>
> - There are two files for LICENSE and LICENSE.txt and for NOTICE and
> NOTICE.txt.
> These files do not contain the same content!
>
> The NOTICE.txt adds a notice that FileVault source code originates from
> Day/Adobe, which is fine, but this file is *not* also distributed with the
> binary artifacts (e.g. under META-INF/ in the jars), which I assume would be
> the intention...
>
> The LICENSE.txt has an extra (leftover?) section under the standard ASL2.0
> header concerning an included Xpath grammer within Jackrabbit subcomponents.
> However AFAIK this is not applicable to (current) FileVault.
> This LICENSE.txt is (also) *not* distributed with the binary artifacts,
> which in this case probably is correct :)
>
> - the 'main' artifact is call vault-reactor (as derived from the root
> pom.xml), and therefore likewise the source distribution zip. Might it not
> be better to rename the root pom.xml its name to "vault" or else at least
> the name of the source distribution zip?
>
> Maybe that the NOTICE attribution for Day/Adobe not being distributed is
> problematic for Adobe, but other than that I think these are minor issues
> which can be fixed (if needed) later.
>
> Thanks, Ate
>
>
>
> On 09/25/2013 09:07 PM, Tobias Bocanegra wrote:
>>
>> A candidate for the Jackrabbit FileVault 3.0.0 release is available at:
>>
>>      https://dist.apache.org/repos/dist/dev/jackrabbit/filevault/3.0.0/
>>
>> The release candidate is a zip archive of the sources in:
>>
>>
>> https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/tags/vault-reactor-3.0.0/
>>
>> The SHA1 checksum of the archive is
>> 2ef6494e23676cf7cf081721a713e381c7be9a58.
>>
>> A staged Maven repository is available for review at:
>>
>>
>> https://repository.apache.org/content/repositories/orgapachejackrabbit-100/
>>
>> Please vote on releasing this package as Apache Jackrabbit FileVault 3.0.0
>> The vote is open for the next 72 hours and passes if a majority of at
>> least three +1 Jackrabbit PMC votes are cast.
>>
>>      [ ] +1 Release this package as Apache Jackrabbit FileVault 3.0.0
>>      [ ] -1 Do not release this package because...
>>
>>
>> My vote is +1.
>>
>> Regards, Toby
>>
>

From dev-return-38474-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 16:39:29 2013
Return-Path: <dev-return-38474-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F20110926
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 16:39:29 +0000 (UTC)
Received: (qmail 44995 invoked by uid 500); 26 Sep 2013 16:39:29 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 44947 invoked by uid 500); 26 Sep 2013 16:39:28 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 44940 invoked by uid 99); 26 Sep 2013 16:39:28 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:39:28 +0000
Received: from localhost (HELO mail-ie0-f177.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:39:28 +0000
Received: by mail-ie0-f177.google.com with SMTP id qd12so1667643ieb.8
        for <dev@jackrabbit.apache.org>; Thu, 26 Sep 2013 09:39:27 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=gWzsbvs3CeAvITor0vCo5EqmvbYphVPkMbG60mjwlKU=;
        b=CoU8jZddD5n8g70faBE1bCPa6OTbO2GuGbscT4hD/9e6D6NUTY9WyjAznikfz53HWf
         iW3FSZshOWjQlKyJQzgMkmWi3ZI1QZ6YIZK9WoAsYLrQdTSgGZDsvXpZ9MLe61zzvgPP
         tP2CTNV+ljvG2MJrSHKgL2F3uuZnQtTFd/klkhh9HzoVLUwaFEFtK1kl0AJIZjc3j3sp
         lv39gTZzYeRVlaQ/lmIoDekYG5AS5O6iy3PGIStME9ryxyEeLnXhuySNoLquAfw67RDL
         BAKVS1hEfH5LJmk1YBPgO4k8XD1voSteQKGfie+Ep4QJXIn0ChrsICOgGWNpSIonruw1
         gCBQ==
X-Gm-Message-State: ALoCoQnW2GbhQtJQDqEJQq99KrIC7RSIZFAT7Gz55KJue/5fE2lzQVhGdnkBC3EDitWz2R0V1odv
MIME-Version: 1.0
X-Received: by 10.42.54.132 with SMTP id r4mr2102839icg.19.1380213567727; Thu,
 26 Sep 2013 09:39:27 -0700 (PDT)
Received: by 10.64.68.20 with HTTP; Thu, 26 Sep 2013 09:39:27 -0700 (PDT)
Date: Thu, 26 Sep 2013 09:39:27 -0700
Message-ID: <CAB+dfikN59k-rtjnkooN_8mydcMuPmTWYrnytr-Tqsn62jkybQ@mail.gmail.com>
Subject: [CANCELED] Release Apache Jackrabbit FileVault 3.0.0
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

Due to some issues with the included files and release notes, I'm
canceling this release candidate.
Regards, Toby

On Wed, Sep 25, 2013 at 12:07 PM, Tobias Bocanegra <tripod@apache.org> wrote:
> A candidate for the Jackrabbit FileVault 3.0.0 release is available at:
>
>     https://dist.apache.org/repos/dist/dev/jackrabbit/filevault/3.0.0/
>
> The release candidate is a zip archive of the sources in:
>
>     https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/tags/vault-reactor-3.0.0/
>
> The SHA1 checksum of the archive is 2ef6494e23676cf7cf081721a713e381c7be9a58.
>
> A staged Maven repository is available for review at:
>
>     https://repository.apache.org/content/repositories/orgapachejackrabbit-100/
>
> Please vote on releasing this package as Apache Jackrabbit FileVault 3.0.0
> The vote is open for the next 72 hours and passes if a majority of at
> least three +1 Jackrabbit PMC votes are cast.
>
>     [ ] +1 Release this package as Apache Jackrabbit FileVault 3.0.0
>     [ ] -1 Do not release this package because...
>
>
> My vote is +1.
>
> Regards, Toby

From dev-return-38475-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 16:48:55 2013
Return-Path: <dev-return-38475-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D27F10994
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 16:48:55 +0000 (UTC)
Received: (qmail 80866 invoked by uid 500); 26 Sep 2013 16:48:55 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 80728 invoked by uid 500); 26 Sep 2013 16:48:54 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 80707 invoked by uid 99); 26 Sep 2013 16:48:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:48:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jukka.zitting@gmail.com designates 209.85.214.177 as permitted sender)
Received: from [209.85.214.177] (HELO mail-ob0-f177.google.com) (209.85.214.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:48:48 +0000
Received: by mail-ob0-f177.google.com with SMTP id wp18so2112892obc.36
        for <dev@jackrabbit.apache.org>; Thu, 26 Sep 2013 09:48:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=6wB+tlyEHmK2jGAqYe8pCAB517je/w/0iKivLeYW2yw=;
        b=TOD3ACnqsgTwBkm63j91TpR4nF4+/v6wCStxnkNVeqsTTtB6t5BxqQF6b5eu9gBI+g
         iTOocWoj0mfIqjTd0zekBhzLtwUf8PH354q/REHFxavMyGz3CFkbew/HEtkIRlfHwRqh
         n5DFNFWZzgbEm6Q79BO+nYZAJJQy99I3+Zp2zB6o7t66zgyv/5CqxLzZK3wkVh+yFWqd
         CBmGqqIp0ceOSOC2vrFBq+evHbD5f0TQ838/pO7QMrAuzAUG6rPEJ0cuxwwz+IPR2vAb
         FChOVYokamga0oxC9r5/OdSukx+kT89z4DkXUqwjlxbLeNNRgdTtGCuE8GaSK25VhiOE
         ctjg==
X-Received: by 10.60.80.8 with SMTP id n8mr1553852oex.33.1380214107986; Thu,
 26 Sep 2013 09:48:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.182.39.7 with HTTP; Thu, 26 Sep 2013 09:48:07 -0700 (PDT)
In-Reply-To: <CAB+dfinV_q4Q3Q-68TM1xeVPe5KTRfRr9JcYoGj4-Z7b2w3qjQ@mail.gmail.com>
References: <CAB+dfi=Sm3NWXhOuhS6KnGsExoeczGzWRBUz5zs-TYLOZ3xdSg@mail.gmail.com>
 <52440699.6060602@douma.nu> <CAB+dfinV_q4Q3Q-68TM1xeVPe5KTRfRr9JcYoGj4-Z7b2w3qjQ@mail.gmail.com>
From: Jukka Zitting <jukka.zitting@gmail.com>
Date: Thu, 26 Sep 2013 12:48:07 -0400
Message-ID: <CAOFYJNa6a1DciCUAikP-w7e6Ve5e5Eq-Nh3hXW4jTy38U1G_XA@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit FileVault 3.0.0
To: Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On Thu, Sep 26, 2013 at 12:37 PM, Tobias Bocanegra <tripod@apache.org> wrote:
> Thanks Ate for the close look. I'll cancel the release and fix those issues.

You may want to take a look at the "apache-release" profile
definitions in the main Jackrabbit and Oak POMs. There we have some
extra tooling that replaces the default "source-release" mechanism
that hasn't worked too well for us.

BR,

Jukka Zitting

From dev-return-38476-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 16:59:58 2013
Return-Path: <dev-return-38476-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6F812109CC
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 16:59:58 +0000 (UTC)
Received: (qmail 3530 invoked by uid 500); 26 Sep 2013 16:59:53 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 3493 invoked by uid 500); 26 Sep 2013 16:59:51 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 3481 invoked by uid 99); 26 Sep 2013 16:59:49 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:59:49 +0000
Received: from localhost (HELO mail-ie0-f177.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 16:59:49 +0000
Received: by mail-ie0-f177.google.com with SMTP id qd12so1698852ieb.8
        for <dev@jackrabbit.apache.org>; Thu, 26 Sep 2013 09:59:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=T4BB8Z9GvJmE5mZtYcN2HNazAGbU8Kgjt6nxpV33K7k=;
        b=XbV+0W0HDuBYZIX9A5AUWd+GldX6/S9pfIci+mxHDrhU6uiyyvgkdfVkUx61BgSebX
         2/pwL5DRBcUQqrGt2g6zgJevvm+aN7XvopI3M3Zc8cpXiiQzVZVgQRTJYMrcATqhfNOo
         Pn8lRIBKL/Qt7AoyLfKzifAAb6hlzli7NDuT482nS6XKcD3GyI7zCJFW+kClMMXlUlak
         B1T8odn5nYCBH/ymD2U2g56WRXKO42ebF2t/7coS9xJFWimmcDuqsR7P/q5X8inDkPVw
         tbB9P+k5OyAoktC5cxgmto2yDktB7tnjIioQZHOsoZSMT2pQhoM2R5fgptJgpAQ2OWAM
         vnQQ==
X-Gm-Message-State: ALoCoQkQ9TOs0Mptm+cnBFQzQRXhS9Bx/GkFC333itSboOQHLreSCeSfnJvPCZPnI9l9HiqmT+Rs
MIME-Version: 1.0
X-Received: by 10.42.62.196 with SMTP id z4mr2156120ich.49.1380214788383; Thu,
 26 Sep 2013 09:59:48 -0700 (PDT)
Received: by 10.64.68.20 with HTTP; Thu, 26 Sep 2013 09:59:48 -0700 (PDT)
In-Reply-To: <CAOFYJNa6a1DciCUAikP-w7e6Ve5e5Eq-Nh3hXW4jTy38U1G_XA@mail.gmail.com>
References: <CAB+dfi=Sm3NWXhOuhS6KnGsExoeczGzWRBUz5zs-TYLOZ3xdSg@mail.gmail.com>
	<52440699.6060602@douma.nu>
	<CAB+dfinV_q4Q3Q-68TM1xeVPe5KTRfRr9JcYoGj4-Z7b2w3qjQ@mail.gmail.com>
	<CAOFYJNa6a1DciCUAikP-w7e6Ve5e5Eq-Nh3hXW4jTy38U1G_XA@mail.gmail.com>
Date: Thu, 26 Sep 2013 09:59:48 -0700
Message-ID: <CAB+dfim6qeZ_bW-OUhGG04wQbSfQ7UubRQhEsit6Hh=5f0=+fA@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit FileVault 3.0.0
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Sep 26, 2013 at 9:48 AM, Jukka Zitting <jukka.zitting@gmail.com> wrote:
> Hi,
>
> On Thu, Sep 26, 2013 at 12:37 PM, Tobias Bocanegra <tripod@apache.org> wrote:
>> Thanks Ate for the close look. I'll cancel the release and fix those issues.
>
> You may want to take a look at the "apache-release" profile
> definitions in the main Jackrabbit and Oak POMs. There we have some
> extra tooling that replaces the default "source-release" mechanism
> that hasn't worked too well for us.

Thanks Jukka, I'm on it :-)

From dev-return-38477-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Thu Sep 26 18:09:31 2013
Return-Path: <dev-return-38477-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 863F910C9A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Thu, 26 Sep 2013 18:09:31 +0000 (UTC)
Received: (qmail 90901 invoked by uid 500); 26 Sep 2013 18:09:25 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 90525 invoked by uid 500); 26 Sep 2013 18:09:24 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 90476 invoked by uid 99); 26 Sep 2013 18:09:22 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 18:09:22 +0000
Received: from localhost (HELO mail-ie0-f179.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Sep 2013 18:09:21 +0000
Received: by mail-ie0-f179.google.com with SMTP id e14so1786039iej.38
        for <dev@jackrabbit.apache.org>; Thu, 26 Sep 2013 11:09:20 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=H8hIXcm3LRWzB4lEMStNDpfQmVMcxBQS7ACi9AJB09Y=;
        b=G84o+2sv9sU2YoHFJy/VZk42USQSM+Hie0Y5z/YvGKfjne7IhlBgP0I46WxHO/zeY4
         L15QWRFulIPWJlIMX5PGna/faRJnwbXN8N0XW7ki6c0Giv0XUtVDlHaYtLK8YTZNZhQN
         NuZ07DuxY4qdFzee1ERJn2o5D1baO8GqowoHF1w3rFWPCKnO9qxjyEGYyN+hBanuIYZf
         +2a430dxWW6St3RO0SGRKS9k5qzx4MrOxBN7CS0VvpX3Ec8D+DWZdLB0CB1uph5Hjzld
         0LGWZ2us/oOWmTBmGCP4L/+mtLjXhH/WQaNp5vOTJTRSQ21ZwXHARJbYoBfeL7qZHEsl
         46ow==
X-Gm-Message-State: ALoCoQmDL1EPhHXmrLamFYy/imZRvusipP6/d9TJkDT3/zSgvJzi8WlmIsFpfJVpfziS1LlEBzom
MIME-Version: 1.0
X-Received: by 10.43.82.69 with SMTP id ab5mr1637590icc.95.1380218960271; Thu,
 26 Sep 2013 11:09:20 -0700 (PDT)
Received: by 10.64.68.20 with HTTP; Thu, 26 Sep 2013 11:09:20 -0700 (PDT)
Date: Thu, 26 Sep 2013 11:09:20 -0700
Message-ID: <CAB+dfik4zNV1Es2nYKdSUT0XzZUDRdrmRLQyWvCB-ENGJg_TiQ@mail.gmail.com>
Subject: [VOTE] Release Apache Jackrabbit Filevault 3.0.0
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

A (new :-) candidate for the Jackrabbit Filevault 3.0.0 release is available at:

https://dist.apache.org/repos/dist/dev/jackrabbit/filevault/3.0.0/

The release candidate is a zip archive of the sources in:

https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/tags/3.0.0/

The SHA1 checksum of the archive is 3d0a6b769df6eb76db77705dd5be5ff18a55457f.

A staged Maven repository is available for review at:

https://repository.apache.org/content/repositories/orgapachejackrabbit-102/

Please vote on releasing this package as Apache Jackrabbit Filevault 3.0.0.
The vote is open for the next 72 hours and passes if a majority of at
least three +1 Jackrabbit PMC votes are cast.

[ ] +1 Release this package as Apache Jackrabbit Filevault 3.0.0
[ ] -1 Do not release this package because...

Here's my +1
Regards, Toby

From dev-return-38478-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Fri Sep 27 14:45:16 2013
Return-Path: <dev-return-38478-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64D4610F2B
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Fri, 27 Sep 2013 14:45:16 +0000 (UTC)
Received: (qmail 78169 invoked by uid 500); 27 Sep 2013 14:45:13 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 75531 invoked by uid 500); 27 Sep 2013 14:45:05 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 74814 invoked by uid 99); 27 Sep 2013 14:45:03 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Sep 2013 14:45:03 +0000
Date: Fri, 27 Sep 2013 14:45:02 +0000 (UTC)
From: "Jukka Zitting (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670945.1380292983158.30354.1380293102516@arcas>
In-Reply-To: <JIRA.12670945.1380292983158@arcas>
References: <JIRA.12670945.1380292983158@arcas>
Subject: [jira] [Created] (JCR-3671) Config DTD doesn't allow
 ProtectedItemImporter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Jukka Zitting created JCR-3671:
----------------------------------

             Summary: Config DTD doesn't allow ProtectedItemImporter
                 Key: JCR-3671
                 URL: https://issues.apache.org/jira/browse/JCR-3671
             Project: Jackrabbit Content Repository
          Issue Type: Bug
          Components: jackrabbit-core
    Affects Versions: 2.7.1, 2.6.3, 2.4.4
            Reporter: Jukka Zitting
            Assignee: Jukka Zitting
            Priority: Minor


The repository configuration parser accepts all of {{<ProtectedItemImporter>}}, {{<ProtectedPropertyImporter>}} and {{<ProtectedNodeImporter>}} as synonyms inside the {{<Import>}} configuration element, but the related DTD only declares the latter two as allowed elements. We should fix the DTD to prevent incorrect warnings. 

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38479-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Fri Sep 27 15:37:57 2013
Return-Path: <dev-return-38479-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D0A51014E
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Fri, 27 Sep 2013 15:37:57 +0000 (UTC)
Received: (qmail 97852 invoked by uid 500); 27 Sep 2013 15:37:54 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 97740 invoked by uid 500); 27 Sep 2013 15:37:52 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 97723 invoked by uid 99); 27 Sep 2013 15:37:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Sep 2013 15:37:50 +0000
X-ASF-Spam-Status: No, hits=-2000.0 required=5.0
	tests=ALL_TRUSTED
X-Spam-Check-By: apache.org
Received: from [140.211.11.8] (HELO aegis.apache.org) (140.211.11.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Sep 2013 15:37:47 +0000
Received: from aegis.apache.org (localhost [127.0.0.1])
	by aegis.apache.org (Postfix) with ESMTP id 8B422C04EA;
	Fri, 27 Sep 2013 15:37:26 +0000 (UTC)
Date: Fri, 27 Sep 2013 15:37:24 +0000 (UTC)
From: Apache Jenkins Server <jenkins@builds.apache.org>
To: dev@jackrabbit.apache.org, jukka.zitting@gmail.com
Message-ID: <2050494457.4555.1380296246556.JavaMail.hudson@aegis>
In-Reply-To: <1440512759.3605.1379955153669.JavaMail.hudson@aegis>
References: <1440512759.3605.1379955153669.JavaMail.hudson@aegis>
Subject: Jackrabbit-trunk - Build # 2192 - Fixed
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_4554_1883952857.1380296245601"
X-Jenkins-Job: Jackrabbit-trunk
X-Jenkins-Result: SUCCESS
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4554_1883952857.1380296245601
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

The Apache Jenkins build system has built Jackrabbit-trunk (build #2192)

Status: Fixed

Check console output at https://builds.apache.org/job/Jackrabbit-trunk/2192/ to view the results.
------=_Part_4554_1883952857.1380296245601--

From dev-return-38480-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sat Sep 28 01:27:04 2013
Return-Path: <dev-return-38480-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C9CA1092A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sat, 28 Sep 2013 01:27:04 +0000 (UTC)
Received: (qmail 22470 invoked by uid 500); 28 Sep 2013 01:27:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 22404 invoked by uid 500); 28 Sep 2013 01:27:03 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 22335 invoked by uid 99); 28 Sep 2013 01:27:02 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Sep 2013 01:27:02 +0000
Date: Sat, 28 Sep 2013 01:27:02 +0000 (UTC)
From: "Jukka Zitting (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670945.1380292983158.34091.1380331622860@arcas>
In-Reply-To: <JIRA.12670945.1380292983158@arcas>
References: <JIRA.12670945.1380292983158@arcas>
Subject: [jira] [Updated] (JCR-3671) Config DTD doesn't allow
 ProtectedItemImporter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3671?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Jukka Zitting updated JCR-3671:
-------------------------------

    Description: The repository configuration parser accepts all of <ProtectedItemImporter>, <ProtectedPropertyImporter> and <ProtectedNodeImporter> as synonyms inside the <Import> configuration element, but the related DTD only declares the latter two as allowed elements. We should fix the DTD to prevent incorrect warnings.   (was: The repository configuration parser accepts all of {{<ProtectedItemImporter>}}, {{<ProtectedPropertyImporter>}} and {{<ProtectedNodeImporter>}} as synonyms inside the {{<Import>}} configuration element, but the related DTD only declares the latter two as allowed elements. We should fix the DTD to prevent incorrect warnings. )
    
> Config DTD doesn't allow ProtectedItemImporter
> ----------------------------------------------
>
>                 Key: JCR-3671
>                 URL: https://issues.apache.org/jira/browse/JCR-3671
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core
>    Affects Versions: 2.4.4, 2.6.3, 2.7.1
>            Reporter: Jukka Zitting
>            Assignee: Jukka Zitting
>            Priority: Minor
>
> The repository configuration parser accepts all of <ProtectedItemImporter>, <ProtectedPropertyImporter> and <ProtectedNodeImporter> as synonyms inside the <Import> configuration element, but the related DTD only declares the latter two as allowed elements. We should fix the DTD to prevent incorrect warnings. 

--
This message is automatically generated by JIRA.
If you think it was sent incorrectly, please contact your JIRA administrators
For more information on JIRA, see: http://www.atlassian.com/software/jira

From dev-return-38481-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sat Sep 28 01:53:45 2013
Return-Path: <dev-return-38481-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F56210995
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sat, 28 Sep 2013 01:53:45 +0000 (UTC)
Received: (qmail 44112 invoked by uid 500); 28 Sep 2013 01:53:45 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 44069 invoked by uid 500); 28 Sep 2013 01:53:45 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 44062 invoked by uid 99); 28 Sep 2013 01:53:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Sep 2013 01:53:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jukka.zitting@gmail.com designates 209.85.214.169 as permitted sender)
Received: from [209.85.214.169] (HELO mail-ob0-f169.google.com) (209.85.214.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Sep 2013 01:53:38 +0000
Received: by mail-ob0-f169.google.com with SMTP id wp4so3740269obc.28
        for <dev@jackrabbit.apache.org>; Fri, 27 Sep 2013 18:53:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=sp0IifLNW4c1jzxFdEkM4Tl4F5gf6JiWlQgYT9xl7Dw=;
        b=X1Xx0AujHEWa5Edtg/wlfQnm/FYPP0t1vcmlptCOKyCfUwRj04uujw5n3GLSuQnUJp
         4AWSOoFL+FNafObd5qaLeAzJvxWOmf3m8IRZwD4zU2GWzc++LDnCLH/Qde1emGML0GdZ
         vi+RPKPe6dYGRIt54sSXQGBdd2bPdaKjlJ6WF0Qz1DHDYRU6HJjaONaSDoF+DifgALBu
         eqwtYm5M7kCHNywoTzUBCM/9trSr3fh6CLQo7EdiFnq6XtMs8D+UiY4DRVd3JwhU1E09
         j+Jf3f6lbD7LEjyDN6oRzpolWQ5v/DWjWNrO9IroixrO4o+qU3gr7tGoWQ0jj6aKuute
         k1zQ==
X-Received: by 10.182.80.196 with SMTP id t4mr8479565obx.1.1380333197484; Fri,
 27 Sep 2013 18:53:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.182.39.7 with HTTP; Fri, 27 Sep 2013 18:52:57 -0700 (PDT)
In-Reply-To: <CAB+dfik4zNV1Es2nYKdSUT0XzZUDRdrmRLQyWvCB-ENGJg_TiQ@mail.gmail.com>
References: <CAB+dfik4zNV1Es2nYKdSUT0XzZUDRdrmRLQyWvCB-ENGJg_TiQ@mail.gmail.com>
From: Jukka Zitting <jukka.zitting@gmail.com>
Date: Fri, 27 Sep 2013 21:52:57 -0400
Message-ID: <CAOFYJNbFBowi37BtiupgaY1y85V1c-3r39uxPFKbOLBBDcNBng@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit Filevault 3.0.0
To: Jackrabbit Developers <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On Thu, Sep 26, 2013 at 2:09 PM, Tobias Bocanegra <tripod@apache.org> wrote:
> Please vote on releasing this package as Apache Jackrabbit Filevault 3.0.0.

    [x] +1 Release this package as Apache Jackrabbit Filevault 3.0.0

Looks good to me! The only things you should add before pushing the
release out are the MD5 and SHA checksum files as described in [1].

PS. I'm getting three NPEs from MetaFileTest on Windows. It seems to
be a OS-specific failure and related to just the specifics of the test
case, so is not important enough to block the release.

[1] http://www.apache.org/dev/release-signing.html#basic-facts

BR,

Jukka Zitting

From dev-return-38482-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sat Sep 28 06:41:52 2013
Return-Path: <dev-return-38482-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 23D0210D34
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sat, 28 Sep 2013 06:41:51 +0000 (UTC)
Received: (qmail 14200 invoked by uid 500); 28 Sep 2013 06:41:12 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 14131 invoked by uid 500); 28 Sep 2013 06:40:59 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 14122 invoked by uid 99); 28 Sep 2013 06:40:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Sep 2013 06:40:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tommaso.teofili@gmail.com designates 209.85.220.49 as permitted sender)
Received: from [209.85.220.49] (HELO mail-pa0-f49.google.com) (209.85.220.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Sep 2013 06:40:46 +0000
Received: by mail-pa0-f49.google.com with SMTP id ld10so3679714pab.22
        for <dev@jackrabbit.apache.org>; Fri, 27 Sep 2013 23:40:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=jdeUOHI15C5LQRsTo/msMWaO5zpUlr9s2Vix6HkQAes=;
        b=l0WK3Za6lmHvfF+FYN8fnK/BQmw3nJQREQGNLjauQgPp819eTS8hQ3knevvnDD2Im7
         n8wkmwX3OOSoeC7rcCocdldB/O2lSzYtfCZ2Ep0Jmz9ykSWCf72TsX2RGRrzT7yjZtVA
         ekeSZfUNWbp56KmaNdDvxWJVeNciruisUqq7AmscvsDIr42juMyFQACb0TPEDIJPHwtH
         z/Kv5iDAvUWptmOODd5sjWltWXww0k3XbfUQBypecpM+zqSaE02dqcUVzHHCBREAo1qN
         CyjB+dbzDEI9iAqMzYebTI0UjsLY1hnRRvn7KH8JZtNfAMEfL13pa6aL1Ec/8sMI74dB
         ma3Q==
X-Received: by 10.68.170.133 with SMTP id am5mr11657902pbc.104.1380350424596;
 Fri, 27 Sep 2013 23:40:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.82.134 with HTTP; Fri, 27 Sep 2013 23:39:43 -0700 (PDT)
In-Reply-To: <CAOFYJNbFBowi37BtiupgaY1y85V1c-3r39uxPFKbOLBBDcNBng@mail.gmail.com>
References: <CAB+dfik4zNV1Es2nYKdSUT0XzZUDRdrmRLQyWvCB-ENGJg_TiQ@mail.gmail.com>
 <CAOFYJNbFBowi37BtiupgaY1y85V1c-3r39uxPFKbOLBBDcNBng@mail.gmail.com>
From: Tommaso Teofili <tommaso.teofili@gmail.com>
Date: Sat, 28 Sep 2013 08:39:43 +0200
Message-ID: <CAGnSx05DnUkze-B7JpzMw_=MfWpLouF-yg5JJM6cBQp_So6csg@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit Filevault 3.0.0
To: dev@jackrabbit.apache.org
Content-Type: multipart/alternative; boundary=047d7b6d8ea4b94dcf04e76be0e4
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b6d8ea4b94dcf04e76be0e4
Content-Type: text/plain; charset=ISO-8859-1

+1

Tommaso


2013/9/28 Jukka Zitting <jukka.zitting@gmail.com>

> Hi,
>
> On Thu, Sep 26, 2013 at 2:09 PM, Tobias Bocanegra <tripod@apache.org>
> wrote:
> > Please vote on releasing this package as Apache Jackrabbit Filevault
> 3.0.0.
>
>     [x] +1 Release this package as Apache Jackrabbit Filevault 3.0.0
>
> Looks good to me! The only things you should add before pushing the
> release out are the MD5 and SHA checksum files as described in [1].
>
> PS. I'm getting three NPEs from MetaFileTest on Windows. It seems to
> be a OS-specific failure and related to just the specifics of the test
> case, so is not important enough to block the release.
>
> [1] http://www.apache.org/dev/release-signing.html#basic-facts
>
> BR,
>
> Jukka Zitting
>

--047d7b6d8ea4b94dcf04e76be0e4
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">+1<div><br></div><div>Tommaso</div></div><div class=3D"gma=
il_extra"><br><br><div class=3D"gmail_quote">2013/9/28 Jukka Zitting <span =
dir=3D"ltr">&lt;<a href=3D"mailto:jukka.zitting@gmail.com" target=3D"_blank=
">jukka.zitting@gmail.com</a>&gt;</span><br>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Hi,<br>
<div class=3D"im"><br>
On Thu, Sep 26, 2013 at 2:09 PM, Tobias Bocanegra &lt;<a href=3D"mailto:tri=
pod@apache.org">tripod@apache.org</a>&gt; wrote:<br>
&gt; Please vote on releasing this package as Apache Jackrabbit Filevault 3=
.0.0.<br>
<br>
</div>=A0 =A0 [x] +1 Release this package as Apache Jackrabbit Filevault 3.=
0.0<br>
<br>
Looks good to me! The only things you should add before pushing the<br>
release out are the MD5 and SHA checksum files as described in [1].<br>
<br>
PS. I&#39;m getting three NPEs from MetaFileTest on Windows. It seems to<br=
>
be a OS-specific failure and related to just the specifics of the test<br>
case, so is not important enough to block the release.<br>
<br>
[1] <a href=3D"http://www.apache.org/dev/release-signing.html#basic-facts" =
target=3D"_blank">http://www.apache.org/dev/release-signing.html#basic-fact=
s</a><br>
<br>
BR,<br>
<br>
Jukka Zitting<br>
</blockquote></div><br></div>

--047d7b6d8ea4b94dcf04e76be0e4--

From dev-return-38483-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sun Sep 29 03:43:34 2013
Return-Path: <dev-return-38483-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56C0710D3A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sun, 29 Sep 2013 03:43:34 +0000 (UTC)
Received: (qmail 21783 invoked by uid 500); 29 Sep 2013 03:43:31 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 21407 invoked by uid 500); 29 Sep 2013 03:43:27 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 21396 invoked by uid 99); 29 Sep 2013 03:43:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 03:43:24 +0000
Date: Sun, 29 Sep 2013 03:43:24 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668985.1379415352125.244.1380426204387@arcas>
In-Reply-To: <JIRA.12668985.1379415352125@arcas>
References: <JIRA.12668985.1379415352125@arcas>
Subject: [jira] [Commented] (JCR-3667) Possible regression with accepted
 content types when extracting and indexing binary values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3667?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137812=
30#comment-13781230 ]=20

frank commented on JCR-3667:
----------------------------

In the issue: JCR-3476, it says
This is unnecessarily expensive because the binary is fetched. Also an empt=
y field is added to the index document.

While Tika v1.4 solves a issue : TIKA-1133
In some cases it is beneficial to allow empty and duplicate Tika metadata v=
alues for multi-valued XML elements like RDF bags.

Current Jackrabbit depends on Tika v1.3, how about upgrading Tika to versio=
n 1.4 and check to see whether this problem solved or not?

> Possible regression with accepted content types when extracting and index=
ing binary values
> -------------------------------------------------------------------------=
-----------------
>
>                 Key: JCR-3667
>                 URL: https://issues.apache.org/jira/browse/JCR-3667
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.4.4
>            Reporter: C=C3=A9dric Damioli
>             Fix For: 2.4.5, 2.6.4, 2.7.2
>
>
> JCR-3476 introduced a mime-type test before parsing binary values, based =
on Tika's supported parsers.
> This may lead to incorrect behaviours, with a "text/xml" not being extrac=
ted and indexed because the XMLParser does not declare "text/xml" as a supp=
orted type.
> The problem here is that there is a regression between 2.4.3 and 2.4.4, b=
ecause the same content was previously well recognized by Tika's Detector a=
nd then extracted.
> Furthermore, it seems to me inconsistent on one hand to rely on the decla=
red content type and on the other hand to delegate the actual type detectio=
n to Tika ?=20
> This may lead to cases where the jcr:mimeType value is set to eg. "applic=
ation/pdf" but detected and parsed by Tika as "text/plain" with no error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38485-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sun Sep 29 03:46:19 2013
Return-Path: <dev-return-38485-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7CDBB10D44
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sun, 29 Sep 2013 03:46:19 +0000 (UTC)
Received: (qmail 22460 invoked by uid 500); 29 Sep 2013 03:45:56 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 22117 invoked by uid 500); 29 Sep 2013 03:45:50 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 22016 invoked by uid 99); 29 Sep 2013 03:45:45 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 03:45:45 +0000
Date: Sun, 29 Sep 2013 03:45:45 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668985.1379415352125.256.1380426345697@arcas>
In-Reply-To: <JIRA.12668985.1379415352125@arcas>
References: <JIRA.12668985.1379415352125@arcas>
Subject: [jira] [Commented] (JCR-3667) Possible regression with accepted
 content types when extracting and indexing binary values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3667?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137812=
33#comment-13781233 ]=20

frank commented on JCR-3667:
----------------------------

http://svn.apache.org/repos/asf/jackrabbit/tags/2.6.3/jackrabbit-parent/pom=
.xml
change tika.version property to:

<tika.version>1.4</tika.version>

> Possible regression with accepted content types when extracting and index=
ing binary values
> -------------------------------------------------------------------------=
-----------------
>
>                 Key: JCR-3667
>                 URL: https://issues.apache.org/jira/browse/JCR-3667
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.4.4, 2.6.3
>            Reporter: C=C3=A9dric Damioli
>              Labels: patch
>             Fix For: 2.4.5, 2.6.4, 2.7.2
>
>
> JCR-3476 introduced a mime-type test before parsing binary values, based =
on Tika's supported parsers.
> This may lead to incorrect behaviours, with a "text/xml" not being extrac=
ted and indexed because the XMLParser does not declare "text/xml" as a supp=
orted type.
> The problem here is that there is a regression between 2.4.3 and 2.4.4, b=
ecause the same content was previously well recognized by Tika's Detector a=
nd then extracted.
> Furthermore, it seems to me inconsistent on one hand to rely on the decla=
red content type and on the other hand to delegate the actual type detectio=
n to Tika ?=20
> This may lead to cases where the jcr:mimeType value is set to eg. "applic=
ation/pdf" but detected and parsed by Tika as "text/plain" with no error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38484-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sun Sep 29 03:46:21 2013
Return-Path: <dev-return-38484-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D7AE710D4D
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sun, 29 Sep 2013 03:46:21 +0000 (UTC)
Received: (qmail 22737 invoked by uid 500); 29 Sep 2013 03:46:03 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 22085 invoked by uid 500); 29 Sep 2013 03:45:49 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 22009 invoked by uid 99); 29 Sep 2013 03:45:45 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 03:45:45 +0000
Date: Sun, 29 Sep 2013 03:45:45 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668985.1379415352125.254.1380426345298@arcas>
In-Reply-To: <JIRA.12668985.1379415352125@arcas>
References: <JIRA.12668985.1379415352125@arcas>
Subject: [jira] [Updated] (JCR-3667) Possible regression with accepted
 content types when extracting and indexing binary values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3667?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

frank updated JCR-3667:
-----------------------

               Labels: patch  (was: )
    Affects Version/s: 2.6.3
               Status: Patch Available  (was: Open)

upgrade tika from v1.3 to v1.4

> Possible regression with accepted content types when extracting and index=
ing binary values
> -------------------------------------------------------------------------=
-----------------
>
>                 Key: JCR-3667
>                 URL: https://issues.apache.org/jira/browse/JCR-3667
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.6.3, 2.4.4
>            Reporter: C=C3=A9dric Damioli
>              Labels: patch
>             Fix For: 2.4.5, 2.6.4, 2.7.2
>
>
> JCR-3476 introduced a mime-type test before parsing binary values, based =
on Tika's supported parsers.
> This may lead to incorrect behaviours, with a "text/xml" not being extrac=
ted and indexed because the XMLParser does not declare "text/xml" as a supp=
orted type.
> The problem here is that there is a regression between 2.4.3 and 2.4.4, b=
ecause the same content was previously well recognized by Tika's Detector a=
nd then extracted.
> Furthermore, it seems to me inconsistent on one hand to rely on the decla=
red content type and on the other hand to delegate the actual type detectio=
n to Tika ?=20
> This may lead to cases where the jcr:mimeType value is set to eg. "applic=
ation/pdf" but detected and parsed by Tika as "text/plain" with no error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38486-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sun Sep 29 03:49:27 2013
Return-Path: <dev-return-38486-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4DD5E10D5C
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sun, 29 Sep 2013 03:49:27 +0000 (UTC)
Received: (qmail 24774 invoked by uid 500); 29 Sep 2013 03:49:26 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 24503 invoked by uid 500); 29 Sep 2013 03:49:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 24490 invoked by uid 99); 29 Sep 2013 03:49:25 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 03:49:25 +0000
Date: Sun, 29 Sep 2013 03:49:24 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668985.1379415352125.262.1380426564967@arcas>
In-Reply-To: <JIRA.12668985.1379415352125@arcas>
References: <JIRA.12668985.1379415352125@arcas>
Subject: [jira] [Commented] (JCR-3667) Possible regression with accepted
 content types when extracting and indexing binary values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3667?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137812=
35#comment-13781235 ]=20

frank commented on JCR-3667:
----------------------------

BTW, tika supports text/xml mimetype, please check:

http://tika.apache.org/1.4/formats.html#XML_and_derived_formats

http://tika.apache.org/1.3/formats.html#XML_and_derived_formats

> Possible regression with accepted content types when extracting and index=
ing binary values
> -------------------------------------------------------------------------=
-----------------
>
>                 Key: JCR-3667
>                 URL: https://issues.apache.org/jira/browse/JCR-3667
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.4.4, 2.6.3
>            Reporter: C=C3=A9dric Damioli
>              Labels: patch
>             Fix For: 2.4.5, 2.6.4, 2.7.2
>
>
> JCR-3476 introduced a mime-type test before parsing binary values, based =
on Tika's supported parsers.
> This may lead to incorrect behaviours, with a "text/xml" not being extrac=
ted and indexed because the XMLParser does not declare "text/xml" as a supp=
orted type.
> The problem here is that there is a regression between 2.4.3 and 2.4.4, b=
ecause the same content was previously well recognized by Tika's Detector a=
nd then extracted.
> Furthermore, it seems to me inconsistent on one hand to rely on the decla=
red content type and on the other hand to delegate the actual type detectio=
n to Tika ?=20
> This may lead to cases where the jcr:mimeType value is set to eg. "applic=
ation/pdf" but detected and parsed by Tika as "text/plain" with no error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38487-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sun Sep 29 03:51:33 2013
Return-Path: <dev-return-38487-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8A17C10D61
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sun, 29 Sep 2013 03:51:33 +0000 (UTC)
Received: (qmail 25375 invoked by uid 500); 29 Sep 2013 03:51:30 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 25337 invoked by uid 500); 29 Sep 2013 03:51:29 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 25320 invoked by uid 99); 29 Sep 2013 03:51:26 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 03:51:26 +0000
Date: Sun, 29 Sep 2013 03:51:26 +0000 (UTC)
From: "frank (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12668985.1379415352125.269.1380426686522@arcas>
In-Reply-To: <JIRA.12668985.1379415352125@arcas>
References: <JIRA.12668985.1379415352125@arcas>
Subject: [jira] [Comment Edited] (JCR-3667) Possible regression with
 accepted content types when extracting and indexing binary values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3667?page=3Dcom.atlassian.j=
ira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=3D137812=
33#comment-13781233 ]=20

frank edited comment on JCR-3667 at 9/29/13 3:50 AM:
-----------------------------------------------------

http://svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-parent/pom.xml
change tika.version property to:

<tika.version>1.4</tika.version>


was (Author: surfie):
http://svn.apache.org/repos/asf/jackrabbit/tags/2.6.3/jackrabbit-parent/pom=
.xml
change tika.version property to:

<tika.version>1.4</tika.version>

> Possible regression with accepted content types when extracting and index=
ing binary values
> -------------------------------------------------------------------------=
-----------------
>
>                 Key: JCR-3667
>                 URL: https://issues.apache.org/jira/browse/JCR-3667
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>    Affects Versions: 2.4.4, 2.6.3
>            Reporter: C=C3=A9dric Damioli
>              Labels: patch
>             Fix For: 2.4.5, 2.6.4, 2.7.2
>
>
> JCR-3476 introduced a mime-type test before parsing binary values, based =
on Tika's supported parsers.
> This may lead to incorrect behaviours, with a "text/xml" not being extrac=
ted and indexed because the XMLParser does not declare "text/xml" as a supp=
orted type.
> The problem here is that there is a regression between 2.4.3 and 2.4.4, b=
ecause the same content was previously well recognized by Tika's Detector a=
nd then extracted.
> Furthermore, it seems to me inconsistent on one hand to rely on the decla=
red content type and on the other hand to delegate the actual type detectio=
n to Tika ?=20
> This may lead to cases where the jcr:mimeType value is set to eg. "applic=
ation/pdf" but detected and parsed by Tika as "text/plain" with no error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38488-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Sun Sep 29 19:20:47 2013
Return-Path: <dev-return-38488-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0DDE10D18
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Sun, 29 Sep 2013 19:20:47 +0000 (UTC)
Received: (qmail 47472 invoked by uid 500); 29 Sep 2013 19:20:47 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 47264 invoked by uid 500); 29 Sep 2013 19:20:41 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 47257 invoked by uid 99); 29 Sep 2013 19:20:39 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 19:20:39 +0000
Received: from localhost (HELO mail-ie0-f172.google.com) (127.0.0.1)
  (smtp-auth username tripod, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Sep 2013 19:20:39 +0000
Received: by mail-ie0-f172.google.com with SMTP id x13so8291861ief.17
        for <dev@jackrabbit.apache.org>; Sun, 29 Sep 2013 12:20:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=369hkMO6ouX7lk9k1/qBhDO1f88AaQwL3GjUOoRWJLA=;
        b=hJECsweQ1SF9GwPdT1FkxIUHKNlpbMYMU45P2WKRazY0qYfoPS30D50rDERFDIbsM+
         oDoJFXHh82dnLQLUlIYiVH4716LLsJOwpllYMmijb49AI52v0qFPec2WCQaXhxe0v6Ln
         Eqsn9zSAnpr6t8w54wBs+ODXSImm9yKVkA0VKCRiBMkCRNHL/zMB7qYG506gJi+daakj
         D0xmCli9MiqdnwqtD58kSaBc6RPEzH6XoFT5Y6ClydWJcCPN3FevpIPEPTQVE0ALY+xx
         VadxN2xpb+a3UX9F9N7JkY2Jp4Dzc2sSzXIDUZC6gf3uI03M3wwDwY9jVjLaU2qjZRkD
         2whQ==
X-Gm-Message-State: ALoCoQnI1nIpUhaCANLFVmJdBQNLQWzhzdvo8aWL3vi2Ke7lwEGw1RulFqamW8s8r2bx3vp7fHHl
MIME-Version: 1.0
X-Received: by 10.50.33.38 with SMTP id o6mr10970783igi.52.1380482438852; Sun,
 29 Sep 2013 12:20:38 -0700 (PDT)
Received: by 10.64.68.20 with HTTP; Sun, 29 Sep 2013 12:20:38 -0700 (PDT)
In-Reply-To: <CAB+dfik4zNV1Es2nYKdSUT0XzZUDRdrmRLQyWvCB-ENGJg_TiQ@mail.gmail.com>
References: <CAB+dfik4zNV1Es2nYKdSUT0XzZUDRdrmRLQyWvCB-ENGJg_TiQ@mail.gmail.com>
Date: Sun, 29 Sep 2013 12:20:38 -0700
Message-ID: <CAB+dfik65JGsYiuHVHRiR1+_g0wZNUsw5Lq_Utkohsnb_4OvmA@mail.gmail.com>
Subject: Re: [VOTE] Release Apache Jackrabbit Filevault 3.0.0
From: Tobias Bocanegra <tripod@apache.org>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi,

On Thu, Sep 26, 2013 at 11:09 AM, Tobias Bocanegra <tripod@apache.org> wrote:
> A (new :-) candidate for the Jackrabbit Filevault 3.0.0 release is available at:
>
> https://dist.apache.org/repos/dist/dev/jackrabbit/filevault/3.0.0/
>
> The release candidate is a zip archive of the sources in:
>
> https://svn.apache.org/repos/asf/jackrabbit/commons/filevault/tags/3.0.0/
>
> The SHA1 checksum of the archive is 3d0a6b769df6eb76db77705dd5be5ff18a55457f.
>
> A staged Maven repository is available for review at:
>
> https://repository.apache.org/content/repositories/orgapachejackrabbit-102/
>
> Please vote on releasing this package as Apache Jackrabbit Filevault 3.0.0.
> The vote is open for the next 72 hours and passes if a majority of at
> least three +1 Jackrabbit PMC votes are cast.
>
> [ ] +1 Release this package as Apache Jackrabbit Filevault 3.0.0
> [ ] -1 Do not release this package because...
>

The vote passes as follows:

+1 Tobias Bocanegra
+1 Jukka Zitting
+1 Tommaso Teofili

Thanks for voting! I'll push the release out over the next days.

From dev-return-38489-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 08:17:41 2013
Return-Path: <dev-return-38489-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34EAA10ACA
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 08:17:41 +0000 (UTC)
Received: (qmail 34059 invoked by uid 500); 30 Sep 2013 08:14:52 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 33966 invoked by uid 500); 30 Sep 2013 08:14:38 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 33870 invoked by uid 99); 30 Sep 2013 08:14:25 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 08:14:25 +0000
Date: Mon, 30 Sep 2013 08:14:25 +0000 (UTC)
From: "Thomas Mueller (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664836.1377091351217.3258.1380528865052@arcas>
In-Reply-To: <JIRA.12664836.1377091351217@arcas>
References: <JIRA.12664836.1377091351217@arcas>
Subject: [jira] [Commented] (JCR-3652) Bundle serialization broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3652?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13781667#comment-13781667 ] 

Thomas Mueller commented on JCR-3652:
-------------------------------------

[~rah003] I believe 2.6 is also affected. I will try to fix it there as well.

> Bundle serialization broken
> ---------------------------
>
>                 Key: JCR-3652
>                 URL: https://issues.apache.org/jira/browse/JCR-3652
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-core
>            Reporter: Thomas Mueller
>            Assignee: Thomas Mueller
>            Priority: Minor
>             Fix For: 2.4.4, 2.7.1
>
>         Attachments: JCR-3652-b.patch, JCR-3652.patch, JCR-3652-test-case.patch
>
>
> I have got a strange case where some node bundle is broken, seemingly because a byte is missing. I can't explain the missing byte, but it is reproducible, meaning that writing the bundles again will break them again. There are 11 broken bundles, 10 of them have the size 480 bytes and one is slightly larger. It is always a boolean property value that is missing, always the value for the property jcr:isCheckedOut.
> As a (temporary) solution, and to help analyze what the problem might be, I will create a patch that does the following:
> * When serializing a bundle, check if the byte array can be de-serialized. If not, then try again. Starting with the 3th try, use a slower variant where before and after writing the boolean value the buffer is flushed. I'm aware that ByteArrayOutputStream.flush doesn't do much, but maybe it solves the problem (let's see) if the problem is related to a JVM issue.
> * If de-serializing a bundle fails, check if it's because of a missing boolean property value. If yes, insert the missing byte.
> I have also added some log messages (warning / error) to help analyze the problem.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38490-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 10:12:37 2013
Return-Path: <dev-return-38490-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B7BA10E5A
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 10:12:37 +0000 (UTC)
Received: (qmail 11893 invoked by uid 500); 30 Sep 2013 10:12:34 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 11318 invoked by uid 500); 30 Sep 2013 10:12:32 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 11290 invoked by uid 99); 30 Sep 2013 10:12:28 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 10:12:28 +0000
Date: Mon, 30 Sep 2013 10:12:28 +0000 (UTC)
From: "Thomas Mueller (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664836.1377091351217.3585.1380535948761@arcas>
In-Reply-To: <JIRA.12664836.1377091351217@arcas>
References: <JIRA.12664836.1377091351217@arcas>
Subject: [jira] [Updated] (JCR-3652) Bundle serialization broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3652?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Thomas Mueller updated JCR-3652:
--------------------------------

    Fix Version/s: 2.6.4

> Bundle serialization broken
> ---------------------------
>
>                 Key: JCR-3652
>                 URL: https://issues.apache.org/jira/browse/JCR-3652
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-core
>            Reporter: Thomas Mueller
>            Assignee: Thomas Mueller
>            Priority: Minor
>             Fix For: 2.4.4, 2.6.4, 2.7.1
>
>         Attachments: JCR-3652-b.patch, JCR-3652.patch, JCR-3652-test-case.patch
>
>
> I have got a strange case where some node bundle is broken, seemingly because a byte is missing. I can't explain the missing byte, but it is reproducible, meaning that writing the bundles again will break them again. There are 11 broken bundles, 10 of them have the size 480 bytes and one is slightly larger. It is always a boolean property value that is missing, always the value for the property jcr:isCheckedOut.
> As a (temporary) solution, and to help analyze what the problem might be, I will create a patch that does the following:
> * When serializing a bundle, check if the byte array can be de-serialized. If not, then try again. Starting with the 3th try, use a slower variant where before and after writing the boolean value the buffer is flushed. I'm aware that ByteArrayOutputStream.flush doesn't do much, but maybe it solves the problem (let's see) if the problem is related to a JVM issue.
> * If de-serializing a bundle fails, check if it's because of a missing boolean property value. If yes, insert the missing byte.
> I have also added some log messages (warning / error) to help analyze the problem.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38491-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 10:12:38 2013
Return-Path: <dev-return-38491-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C2A610E5B
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 10:12:37 +0000 (UTC)
Received: (qmail 11957 invoked by uid 500); 30 Sep 2013 10:12:34 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 11778 invoked by uid 500); 30 Sep 2013 10:12:33 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 11288 invoked by uid 99); 30 Sep 2013 10:12:28 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 10:12:28 +0000
Date: Mon, 30 Sep 2013 10:12:28 +0000 (UTC)
From: "Thomas Mueller (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664836.1377091351217.3584.1380535948598@arcas>
In-Reply-To: <JIRA.12664836.1377091351217@arcas>
References: <JIRA.12664836.1377091351217@arcas>
Subject: [jira] [Commented] (JCR-3652) Bundle serialization broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3652?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13781728#comment-13781728 ] 

Thomas Mueller commented on JCR-3652:
-------------------------------------

Revision 1527505: fixed in the 2.6 branch

> Bundle serialization broken
> ---------------------------
>
>                 Key: JCR-3652
>                 URL: https://issues.apache.org/jira/browse/JCR-3652
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-core
>            Reporter: Thomas Mueller
>            Assignee: Thomas Mueller
>            Priority: Minor
>             Fix For: 2.4.4, 2.6.4, 2.7.1
>
>         Attachments: JCR-3652-b.patch, JCR-3652.patch, JCR-3652-test-case.patch
>
>
> I have got a strange case where some node bundle is broken, seemingly because a byte is missing. I can't explain the missing byte, but it is reproducible, meaning that writing the bundles again will break them again. There are 11 broken bundles, 10 of them have the size 480 bytes and one is slightly larger. It is always a boolean property value that is missing, always the value for the property jcr:isCheckedOut.
> As a (temporary) solution, and to help analyze what the problem might be, I will create a patch that does the following:
> * When serializing a bundle, check if the byte array can be de-serialized. If not, then try again. Starting with the 3th try, use a slower variant where before and after writing the boolean value the buffer is flushed. I'm aware that ByteArrayOutputStream.flush doesn't do much, but maybe it solves the problem (let's see) if the problem is related to a JVM issue.
> * If de-serializing a bundle fails, check if it's because of a missing boolean property value. If yes, insert the missing byte.
> I have also added some log messages (warning / error) to help analyze the problem.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38492-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 10:20:28 2013
Return-Path: <dev-return-38492-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D750810E79
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 10:20:28 +0000 (UTC)
Received: (qmail 21433 invoked by uid 500); 30 Sep 2013 10:20:27 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 21236 invoked by uid 500); 30 Sep 2013 10:20:27 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 20913 invoked by uid 99); 30 Sep 2013 10:20:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 10:20:24 +0000
Date: Mon, 30 Sep 2013 10:20:24 +0000 (UTC)
From: "Jan Haderka (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12664836.1377091351217.3589.1380536424642@arcas>
In-Reply-To: <JIRA.12664836.1377091351217@arcas>
References: <JIRA.12664836.1377091351217@arcas>
Subject: [jira] [Commented] (JCR-3652) Bundle serialization broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3652?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13781729#comment-13781729 ] 

Jan Haderka commented on JCR-3652:
----------------------------------

Thx.

> Bundle serialization broken
> ---------------------------
>
>                 Key: JCR-3652
>                 URL: https://issues.apache.org/jira/browse/JCR-3652
>             Project: Jackrabbit Content Repository
>          Issue Type: New Feature
>          Components: jackrabbit-core
>            Reporter: Thomas Mueller
>            Assignee: Thomas Mueller
>            Priority: Minor
>             Fix For: 2.4.4, 2.6.4, 2.7.1
>
>         Attachments: JCR-3652-b.patch, JCR-3652.patch, JCR-3652-test-case.patch
>
>
> I have got a strange case where some node bundle is broken, seemingly because a byte is missing. I can't explain the missing byte, but it is reproducible, meaning that writing the bundles again will break them again. There are 11 broken bundles, 10 of them have the size 480 bytes and one is slightly larger. It is always a boolean property value that is missing, always the value for the property jcr:isCheckedOut.
> As a (temporary) solution, and to help analyze what the problem might be, I will create a patch that does the following:
> * When serializing a bundle, check if the byte array can be de-serialized. If not, then try again. Starting with the 3th try, use a slower variant where before and after writing the boolean value the buffer is flushed. I'm aware that ByteArrayOutputStream.flush doesn't do much, but maybe it solves the problem (let's see) if the problem is related to a JVM issue.
> * If de-serializing a bundle fails, check if it's because of a missing boolean property value. If yes, insert the missing byte.
> I have also added some log messages (warning / error) to help analyze the problem.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38493-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 11:44:34 2013
Return-Path: <dev-return-38493-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F55C100F5
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 11:44:34 +0000 (UTC)
Received: (qmail 27323 invoked by uid 500); 30 Sep 2013 11:44:30 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 27167 invoked by uid 500); 30 Sep 2013 11:44:27 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 27041 invoked by uid 99); 30 Sep 2013 11:44:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 11:44:24 +0000
Date: Mon, 30 Sep 2013 11:44:24 +0000 (UTC)
From: "Nils Breunese (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671347.1380541390116.3782.1380541464794@arcas>
In-Reply-To: <JIRA.12671347.1380541390116@arcas>
References: <JIRA.12671347.1380541390116@arcas>
Subject: [jira] [Created] (JCR-3672) Log path of conflicting node when
 importing a node while another node with the same UUID already exists
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Nils Breunese created JCR-3672:
----------------------------------

             Summary: Log path of conflicting node when importing a node while another node with the same UUID already exists
                 Key: JCR-3672
                 URL: https://issues.apache.org/jira/browse/JCR-3672
             Project: Jackrabbit Content Repository
          Issue Type: Improvement
          Components: jackrabbit-core
    Affects Versions: 2.4.4
            Reporter: Nils Breunese


When {{SessionImporter#resolveUUIDConflict(parent, conflictingId, nodeInfo)}} is called and {{uuidBehavior}} is set to {{ImportUUIDBehavior.IMPORT_UUID_COLLISION_THROW}} an exception is thrown with a message saying that a node with the same UUID already exists. We have found that usually when this happens it would be very handy to know the path of the conflicting node. Right now, whenever this happens we need to attach a debugger to find the conflicting node. Could {{conflicting.getPath()}} be added to the message, so there is no need to attach a debugger to find that path?



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38494-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 11:46:34 2013
Return-Path: <dev-return-38494-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C1B41100FA
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 11:46:34 +0000 (UTC)
Received: (qmail 28395 invoked by uid 500); 30 Sep 2013 11:46:27 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 28349 invoked by uid 500); 30 Sep 2013 11:46:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 28336 invoked by uid 99); 30 Sep 2013 11:46:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 11:46:24 +0000
Date: Mon, 30 Sep 2013 11:46:24 +0000 (UTC)
From: "Nils Breunese (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671347.1380541390116.3791.1380541584634@arcas>
In-Reply-To: <JIRA.12671347.1380541390116@arcas>
References: <JIRA.12671347.1380541390116@arcas>
Subject: [jira] [Updated] (JCR-3672) Log path of conflicting node when
 importing a node while another node with the same UUID already exists
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3672?page=3Dcom.atlassian.=
jira.plugin.system.issuetabpanels:all-tabpanel ]

Nils Breunese updated JCR-3672:
-------------------------------

    Description: When SessionImporter#resolveUUIDConflict(parent, conflicti=
ngId, nodeInfo) is called and uuidBehavior is set to ImportUUIDBehavior.IMP=
ORT_UUID_COLLISION_THROW an exception is thrown with a message saying that =
a node with the same UUID already exists. We have found that usually when t=
his happens it would be very handy to know the path of the conflicting node=
. Right now, whenever this happens we need to attach a debugger to find the=
 conflicting node. Could conflicting.getPath() be added to the message, so =
there is no need to attach a debugger to find that path?  (was: When {{Sess=
ionImporter#resolveUUIDConflict(parent, conflictingId, nodeInfo)}} is calle=
d and {{uuidBehavior}} is set to {{ImportUUIDBehavior.IMPORT_UUID_COLLISION=
_THROW}} an exception is thrown with a message saying that a node with the =
same UUID already exists. We have found that usually when this happens it w=
ould be very handy to know the path of the conflicting node. Right now, whe=
never this happens we need to attach a debugger to find the conflicting nod=
e. Could {{conflicting.getPath()}} be added to the message, so there is no =
need to attach a debugger to find that path?)

> Log path of conflicting node when importing a node while another node wit=
h the same UUID already exists
> -------------------------------------------------------------------------=
------------------------------
>
>                 Key: JCR-3672
>                 URL: https://issues.apache.org/jira/browse/JCR-3672
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: jackrabbit-core
>    Affects Versions: 2.4.4
>            Reporter: Nils Breunese
>
> When SessionImporter#resolveUUIDConflict(parent, conflictingId, nodeInfo)=
 is called and uuidBehavior is set to ImportUUIDBehavior.IMPORT_UUID_COLLIS=
ION_THROW an exception is thrown with a message saying that a node with the=
 same UUID already exists. We have found that usually when this happens it =
would be very handy to know the path of the conflicting node. Right now, wh=
enever this happens we need to attach a debugger to find the conflicting no=
de. Could conflicting.getPath() be added to the message, so there is no nee=
d to attach a debugger to find that path?



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38495-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:02:27 2013
Return-Path: <dev-return-38495-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 72788102B8
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:02:27 +0000 (UTC)
Received: (qmail 18252 invoked by uid 500); 30 Sep 2013 13:02:26 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 17875 invoked by uid 500); 30 Sep 2013 13:02:26 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 17791 invoked by uid 99); 30 Sep 2013 13:02:25 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:02:25 +0000
Date: Mon, 30 Sep 2013 13:02:24 +0000 (UTC)
From: "Ard Schrijvers (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12436033.1253262388968.3913.1380546144970@arcas>
In-Reply-To: <JIRA.12436033.1253262388968@arcas>
References: <JIRA.12436033.1253262388968@arcas>
Subject: [jira] [Resolved] (JCR-2311) Improve indexing performance by
 reusing already create Lucene Documents within a single indexing
 transaction
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-2311?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Ard Schrijvers resolved JCR-2311.
---------------------------------

    Resolution: Later

won't fix, kept for reference

> Improve indexing performance by reusing already create Lucene Documents within a single indexing transaction
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: JCR-2311
>                 URL: https://issues.apache.org/jira/browse/JCR-2311
>             Project: Jackrabbit Content Repository
>          Issue Type: Improvement
>          Components: indexing
>            Reporter: Ard Schrijvers
>            Assignee: Ard Schrijvers
>            Priority: Minor
>
> When using indexing aggregates, it can become very expensive when for example binary data like pdfs are involved. Within a single MultiIndex transaction, we should be save to reuse the created Lucene Document's. This is useful for aggregates, as this might currently involve reindexing the same node multiple times now in a single transaction. 
> In the mail discussion below I describe to use WeakReferences, though I think SoftReferences are in this case better suited (we do not want the created lucene docs to be gc-ed, unless memory gets low...)
> Also see http://www.nabble.com/Improve-indexing-performance-wrt-Aggregates-td25471828.html



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38496-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:20:34 2013
Return-Path: <dev-return-38496-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7881A10356
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:20:34 +0000 (UTC)
Received: (qmail 59324 invoked by uid 500); 30 Sep 2013 13:20:31 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 59143 invoked by uid 500); 30 Sep 2013 13:20:30 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 58847 invoked by uid 99); 30 Sep 2013 13:20:27 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:20:27 +0000
Date: Mon, 30 Sep 2013 13:20:27 +0000 (UTC)
From: "Ard Schrijvers (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671360.1380547179327.3970.1380547227863@arcas>
In-Reply-To: <JIRA.12671360.1380547179327@arcas>
References: <JIRA.12671360.1380547179327@arcas>
Subject: [jira] [Created] (JCR-3673) ChildAxisQuery#advance method results
 in IllegalArgumentException through #indexIsValid method
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Ard Schrijvers created JCR-3673:
-----------------------------------

             Summary: ChildAxisQuery#advance method results in IllegalArgumentException through #indexIsValid method
                 Key: JCR-3673
                 URL: https://issues.apache.org/jira/browse/JCR-3673
             Project: Jackrabbit Content Repository
          Issue Type: Bug
            Reporter: Ard Schrijvers
            Assignee: Ard Schrijvers
            Priority: Minor
             Fix For: 2.6.4


When ChildAxisQuery#advance is invoked, then the following while loop:

while (nextDoc > -1 && !indexIsValid(nextDoc)) {
      nextDoc();
}

easily results in stacktrace below. This is because nextDoc returns NO_MORE_DOCS (Integer.MAX_VALUE) in case there are no hits any more, which results in IllegalArgumentException in indexIsValid

java.lang.IllegalArgumentException: docID must be >= 0 and < maxDoc=3
(got docID=2147483158)
at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:490)
at org.apache.lucene.index.DirectoryReader.document(DirectoryReader.java:568)
at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
at org.apache.jackrabbit.core.query.lucene.CachingIndexReader.document(CachingIndexReader.java:291)
at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
at org.apache.lucene.index.MultiReader.document(MultiReader.java:252)
at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.indexIsValid(ChildAxisQuery.java:488)
at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.advance(ChildAxisQuery.java:433)



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38497-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:52:27 2013
Return-Path: <dev-return-38497-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B1E410548
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:52:27 +0000 (UTC)
Received: (qmail 44597 invoked by uid 500); 30 Sep 2013 13:52:25 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 44513 invoked by uid 500); 30 Sep 2013 13:52:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 44405 invoked by uid 99); 30 Sep 2013 13:52:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:52:24 +0000
Date: Mon, 30 Sep 2013 13:52:24 +0000 (UTC)
From: "Ard Schrijvers (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671360.1380547179327.4089.1380549144153@arcas>
In-Reply-To: <JIRA.12671360.1380547179327@arcas>
References: <JIRA.12671360.1380547179327@arcas>
Subject: [jira] [Commented] (JCR-3673) ChildAxisQuery#advance method results
 in IllegalArgumentException through #indexIsValid method
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


    [ https://issues.apache.org/jira/browse/JCR-3673?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13781815#comment-13781815 ] 

Ard Schrijvers commented on JCR-3673:
-------------------------------------

fixed in r1527567 and r1527568

> ChildAxisQuery#advance method results in IllegalArgumentException through #indexIsValid method
> ----------------------------------------------------------------------------------------------
>
>                 Key: JCR-3673
>                 URL: https://issues.apache.org/jira/browse/JCR-3673
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Ard Schrijvers
>            Assignee: Ard Schrijvers
>            Priority: Minor
>             Fix For: 2.6.4, 2.7.2
>
>
> When ChildAxisQuery#advance is invoked, then the following while loop:
> while (nextDoc > -1 && !indexIsValid(nextDoc)) {
>       nextDoc();
> }
> easily results in stacktrace below. This is because nextDoc returns NO_MORE_DOCS (Integer.MAX_VALUE) in case there are no hits any more, which results in IllegalArgumentException in indexIsValid
> java.lang.IllegalArgumentException: docID must be >= 0 and < maxDoc=3
> (got docID=2147483158)
> at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:490)
> at org.apache.lucene.index.DirectoryReader.document(DirectoryReader.java:568)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.jackrabbit.core.query.lucene.CachingIndexReader.document(CachingIndexReader.java:291)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.lucene.index.MultiReader.document(MultiReader.java:252)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.indexIsValid(ChildAxisQuery.java:488)
> at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.advance(ChildAxisQuery.java:433)



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38498-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:52:28 2013
Return-Path: <dev-return-38498-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B8E410549
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:52:27 +0000 (UTC)
Received: (qmail 44638 invoked by uid 500); 30 Sep 2013 13:52:25 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 44518 invoked by uid 500); 30 Sep 2013 13:52:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 44401 invoked by uid 99); 30 Sep 2013 13:52:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:52:24 +0000
Date: Mon, 30 Sep 2013 13:52:23 +0000 (UTC)
From: "Ard Schrijvers (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671360.1380547179327.4088.1380549143756@arcas>
In-Reply-To: <JIRA.12671360.1380547179327@arcas>
References: <JIRA.12671360.1380547179327@arcas>
Subject: [jira] [Updated] (JCR-3673) ChildAxisQuery#advance method results
 in IllegalArgumentException through #indexIsValid method
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3673?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Ard Schrijvers updated JCR-3673:
--------------------------------

    Fix Version/s: 2.7.2

> ChildAxisQuery#advance method results in IllegalArgumentException through #indexIsValid method
> ----------------------------------------------------------------------------------------------
>
>                 Key: JCR-3673
>                 URL: https://issues.apache.org/jira/browse/JCR-3673
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Ard Schrijvers
>            Assignee: Ard Schrijvers
>            Priority: Minor
>             Fix For: 2.6.4, 2.7.2
>
>
> When ChildAxisQuery#advance is invoked, then the following while loop:
> while (nextDoc > -1 && !indexIsValid(nextDoc)) {
>       nextDoc();
> }
> easily results in stacktrace below. This is because nextDoc returns NO_MORE_DOCS (Integer.MAX_VALUE) in case there are no hits any more, which results in IllegalArgumentException in indexIsValid
> java.lang.IllegalArgumentException: docID must be >= 0 and < maxDoc=3
> (got docID=2147483158)
> at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:490)
> at org.apache.lucene.index.DirectoryReader.document(DirectoryReader.java:568)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.jackrabbit.core.query.lucene.CachingIndexReader.document(CachingIndexReader.java:291)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.lucene.index.MultiReader.document(MultiReader.java:252)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.indexIsValid(ChildAxisQuery.java:488)
> at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.advance(ChildAxisQuery.java:433)



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38499-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:54:28 2013
Return-Path: <dev-return-38499-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33BF510555
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:54:28 +0000 (UTC)
Received: (qmail 53172 invoked by uid 500); 30 Sep 2013 13:54:27 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 53126 invoked by uid 500); 30 Sep 2013 13:54:26 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 53115 invoked by uid 99); 30 Sep 2013 13:54:26 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:54:26 +0000
Date: Mon, 30 Sep 2013 13:54:25 +0000 (UTC)
From: "Ard Schrijvers (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671360.1380547179327.4095.1380549265980@arcas>
In-Reply-To: <JIRA.12671360.1380547179327@arcas>
References: <JIRA.12671360.1380547179327@arcas>
Subject: [jira] [Resolved] (JCR-3673) ChildAxisQuery#advance method results
 in IllegalArgumentException through #indexIsValid method
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3673?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Ard Schrijvers resolved JCR-3673.
---------------------------------

    Resolution: Fixed

> ChildAxisQuery#advance method results in IllegalArgumentException through #indexIsValid method
> ----------------------------------------------------------------------------------------------
>
>                 Key: JCR-3673
>                 URL: https://issues.apache.org/jira/browse/JCR-3673
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>            Reporter: Ard Schrijvers
>            Assignee: Ard Schrijvers
>            Priority: Minor
>             Fix For: 2.6.4, 2.7.2
>
>
> When ChildAxisQuery#advance is invoked, then the following while loop:
> while (nextDoc > -1 && !indexIsValid(nextDoc)) {
>       nextDoc();
> }
> easily results in stacktrace below. This is because nextDoc returns NO_MORE_DOCS (Integer.MAX_VALUE) in case there are no hits any more, which results in IllegalArgumentException in indexIsValid
> java.lang.IllegalArgumentException: docID must be >= 0 and < maxDoc=3
> (got docID=2147483158)
> at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:490)
> at org.apache.lucene.index.DirectoryReader.document(DirectoryReader.java:568)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.jackrabbit.core.query.lucene.CachingIndexReader.document(CachingIndexReader.java:291)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.lucene.index.MultiReader.document(MultiReader.java:252)
> at org.apache.lucene.index.FilterIndexReader.document(FilterIndexReader.java:186)
> at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.indexIsValid(ChildAxisQuery.java:488)
> at org.apache.jackrabbit.core.query.lucene.ChildAxisQuery$ChildAxisScorer.advance(ChildAxisQuery.java:433)



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38501-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:56:31 2013
Return-Path: <dev-return-38501-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9241B10567
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:56:31 +0000 (UTC)
Received: (qmail 62152 invoked by uid 500); 30 Sep 2013 13:56:26 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 62055 invoked by uid 500); 30 Sep 2013 13:56:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 62029 invoked by uid 99); 30 Sep 2013 13:56:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:56:24 +0000
Date: Mon, 30 Sep 2013 13:56:24 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671363.1380549307909.4103.1380549384747@arcas>
In-Reply-To: <JIRA.12671363.1380549307909@arcas>
References: <JIRA.12671363.1380549307909@arcas>
Subject: [jira] [Updated] (JCR-3674) Unwarranted errors logged about
 nodetype registrations in a clustered environment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3674?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes updated JCR-3674:
------------------------------

    Component/s: clustering

> Unwarranted errors logged about nodetype registrations in a clustered environment
> ---------------------------------------------------------------------------------
>
>                 Key: JCR-3674
>                 URL: https://issues.apache.org/jira/browse/JCR-3674
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: clustering
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>
> For instance:
> 19.09.2013 17:07:51 ERROR [org.apache.jackrabbit.core.cluster.ClusterNode.process():928] Unable to deliver node type operation: {http://www.onehippo.org/jcr/hipposys/nt/1.0.5}updaterinfo already exists locally
> This happens on cluster node 1 after on cluster node 2 new node types were registered while cluster node 1 was down.
> When cluster node 1 is brought up again, it first loads the updated node types and afterwards processes the cluster updates from the journal. During the latter process new node types are found to be already cached, which causes the above error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38500-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 13:56:31 2013
Return-Path: <dev-return-38500-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9899510568
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 13:56:31 +0000 (UTC)
Received: (qmail 62185 invoked by uid 500); 30 Sep 2013 13:56:26 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 62028 invoked by uid 500); 30 Sep 2013 13:56:24 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 62014 invoked by uid 99); 30 Sep 2013 13:56:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 13:56:24 +0000
Date: Mon, 30 Sep 2013 13:56:24 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671363.1380549307909.4100.1380549384479@arcas>
In-Reply-To: <JIRA.12671363.1380549307909@arcas>
References: <JIRA.12671363.1380549307909@arcas>
Subject: [jira] [Created] (JCR-3674) Unwarranted errors logged about
 nodetype registrations in a clustered environment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Unico Hommes created JCR-3674:
---------------------------------

             Summary: Unwarranted errors logged about nodetype registrations in a clustered environment
                 Key: JCR-3674
                 URL: https://issues.apache.org/jira/browse/JCR-3674
             Project: Jackrabbit Content Repository
          Issue Type: Bug
            Reporter: Unico Hommes
            Assignee: Unico Hommes


For instance:

19.09.2013 17:07:51 ERROR [org.apache.jackrabbit.core.cluster.ClusterNode.process():928] Unable to deliver node type operation: {http://www.onehippo.org/jcr/hipposys/nt/1.0.5}updaterinfo already exists locally

This happens on cluster node 1 after on cluster node 2 new node types were registered while cluster node 1 was down.

When cluster node 1 is brought up again, it first loads the updated node types and afterwards processes the cluster updates from the journal. During the latter process new node types are found to be already cached, which causes the above error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38502-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 14:02:28 2013
Return-Path: <dev-return-38502-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2E4A1059E
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 14:02:28 +0000 (UTC)
Received: (qmail 71707 invoked by uid 500); 30 Sep 2013 14:02:27 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 71426 invoked by uid 500); 30 Sep 2013 14:02:27 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 71388 invoked by uid 99); 30 Sep 2013 14:02:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 14:02:24 +0000
Date: Mon, 30 Sep 2013 14:02:23 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671363.1380549307909.4122.1380549743740@arcas>
In-Reply-To: <JIRA.12671363.1380549307909@arcas>
References: <JIRA.12671363.1380549307909@arcas>
Subject: [jira] [Updated] (JCR-3674) Unwarranted errors logged about
 nodetype registrations in a clustered environment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3674?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes updated JCR-3674:
------------------------------

    Fix Version/s: 2.7.2
                   2.6.4

> Unwarranted errors logged about nodetype registrations in a clustered environment
> ---------------------------------------------------------------------------------
>
>                 Key: JCR-3674
>                 URL: https://issues.apache.org/jira/browse/JCR-3674
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: clustering
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4, 2.7.2
>
>
> For instance:
> 19.09.2013 17:07:51 ERROR [org.apache.jackrabbit.core.cluster.ClusterNode.process():928] Unable to deliver node type operation: {http://www.onehippo.org/jcr/hipposys/nt/1.0.5}updaterinfo already exists locally
> This happens on cluster node 1 after on cluster node 2 new node types were registered while cluster node 1 was down.
> When cluster node 1 is brought up again, it first loads the updated node types and afterwards processes the cluster updates from the journal. During the latter process new node types are found to be already cached, which causes the above error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38503-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 14:32:32 2013
Return-Path: <dev-return-38503-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1922C106D1
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 14:32:32 +0000 (UTC)
Received: (qmail 45761 invoked by uid 500); 30 Sep 2013 14:32:30 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 45638 invoked by uid 500); 30 Sep 2013 14:32:26 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 45402 invoked by uid 99); 30 Sep 2013 14:32:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 14:32:24 +0000
Date: Mon, 30 Sep 2013 14:32:24 +0000 (UTC)
From: "Unico Hommes (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671363.1380549307909.4294.1380551544484@arcas>
In-Reply-To: <JIRA.12671363.1380549307909@arcas>
References: <JIRA.12671363.1380549307909@arcas>
Subject: [jira] [Resolved] (JCR-3674) Unwarranted errors logged about
 nodetype registrations in a clustered environment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3674?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Unico Hommes resolved JCR-3674.
-------------------------------

    Resolution: Fixed

> Unwarranted errors logged about nodetype registrations in a clustered environment
> ---------------------------------------------------------------------------------
>
>                 Key: JCR-3674
>                 URL: https://issues.apache.org/jira/browse/JCR-3674
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: clustering
>            Reporter: Unico Hommes
>            Assignee: Unico Hommes
>             Fix For: 2.6.4, 2.7.2
>
>
> For instance:
> 19.09.2013 17:07:51 ERROR [org.apache.jackrabbit.core.cluster.ClusterNode.process():928] Unable to deliver node type operation: {http://www.onehippo.org/jcr/hipposys/nt/1.0.5}updaterinfo already exists locally
> This happens on cluster node 1 after on cluster node 2 new node types were registered while cluster node 1 was down.
> When cluster node 1 is brought up again, it first loads the updated node types and afterwards processes the cluster updates from the journal. During the latter process new node types are found to be already cached, which causes the above error.



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38504-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 14:46:34 2013
Return-Path: <dev-return-38504-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25B351074F
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 14:46:34 +0000 (UTC)
Received: (qmail 81269 invoked by uid 500); 30 Sep 2013 14:46:33 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 80875 invoked by uid 500); 30 Sep 2013 14:46:32 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 80078 invoked by uid 99); 30 Sep 2013 14:46:29 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 14:46:29 +0000
Date: Mon, 30 Sep 2013 14:46:29 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671373.1380552378956.4400.1380552389702@arcas>
In-Reply-To: <JIRA.12671373.1380552378956@arcas>
References: <JIRA.12671373.1380552378956@arcas>
Subject: [jira] [Created] (JCR-3675) test cases for "similarly" named nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Julian Reschke created JCR-3675:
-----------------------------------

             Summary: test cases for "similarly" named nodes
                 Key: JCR-3675
                 URL: https://issues.apache.org/jira/browse/JCR-3675
             Project: Jackrabbit Content Repository
          Issue Type: Task
          Components: jackrabbit-jcr-tests
    Affects Versions: 2.7.1
            Reporter: Julian Reschke
            Assignee: Julian Reschke
            Priority: Minor
             Fix For: 2.7.2


We should have tests that verify "sane" repository behavior for:

- node names that only differ in uppercase/lowercase

- node names that are the same under Unicode normalization (NFC vs NFD)



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38505-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 14:56:27 2013
Return-Path: <dev-return-38505-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53039107B3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 14:56:27 +0000 (UTC)
Received: (qmail 6939 invoked by uid 500); 30 Sep 2013 14:56:25 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 6807 invoked by uid 500); 30 Sep 2013 14:56:24 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 6778 invoked by uid 99); 30 Sep 2013 14:56:24 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 14:56:24 +0000
Date: Mon, 30 Sep 2013 14:56:23 +0000 (UTC)
From: "Julian Reschke (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671373.1380552378956.4444.1380552983844@arcas>
In-Reply-To: <JIRA.12671373.1380552378956@arcas>
References: <JIRA.12671373.1380552378956@arcas>
Subject: [jira] [Updated] (JCR-3675) test cases for "similarly" named nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3675?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Julian Reschke updated JCR-3675:
--------------------------------

    Attachment: JCR-3675.diff

Proposed tests

> test cases for "similarly" named nodes
> --------------------------------------
>
>                 Key: JCR-3675
>                 URL: https://issues.apache.org/jira/browse/JCR-3675
>             Project: Jackrabbit Content Repository
>          Issue Type: Task
>          Components: jackrabbit-jcr-tests
>    Affects Versions: 2.7.1
>            Reporter: Julian Reschke
>            Assignee: Julian Reschke
>            Priority: Minor
>             Fix For: 2.7.2
>
>         Attachments: JCR-3675.diff
>
>
> We should have tests that verify "sane" repository behavior for:
> - node names that only differ in uppercase/lowercase
> - node names that are the same under Unicode normalization (NFC vs NFD)



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38506-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 15:38:26 2013
Return-Path: <dev-return-38506-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05637108E3
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 15:38:26 +0000 (UTC)
Received: (qmail 84216 invoked by uid 500); 30 Sep 2013 15:38:25 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 84181 invoked by uid 500); 30 Sep 2013 15:38:25 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 84162 invoked by uid 99); 30 Sep 2013 15:38:23 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 15:38:23 +0000
Date: Mon, 30 Sep 2013 15:38:23 +0000 (UTC)
From: "Ard Schrijvers (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12671383.1380555468608.4659.1380555503738@arcas>
In-Reply-To: <JIRA.12671383.1380555468608@arcas>
References: <JIRA.12671383.1380555468608@arcas>
Subject: [jira] [Created] (JCR-3676) Make QueryResultImpl#isAccessGranted
 proctected
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394

Ard Schrijvers created JCR-3676:
-----------------------------------

             Summary: Make QueryResultImpl#isAccessGranted proctected
                 Key: JCR-3676
                 URL: https://issues.apache.org/jira/browse/JCR-3676
             Project: Jackrabbit Content Repository
          Issue Type: Improvement
            Reporter: Ard Schrijvers
            Assignee: Ard Schrijvers
             Fix For: 2.6.4, 2.7.2


Because we mapped our security model to lucene queries, we'd like to override the expensive QueryResultImpl#isAccessGranted method. I will make the method protected instead of private. If someone has strong objections, please let me know

Regards Ard



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38507-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 20:05:33 2013
Return-Path: <dev-return-38507-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12E711024B
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 20:05:33 +0000 (UTC)
Received: (qmail 70283 invoked by uid 500); 30 Sep 2013 20:05:32 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 69648 invoked by uid 500); 30 Sep 2013 20:05:28 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 69245 invoked by uid 99); 30 Sep 2013 20:05:26 -0000
Received: from arcas.apache.org (HELO arcas.apache.org) (140.211.11.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 20:05:26 +0000
Date: Mon, 30 Sep 2013 20:05:26 +0000 (UTC)
From: "Jukka Zitting (JIRA)" <jira@apache.org>
To: dev@jackrabbit.apache.org
Message-ID: <JIRA.12670945.1380292983158.5878.1380571526361@arcas>
In-Reply-To: <JIRA.12670945.1380292983158@arcas>
References: <JIRA.12670945.1380292983158@arcas>
Subject: [jira] [Resolved] (JCR-3671) Config DTD doesn't allow
 ProtectedItemImporter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-JIRA-FingerPrint: 30527f35849b9dde25b450d4833f0394


     [ https://issues.apache.org/jira/browse/JCR-3671?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ]

Jukka Zitting resolved JCR-3671.
--------------------------------

       Resolution: Fixed
    Fix Version/s: 2.7.2
                   2.6.4
                   2.4.5

Fixed in revisions 1526928 and 1526945. Merged to the 2.6 branch in revisions 1526944 and 1526946, and to the 2.4 branch in revision 1526947.

I also updated the DTD copies in http://jackrabbit.apache.org/dtd/.

> Config DTD doesn't allow ProtectedItemImporter
> ----------------------------------------------
>
>                 Key: JCR-3671
>                 URL: https://issues.apache.org/jira/browse/JCR-3671
>             Project: Jackrabbit Content Repository
>          Issue Type: Bug
>          Components: jackrabbit-core
>    Affects Versions: 2.4.4, 2.6.3, 2.7.1
>            Reporter: Jukka Zitting
>            Assignee: Jukka Zitting
>            Priority: Minor
>             Fix For: 2.4.5, 2.6.4, 2.7.2
>
>
> The repository configuration parser accepts all of <ProtectedItemImporter>, <ProtectedPropertyImporter> and <ProtectedNodeImporter> as synonyms inside the <Import> configuration element, but the related DTD only declares the latter two as allowed elements. We should fix the DTD to prevent incorrect warnings. 



--
This message was sent by Atlassian JIRA
(v6.1#6144)

From dev-return-38508-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org  Mon Sep 30 20:24:00 2013
Return-Path: <dev-return-38508-apmail-jackrabbit-dev-archive=jackrabbit.apache.org@jackrabbit.apache.org>
X-Original-To: apmail-jackrabbit-dev-archive@www.apache.org
Delivered-To: apmail-jackrabbit-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 618FE1041B
	for <apmail-jackrabbit-dev-archive@www.apache.org>; Mon, 30 Sep 2013 20:24:00 +0000 (UTC)
Received: (qmail 14344 invoked by uid 500); 30 Sep 2013 20:23:59 -0000
Delivered-To: apmail-jackrabbit-dev-archive@jackrabbit.apache.org
Received: (qmail 14110 invoked by uid 500); 30 Sep 2013 20:23:57 -0000
Mailing-List: contact dev-help@jackrabbit.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:dev-help@jackrabbit.apache.org>
List-Unsubscribe: <mailto:dev-unsubscribe@jackrabbit.apache.org>
List-Post: <mailto:dev@jackrabbit.apache.org>
List-Id: <dev.jackrabbit.apache.org>
Reply-To: dev@jackrabbit.apache.org
Delivered-To: mailing list dev@jackrabbit.apache.org
Received: (qmail 14083 invoked by uid 99); 30 Sep 2013 20:23:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 20:23:56 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tripod@adobe.com designates 64.18.1.236 as permitted sender)
Received: from [64.18.1.236] (HELO exprod6og120.obsmtp.com) (64.18.1.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Sep 2013 20:23:49 +0000
Received: from outbound-smtp-1.corp.adobe.com ([192.150.11.134]) by exprod6ob120.postini.com ([64.18.5.12]) with SMTP
	ID DSNKUkndwF0nZDAamnstTmhH38GDkfX3GMr7@postini.com; Mon, 30 Sep 2013 13:23:28 PDT
Received: from inner-relay-2.corp.adobe.com ([153.32.1.52])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r8UKJoiH009929
	for <dev@jackrabbit.apache.org>; Mon, 30 Sep 2013 13:19:50 -0700 (PDT)
Received: from nacas01.corp.adobe.com (nacas01.corp.adobe.com [10.8.189.99])
	by inner-relay-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id r8UKNROU027596
	for <dev@jackrabbit.apache.org>; Mon, 30 Sep 2013 13:23:27 -0700 (PDT)
Received: from SJ1GWM333.corp.adobe.com (10.5.79.98) by nacas01.corp.adobe.com
 (10.8.189.99) with Microsoft SMTP Server (TLS) id 8.3.327.1; Mon, 30 Sep 2013
 13:23:27 -0700
Received: from eurcas01.eur.adobe.com (10.128.4.27) by
 SJ1GWM333.corp.adobe.com (10.5.79.98) with Microsoft SMTP Server (TLS) id
 14.3.158.1; Mon, 30 Sep 2013 13:23:27 -0700
Received: from eurmbx01.eur.adobe.com ([10.128.4.32]) by
 eurcas01.eur.adobe.com ([10.128.4.27]) with mapi; Mon, 30 Sep 2013 21:23:25
 +0100
From: Tobias Bocanegra <tripod@adobe.com>
To: "dev@jackrabbit.apache.org" <dev@jackrabbit.apache.org>
Date: Mon, 30 Sep 2013 21:23:20 +0100
Subject: [ANNOUNCE] Apache Jackrabbit Filevault 3.0.0 released
Thread-Topic: [ANNOUNCE] Apache Jackrabbit Filevault 3.0.0 released
Thread-Index: Ac6+GuqVUSsgI0xHT7evMTD30goEjw==
Message-ID: <CAB+dfi=QxVrcU2Tk6akAhXvsQEFjMv01USzzxGAushtLo9KhRg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-received: by 10.42.22.202 with SMTP id p10mr3140439icb.47.1380572600082;
 Mon, 30 Sep 2013 13:23:20 -0700 (PDT)
x-gm-message-state: ALoCoQnf+9kdOlC7AhWS0Jd6w29FuwPfsiTwoRbS3Pgbsx/seMrj71NBdqJzDLhaWV8s/uT3ZYF3
x-google-dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=1wDJ9JsZEcTflzmE4aOW437w126W/+k2FnkcZQCBB/8=;
        b=dtYJwe/djV2ICEVbB0fvMLRaZc1bN1dIviUTDw8rWt5Mf+hq8hRk/ilheUDMZG4p9k
         eqZ/rB1PHFz1esVydIXBMqn37+l3BaB8nyBd/oQBAruKCKURhQ5XzzYZnn44exmPD6yZ
         twsO0hUv3JtzvOOMFc/pQHjEQF1zsonXQ3D3UzKB2ahrcBVuK6Sw7leWMUfGYmCajEq2
         e3x4fzT6q8f65yf+SiqNW3zRVcJXdd4o3HYw76toEpwjQ7LW2r5hJLoYRMQUc/5Hsgzj
         VgtM/g2hi+70PUuPgX3O7mAandSJEcwTxaPVf4yX1pveHo9S2s629EXLL2M6h5m6iIaF
         3eVQ==
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlIEFwYWNoZSBKYWNrcmFiYml0IGNvbW11bml0eSBpcyBwbGVhc2VkIHRvIGFubm91bmNlIHRo
ZSByZWxlYXNlIG9mDQpBcGFjaGUgSmFja3JhYmJpdCBGaWxldmF1bHQgMy4wLjAuIFRoZSByZWxl
YXNlIGlzIGF2YWlsYWJsZSBmb3IgZG93bmxvYWQgYXQ6DQoNCiAgICBodHRwczovL2Rpc3QuYXBh
Y2hlLm9yZy9yZXBvcy9kaXN0L3JlbGVhc2UvamFja3JhYmJpdC9maWxldmF1bHQvMy4wLjAvDQoN
ClNlZSB0aGUgZnVsbCByZWxlYXNlIG5vdGVzIGJlbG93IGZvciBkZXRhaWxzIGFib3V0IHRoaXMg
cmVsZWFzZS4NCg0KDQpSZWxlYXNlIE5vdGVzIC0tIEFwYWNoZSBKYWNrcmFiYml0IEZpbGVWYXVs
dCAtLSBWZXJzaW9uIDMuMC4wDQoNCkludHJvZHVjdGlvbg0KLS0tLS0tLS0tLS0tDQoNClRoZSBG
aWxlVmF1bHQgaW50cm9kdWNlcyBhIEpDUiByZXBvc2l0b3J5IHRvIGZpbGVzeXN0ZW0gbWFwcGlu
Zy4gVGhlDQptYXBwaW5nIGlzIGV4cG9zZWQgYnkgYW5kIEFQSSBhbmQgdXNlZCBieSB0aGUNCl9D
UlggQ29udGVudCBQYWNrYWdpbmdfICB0aGF0IGFsbG93cyB0byBjcmVhdGUgcG9ydGFibGUgcGFj
a2FnZXMgb2YNCnJlcG9zaXRvcnkgY29udGVudC4NClRoZSBWYXVsdCBDb21tYW5kIExpbmUgSW50
ZXJmYWNlIGFrYSBfdmx0XyB0aGF0IHByb3ZpZGVzIGEgc3VidmVyc2lvbg0KbGlrZSB1dGlsaXR5
IHRvIHdvcmsgYW5kIGRldmVsb3Agd2l0aCByZXBvc2l0b3J5IGNvbnRlbnQuDQoNCkNoYW5nZXMg
aW4gSmFja3JhYmJpdCBGaWxlVmF1bHQgMy4wLjANCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCg0KTmV3IGZlYXR1cmVzOg0KDQpWZXJzaW9uIDMuMC4wIGlzIHRoZSBpbml0
aWFsIHZlcnNpb24gb2YgdGhpcyBjb250cmlidXRpb24gdG8gdGhlDQpBcGFjaGUgSmFja3JhYmJp
dCBwcm9qZWN0Lg0KDQpGb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgdGhl
IGNoYW5nZXMgaW4gdGhpcyBhbmQgb3RoZXINCkZpbGVWYXVsdCByZWxlYXNlcywgcGxlYXNlIHNl
ZSB0aGUgRmlsZVZhdWx0IGlzc3VlIHRyYWNrZXIgYXQNCg0KICAgIGh0dHBzOi8vaXNzdWVzLmFw
YWNoZS5vcmcvamlyYS9icm93c2UvSkNSDQoNCkJ1ZyBGaXhlczoNCg0KW0pDUi0zNjYxXSBqY3J2
bHQ6IFN0cmluZ1tdeyIifSBub3QgcGFja2FnZWQgY29ycmVjdGx5DQoNCkltcHJvdmVtZW50czoN
Cg0KW0pDUi0zNjEyXSBDb250cmlidXRlIEFkb2JlJ3MgRmlsZVZhdWx0IHRvIEFTRg0KW0pDUi0z
NjQ5XSBGaWxlVmF1bHQ6IGZpeCB1c2FnZSBvZiBAaW5oZXJpdERvYyBpbiBjb25zdHJ1Y3RvciBk
b2N1bWVudGF0aW9uDQpbSkNSLTM2NjZdIEZpbGVWYXVsdDogVmF1bHRGc0NvbmZpZzExIHJlZmVy
ZW5jZXMgaW5jb3JyZWN0IGNsYXNzZXMNCmZyb20gcHJpb3IgdmVyc2lvbnMNCltKQ1ItMzY2NF0g
RmlsZVZhdWx0OiBmaXggamF2YWRvYyBmb3IgUGxhdGZvcm1OYW1lRm9ybWF0dGVyDQpbSkNSLTM2
NjNdIEZpbGVWYXVsdDogdHdlYWsgZ2l0aWdub3JlIGZpbGUNCltKQ1ItMzY0OF0gRmlsZVZhdWx0
OiByZW1vdmUgZGVwZW5kZWN5TWFuYWdlbWVudCBlbnRyeSBmb3IgY29uY3VycmVudDpjb25jdXJy
ZW50DQpbSkNSLTM2NDddIEZpbGVWYXVsdDogdXBkYXRlIG1hdmVuLXNjci1wbHVnaW4gYW5kIG1h
dmVuLWJ1bmRsZS1wbHVnaW4gdmVyc2lvbnMNCg0KDQpSZWxlYXNlIENvbnRlbnRzDQotLS0tLS0t
LS0tLS0tLS0tDQoNClRoaXMgcmVsZWFzZSBjb25zaXN0cyBvZiBhIHNpbmdsZSBzb3VyY2UgYXJj
aGl2ZSBwYWNrYWdlZCBhcyBhIHppcCBmaWxlLg0KVGhlIGFyY2hpdmUgY2FuIGJlIHVucGFja2Vk
IHdpdGggdGhlIGphciB0b29sIGZyb20geW91ciBKREsgaW5zdGFsbGF0aW9uLg0KU2VlIHRoZSBS
RUFETUUudHh0IGZpbGUgZm9yIGluc3RydWN0aW9ucyBvbiBob3cgdG8gYnVpbGQgdGhpcyByZWxl
YXNlLg0KDQpUaGUgc291cmNlIGFyY2hpdmUgaXMgYWNjb21wYW5pZWQgYnkgU0hBMSBhbmQgTUQ1
IGNoZWNrc3VtcyBhbmQgYSBQR1ANCnNpZ25hdHVyZSB0aGF0IHlvdSBjYW4gdXNlIHRvIHZlcmlm
eSB0aGUgYXV0aGVudGljaXR5IG9mIHlvdXIgZG93bmxvYWQuDQpUaGUgcHVibGljIGtleSB1c2Vk
IGZvciB0aGUgUEdQIHNpZ25hdHVyZSBjYW4gYmUgZm91bmQgYXQNCmh0dHBzOi8vc3ZuLmFwYWNo
ZS5vcmcvcmVwb3MvYXNmL2phY2tyYWJiaXQvZGlzdC9LRVlTLg0KDQpBYm91dCBBcGFjaGUgSmFj
a3JhYmJpdA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KQXBhY2hlIEphY2tyYWJiaXQgaXMg
YSBmdWxseSBjb25mb3JtaW5nIGltcGxlbWVudGF0aW9uIG9mIHRoZSBDb250ZW50DQpSZXBvc2l0
b3J5IGZvciBKYXZhIFRlY2hub2xvZ3kgQVBJIChKQ1IpLiBBIGNvbnRlbnQgcmVwb3NpdG9yeSBp
cyBhDQpoaWVyYXJjaGljYWwgY29udGVudCBzdG9yZSB3aXRoIHN1cHBvcnQgZm9yIHN0cnVjdHVy
ZWQgYW5kIHVuc3RydWN0dXJlZA0KY29udGVudCwgZnVsbCB0ZXh0IHNlYXJjaCwgdmVyc2lvbmlu
ZywgdHJhbnNhY3Rpb25zLCBvYnNlcnZhdGlvbiwgYW5kDQptb3JlLg0KDQpGb3IgbW9yZSBpbmZv
cm1hdGlvbiwgdmlzaXQgaHR0cDovL2phY2tyYWJiaXQuYXBhY2hlLm9yZy8NCg0KQWJvdXQgVGhl
IEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NCg0KRXN0YWJsaXNoZWQgaW4gMTk5OSwgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu
ZGF0aW9uIHByb3ZpZGVzIG9yZ2FuaXphdGlvbmFsLA0KbGVnYWwsIGFuZCBmaW5hbmNpYWwgc3Vw
cG9ydCBmb3IgbW9yZSB0aGFuIDEwMCBmcmVlbHktYXZhaWxhYmxlLA0KY29sbGFib3JhdGl2ZWx5
LWRldmVsb3BlZCBPcGVuIFNvdXJjZSBwcm9qZWN0cy4gVGhlIHByYWdtYXRpYyBBcGFjaGUgTGlj
ZW5zZQ0KZW5hYmxlcyBpbmRpdmlkdWFsIGFuZCBjb21tZXJjaWFsIHVzZXJzIHRvIGVhc2lseSBk
ZXBsb3kgQXBhY2hlIHNvZnR3YXJlOw0KdGhlIEZvdW5kYXRpb24ncyBpbnRlbGxlY3R1YWwgcHJv
cGVydHkgZnJhbWV3b3JrIGxpbWl0cyB0aGUgbGVnYWwgZXhwb3N1cmUNCm9mIGl0cyAyLDUwMCsg
Y29udHJpYnV0b3JzLg0KDQpGb3IgbW9yZSBpbmZvcm1hdGlvbiwgdmlzaXQgaHR0cDovL3d3dy5h
cGFjaGUub3JnLw0KDQpUcmFkZW1hcmtzDQotLS0tLS0tLS0tDQoNCkFwYWNoZSBKYWNrcmFiYml0
LCBKYWNrcmFiYml0LCBBcGFjaGUsIHRoZSBBcGFjaGUgZmVhdGhlciBsb2dvLCBhbmQgdGhlIEFw
YWNoZQ0KSmFja3JhYmJpdCBwcm9qZWN0IGxvZ28gYXJlIHRyYWRlbWFya3Mgb2YgVGhlIEFwYWNo
ZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLg==

